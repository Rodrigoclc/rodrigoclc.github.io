import{A as de,B as Ii,C as jt,D as Qg,E as rI,F as oc,G as De,H as Ri,I as Ch,J as Xg,K as Gi,L as Fr,M as Bo,N as Eh,O as sc,P as Ih,Q as hi,R as Bt,a as k,b as la,c as bh,d as YE,e as QE,f as Ut,g as vh,h as nc,i as Gg,j as XE,k as Pn,l as Kg,m as yh,n as ZE,o as JE,p as wh,q as Rt,r as eI,s as tI,t as Wi,u as Or,v as xh,w as rc,x as Yg,y as iI,z as nI}from"./chunk-BMYGAGMM.js";import{$ as xE,$a as f,$b as qi,A as Ys,Aa as Si,Ab as kt,Ac as Pr,B as He,Ba as dr,Bb as p,Bc as tc,C as Mg,Ca as ri,Cb as g,Cc as ki,D as kr,Da as Po,Db as q,Dc as GE,E as Ro,Ea as ee,Eb as No,Ec as ic,F as Qs,Fa as Q,Fb as Je,Fc as jo,G as Pg,Ga as Rn,Gb as Vo,Gc as KE,H as at,Ha as SE,Hb as Zl,I as _E,Ia as lh,Ib as G,J as bE,Ja as DE,Jb as Jl,Jc as $i,K as hn,Ka as wt,Kb as P,Kc as Xt,L as Mo,La as oi,Lb as rt,Lc as Hg,M as kn,Ma as Ql,Mb as ke,N as Og,Na as ch,Nb as hh,Nc as Ze,O as vE,Oa as ea,Ob as Xe,Oc as Lt,P as Gl,Pa as ta,Pb as Te,Pc as qg,Q as yE,Qa as AE,Qb as te,Qc as Zt,R as lr,Ra as kE,Rb as ie,Rc as $g,S as sh,Sa as RE,Sb as Mn,Sc as Wg,T as Xs,Ta as ME,Tb as S,U as Zs,Ua as PE,Ub as Ve,V as wE,Va as OE,Vb as wi,W as ht,Wa as FE,Wb as xi,X as qe,Xa as Di,Xb as Ci,Y as Fg,Ya as NE,Yb as Ei,Z as ze,Za as Xl,Zb as et,_ as Ke,_a as v,_b as Z,a as nt,aa as Ye,ab as Oo,ac as ec,b as mE,ba as ni,bb as Dt,bc as Lo,c as yt,ca as A,cb as VE,cc as mh,d as Ag,da as U,db as ia,dc as ra,e as kg,ea as CE,eb as dh,ec as fh,f as J,fa as R,fb as Fo,fc as ph,g as Qt,ga as Ng,gb as uh,gc as gh,h as $s,ha as _,hb as W,hc as Bg,i as fE,ia as M,ib as yi,ic as _h,j as Dn,ja as Hi,jb as Vg,jc as ur,k as ko,ka as Js,kb as Ne,kc as BE,l as Ws,la as Kl,lb as Qe,lc as zg,m as pt,ma as N,mb as LE,mc as oa,n as F,na as X,nb as jE,nc as Le,o as ar,oa as H,ob as Lg,oc as zE,p as Rg,pa as Y,pb as me,pc as UE,q as pE,qa as cr,qb as ue,qc as ye,r as B,ra as EE,rb as z,rc as Mr,s as Wl,sa as IE,sb as mn,sc as HE,t as Ui,ta as Yl,tb as oe,tc as sa,u as Gs,ua as Rr,ub as Ai,uc as qE,v as Ks,va as gt,vb as jg,vc as $E,w as oh,wa as ae,wb as xe,wc as he,x as An,xa as le,xb as na,xc as Ug,y as gE,ya as ah,yb as ui,yc as aa,z as Vt,za as TE,zb as At,zc as WE}from"./chunk-BT55ZJYB.js";import{a as D,b as Ue,c as hE,e as Dg,f as C}from"./chunk-CQCHLVVT.js";var Jg=class{};var zo=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let n=i.indexOf(":");if(n>0){let r=i.slice(0,n),o=r.toLowerCase(),s=i.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,n)=>{this.setHeaderEntries(n,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,n])=>{this.setHeaderEntries(i,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new t;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...n),this.headers.set(i,r);break;case"d":let o=e.value;if(!o)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(e,i){let n=(Array.isArray(i)?i:[i]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var e_=class{encodeKey(e){return oI(e)}encodeValue(e){return oI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function wF(t,e){let i=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=i.get(s)||[];l.push(a),i.set(s,l)}),i}var xF=/%(\d[a-f0-9])/gi,CF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oI(t){return encodeURIComponent(t).replace(xF,(e,i)=>CF[i]??e)}function Th(t){return`${t}`}var Nr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new e_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=wF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let n=e.fromObject[i],r=Array.isArray(n)?n.map(Th):[Th(n)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(n=>{let r=e[n];Array.isArray(r)?r.forEach(o=>{i.push({param:n,value:o,op:"a"})}):i.push({param:n,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(n=>i+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new t({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(Th(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],r=n.indexOf(Th(e.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var t_=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function EF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function sI(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function aI(t){return typeof Blob<"u"&&t instanceof Blob}function lI(t){return typeof FormData<"u"&&t instanceof FormData}function IF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ac=class t{constructor(e,i,n,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(EF(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new zo,this.context??=new t_,!this.params)this.params=new Nr,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),l=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||sI(this.body)||aI(this.body)||lI(this.body)||IF(this.body)?this.body:this.body instanceof Nr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lI(this.body)?null:aI(this.body)?this.body.type||null:sI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Nr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,d=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,m)=>h.set(m,e.setHeaders[m]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((h,m)=>h.set(m,e.setParams[m]),d)),new t(i,n,s,{params:d,headers:c,context:u,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},gI=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(gI||{}),i_=class{constructor(e,i=_I.Ok,n="OK"){this.headers=e.headers||new zo,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var lc=class t extends i_{constructor(e={}){super(e),this.type=gI.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var _I=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(_I||{});function Zg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var bI=(()=>{let e=class e{constructor(n){this.handler=n}request(n,r,o={}){let s;if(n instanceof ac)s=n;else{let c;o.headers instanceof zo?c=o.headers:c=new zo(o.headers);let d;o.params&&(o.params instanceof Nr?d=o.params:d=new Nr({fromObject:o.params})),s=new ac(n,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(Ro(c=>this.handler.handle(c)));if(n instanceof ac||o.observe==="events")return a;let l=a.pipe(He(c=>c instanceof lc));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(B(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(B(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Nr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,Zg(o,r))}post(n,r,o={}){return this.request("POST",n,Zg(o,r))}put(n,r,o={}){return this.request("PUT",n,Zg(o,r))}};e.\u0275fac=function(r){return new(r||e)(_(Jg))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();var TF=new R("");var cI="b",dI="h",uI="s",hI="st",mI="u",fI="rt",Sh=new R(""),SF=["GET","HEAD"];function DF(t,e){let d=M(Sh),{isCacheActive:i}=d,n=hE(d,["isCacheActive"]),{transferCache:r,method:o}=t;if(!i||o==="POST"&&!n.includePostRequests&&!r||o!=="POST"&&!SF.includes(o)||r===!1||n.filter?.(t)===!1)return e(t);let s=M(ch),a=kF(t),l=s.get(a,null),c=n.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(c=r.includeHeaders),l){let{[cI]:u,[fI]:h,[dI]:m,[uI]:b,[hI]:y,[mI]:E}=l,j=u;switch(h){case"arraybuffer":j=new TextEncoder().encode(u).buffer;break;case"blob":j=new Blob([u]);break}let re=new zo(m);return F(new lc({body:j,headers:re,status:b,statusText:y,url:E}))}return e(t).pipe(Ke(u=>{u instanceof lc&&s.set(a,{[cI]:u.body,[dI]:AF(u.headers,c),[uI]:u.status,[hI]:u.statusText,[mI]:u.url||"",[fI]:t.responseType})}))}function AF(t,e){if(!e)return{};let i={};for(let n of e){let r=t.getAll(n);r!==null&&(i[n]=r)}return i}function pI(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function kF(t){let{params:e,method:i,responseType:n,url:r}=t,o=pI(e),s=t.serializeBody();s instanceof URLSearchParams?s=pI(s):typeof s!="string"&&(s="");let a=[i,n,r,s,o].join("|"),l=RF(a);return l}function RF(t){let e=0;for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function vI(t){return[{provide:Sh,useFactory:()=>(uh("NgHttpTransferCache"),D({isCacheActive:!0},t))},{provide:TF,useValue:DF,multi:!0,deps:[ch,Sh]},{provide:_h,multi:!0,useFactory:()=>{let e=M(ur),i=M(Sh);return()=>{BE(e).then(()=>{i.isCacheActive=!1})}}}]}var o_=class extends $E{constructor(){super(...arguments),this.supportsDOMEvents=!0}},s_=class t extends o_{static makeCurrent(){qE(new t)}onAndCancel(e,i,n){return e.addEventListener(i,n),()=>{e.removeEventListener(i,n)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=OF();return i==null?null:FF(i)}resetBaseElement(){cc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return WE(document.cookie,e)}},cc=null;function OF(){return cc=cc||document.querySelector("base"),cc?cc.getAttribute("href"):null}function FF(t){return new URL(t,document.baseURI).pathname}var NF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),a_=new R(""),xI=(()=>{let e=class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new Ye(5101,!1);return this._eventNameToPlugin.set(n,r),r}};e.\u0275fac=function(r){return new(r||e)(_(a_),_(W))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),Dh=class{constructor(e){this._doc=e}},n_="ng-app-id",CI=(()=>{let e=class e{constructor(n,r,o,s={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=jo(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${n_}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){let o=this.styleRef;if(o.has(n)){let s=o.get(n);return s.usage+=r,s.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===n)return o.delete(r),s.removeAttribute(n_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(n_,this.appId),n.appendChild(a),a}}addStyleToHost(n,r){let o=this.getStyleElement(n,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(_(he),_(lh),_(Ql,8),_(wt))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),r_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},d_=/%COMP%/g,EI="%COMP%",VF=`_nghost-${EI}`,LF=`_ngcontent-${EI}`,jF=!0,BF=new R("",{providedIn:"root",factory:()=>jF});function zF(t){return LF.replace(d_,t)}function UF(t){return VF.replace(d_,t)}function II(t,e){return e.map(i=>i.replace(d_,t))}var Ah=(()=>{let e=class e{constructor(n,r,o,s,a,l,c,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=jo(l),this.defaultRenderer=new dc(n,a,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Kl.ShadowDom&&(r=Ue(D({},r),{encapsulation:Kl.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof kh?o.applyToHost(n):o instanceof uc&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Kl.Emulated:s=new kh(c,d,r,this.appId,u,a,l,h);break;case Kl.ShadowDom:return new l_(c,d,n,r,a,l,this.nonce,h);default:s=new uc(c,d,r,u,a,l,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(_(xI),_(CI),_(lh),_(BF),_(he),_(wt),_(W),_(Ql))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),dc=class{constructor(e,i,n,r){this.eventManager=e,this.doc=i,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(r_[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(yI(e)?e.content:e).appendChild(i)}insertBefore(e,i,n){e&&(yI(e)?e.content:e).insertBefore(i,n)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new Ye(-5104,!1);return i||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,n,r){if(r){i=r+":"+i;let o=r_[r];o?e.setAttributeNS(o,i,n):e.setAttribute(i,n)}else e.setAttribute(i,n)}removeAttribute(e,i,n){if(n){let r=r_[n];r?e.removeAttributeNS(r,i):e.removeAttribute(`${n}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,n,r){r&(Xl.DashCase|Xl.Important)?e.style.setProperty(i,n,r&Xl.Important?"important":""):e.style[i]=n}removeStyle(e,i,n){n&Xl.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,n){e!=null&&(e[i]=n)}setValue(e,i){e.nodeValue=i}listen(e,i,n){if(typeof e=="string"&&(e=sa().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(n))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function yI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var l_=class extends dc{constructor(e,i,n,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=i,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=II(r.id,r.styles);for(let d of c){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,n){return super.insertBefore(this.nodeOrShadowRoot(e),i,n)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},uc=class extends dc{constructor(e,i,n,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=l?II(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},kh=class extends uc{constructor(e,i,n,r,o,s,a,l){let c=r+"-"+n.id;super(e,i,n,o,s,a,l,c),this.contentAttr=zF(c),this.hostAttr=UF(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let n=super.createElement(e,i);return super.setAttribute(n,this.contentAttr,""),n}},HF=(()=>{let e=class e extends Dh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),wI=["alt","control","meta","shift"],qF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$F={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},WF=(()=>{let e=class e extends Dh{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sa().onAndCancel(n,s.domEventName,a))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),wI.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(n,r){let o=qF[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(o=n.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),wI.forEach(a=>{if(a!==o){let l=$F[a];l(n)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(n,r,o){return s=>{e.matchEventFullKeyCode(s,n)&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(r){return new(r||e)(_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function TI(t,e){return zE(D({rootComponent:t},GF(e)))}function GF(t){return{appProviders:[...ZF,...t?.providers??[]],platformProviders:XF}}function KF(){s_.makeCurrent()}function YF(){return new Po}function QF(){return SE(document),document}var XF=[{provide:wt,useValue:GE},{provide:DE,useValue:KF,multi:!0},{provide:he,useFactory:QF,deps:[]}];var ZF=[{provide:IE,useValue:"root"},{provide:Po,useFactory:YF,deps:[]},{provide:a_,useClass:HF,multi:!0,deps:[he,W,wt]},{provide:a_,useClass:WF,multi:!0,deps:[he]},Ah,CI,xI,{provide:dh,useExisting:Ah},{provide:KE,useClass:NF,deps:[]},[]];var SI=(()=>{let e=class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};e.\u0275fac=function(r){return new(r||e)(_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var u_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=_(JF),o},providedIn:"root"});let t=e;return t})(),JF=(()=>{let e=class e extends u_{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case Di.NONE:return r;case Di.HTML:return ta(r,"HTML")?ea(r):FE(this._doc,String(r)).toString();case Di.STYLE:return ta(r,"Style")?ea(r):r;case Di.SCRIPT:if(ta(r,"Script"))return ea(r);throw new Ye(5200,!1);case Di.URL:return ta(r,"URL")?ea(r):OE(String(r));case Di.RESOURCE_URL:if(ta(r,"ResourceURL"))return ea(r);throw new Ye(5201,!1);default:throw new Ye(5202,!1)}}bypassSecurityTrustHtml(n){return AE(n)}bypassSecurityTrustStyle(n){return kE(n)}bypassSecurityTrustScript(n){return RE(n)}bypassSecurityTrustUrl(n){return ME(n)}bypassSecurityTrustResourceUrl(n){return PE(n)}};e.\u0275fac=function(r){return new(r||e)(_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),c_=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(c_||{});function DI(...t){let e=[],i=new Set,n=i.has(c_.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of t)i.add(o),r.length&&e.push(r);return cr([[],UE(),i.has(c_.NoHttpTransferCache)||n?[]:vI({}),e])}var we="primary",Tc=Symbol("RouteTitle"),g_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function ma(t){return new g_(t)}function eN(t,e,i){let n=i.path.split("/");if(n.length>t.length||i.pathMatch==="full"&&(e.hasChildren()||n.length<t.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],a=t[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function tN(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!On(t[i],e[i]))return!1;return!0}function On(t,e){let i=t?__(t):void 0,n=e?__(e):void 0;if(!i||!n||i.length!=n.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!NI(t[r],e[r]))return!1;return!0}function __(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function NI(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let i=[...t].sort(),n=[...e].sort();return i.every((r,o)=>n[o]===r)}else return t===e}function VI(t){return t.length>0?t[t.length-1]:null}function Br(t){return Rg(t)?t:gh(t)?pt(Promise.resolve(t)):F(t)}var iN={exact:jI,subset:BI},LI={exact:nN,subset:rN,ignored:()=>!0};function kI(t,e,i){return iN[i.paths](t.root,e.root,i.matrixParams)&&LI[i.queryParams](t.queryParams,e.queryParams)&&!(i.fragment==="exact"&&t.fragment!==e.fragment)}function nN(t,e){return On(t,e)}function jI(t,e,i){if(!Ho(t.segments,e.segments)||!Ph(t.segments,e.segments,i)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!t.children[n]||!jI(t.children[n],e.children[n],i))return!1;return!0}function rN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>NI(t[i],e[i]))}function BI(t,e,i){return zI(t,e,e.segments,i)}function zI(t,e,i,n){if(t.segments.length>i.length){let r=t.segments.slice(0,i.length);return!(!Ho(r,i)||e.hasChildren()||!Ph(r,i,n))}else if(t.segments.length===i.length){if(!Ho(t.segments,i)||!Ph(t.segments,i,n))return!1;for(let r in e.children)if(!t.children[r]||!BI(t.children[r],e.children[r],n))return!1;return!0}else{let r=i.slice(0,t.segments.length),o=i.slice(t.segments.length);return!Ho(t.segments,r)||!Ph(t.segments,r,n)||!t.children[we]?!1:zI(t.children[we],e,o,n)}}function Ph(t,e,i){return e.every((n,r)=>LI[i](t[r].parameters,n.parameters))}var Vr=class{constructor(e=new $e([],{}),i={},n=null){this.root=e,this.queryParams=i,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){return aN.serialize(this)}},$e=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}},Uo=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=ma(this.parameters),this._parameterMap}toString(){return HI(this)}};function oN(t,e){return Ho(t,e)&&t.every((i,n)=>On(i.parameters,e[n].parameters))}function Ho(t,e){return t.length!==e.length?!1:t.every((i,n)=>i.path===e[n].path)}function sN(t,e){let i=[];return Object.entries(t.children).forEach(([n,r])=>{n===we&&(i=i.concat(e(r,n)))}),Object.entries(t.children).forEach(([n,r])=>{n!==we&&(i=i.concat(e(r,n)))}),i}var H_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>new Nh,providedIn:"root"});let t=e;return t})(),Nh=class{parse(e){let i=new v_(e);return new Vr(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${hc(e.root,!0)}`,n=dN(e.queryParams),r=typeof e.fragment=="string"?`#${lN(e.fragment)}`:"";return`${i}${n}${r}`}},aN=new Nh;function Oh(t){return t.segments.map(e=>HI(e)).join("/")}function hc(t,e){if(!t.hasChildren())return Oh(t);if(e){let i=t.children[we]?hc(t.children[we],!1):"",n=[];return Object.entries(t.children).forEach(([r,o])=>{r!==we&&n.push(`${r}:${hc(o,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}else{let i=sN(t,(n,r)=>r===we?[hc(t.children[we],!1)]:[`${r}:${hc(n,!1)}`]);return Object.keys(t.children).length===1&&t.children[we]!=null?`${Oh(t)}/${i[0]}`:`${Oh(t)}/(${i.join("//")})`}}function UI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rh(t){return UI(t).replace(/%3B/gi,";")}function lN(t){return encodeURI(t)}function b_(t){return UI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fh(t){return decodeURIComponent(t)}function RI(t){return Fh(t.replace(/\+/g,"%20"))}function HI(t){return`${b_(t.path)}${cN(t.parameters)}`}function cN(t){return Object.entries(t).map(([e,i])=>`;${b_(e)}=${b_(i)}`).join("")}function dN(t){let e=Object.entries(t).map(([i,n])=>Array.isArray(n)?n.map(r=>`${Rh(i)}=${Rh(r)}`).join("&"):`${Rh(i)}=${Rh(n)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var uN=/^[^\/()?;#]+/;function h_(t){let e=t.match(uN);return e?e[0]:""}var hN=/^[^\/()?;=#]+/;function mN(t){let e=t.match(hN);return e?e[0]:""}var fN=/^[^=?&#]+/;function pN(t){let e=t.match(fN);return e?e[0]:""}var gN=/^[^&#]+/;function _N(t){let e=t.match(gN);return e?e[0]:""}var v_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(n[we]=new $e(e,i)),n}parseSegment(){let e=h_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ye(4009,!1);return this.capture(e),new Uo(Fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=mN(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let r=h_(this.remaining);r&&(n=r,this.capture(n))}e[Fh(i)]=Fh(n)}parseQueryParam(e){let i=pN(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let s=_N(this.remaining);s&&(n=s,this.capture(n))}let r=RI(i),o=RI(n);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=h_(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ye(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[we]:new $e([],s),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ye(4011,!1)}};function qI(t){return t.segments.length>0?new $e([],{[we]:t}):t}function $I(t){let e={};for(let[n,r]of Object.entries(t.children)){let o=$I(r);if(n===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let i=new $e(t.segments,e);return bN(i)}function bN(t){if(t.numberOfChildren===1&&t.children[we]){let e=t.children[we];return new $e(t.segments.concat(e.segments),e.children)}return t}function fa(t){return t instanceof Vr}function vN(t,e,i=null,n=null){let r=WI(t);return GI(r,e,i,n)}function WI(t){let e;function i(o){let s={};for(let l of o.children){let c=i(l);s[l.outlet]=c}let a=new $e(o.url,s);return o===t&&(e=a),a}let n=i(t.root),r=qI(n);return e??r}function GI(t,e,i,n){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return m_(r,r,r,i,n);let o=yN(e);if(o.toRoot())return m_(r,r,new $e([],{}),i,n);let s=wN(o,r,t),a=s.processChildren?pc(s.segmentGroup,s.index,o.commands):YI(s.segmentGroup,s.index,o.commands);return m_(r,s.segmentGroup,a,i,n)}function Vh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function bc(t){return typeof t=="object"&&t!=null&&t.outlets}function m_(t,e,i,n,r){let o={};n&&Object.entries(n).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;t===e?s=i:s=KI(t,e,i);let a=qI($I(s));return new Vr(a,o,r)}function KI(t,e,i){let n={};return Object.entries(t.children).forEach(([r,o])=>{o===e?n[r]=i:n[r]=KI(o,e,i)}),new $e(t.segments,n)}var Lh=class{constructor(e,i,n){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=n,e&&n.length>0&&Vh(n[0]))throw new Ye(4003,!1);let r=n.find(bc);if(r&&r!==VI(n))throw new Ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yN(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lh(!0,0,t);let e=0,i=!1,n=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Lh(i,e,n)}var ua=class{constructor(e,i,n){this.segmentGroup=e,this.processChildren=i,this.index=n}};function wN(t,e,i){if(t.isAbsolute)return new ua(e,!0,0);if(!i)return new ua(e,!1,NaN);if(i.parent===null)return new ua(i,!0,0);let n=Vh(t.commands[0])?0:1,r=i.segments.length-1+n;return xN(i,r,t.numberOfDoubleDots)}function xN(t,e,i){let n=t,r=e,o=i;for(;o>r;){if(o-=r,n=n.parent,!n)throw new Ye(4005,!1);r=n.segments.length}return new ua(n,!1,r-o)}function CN(t){return bc(t[0])?t[0].outlets:{[we]:t}}function YI(t,e,i){if(t??=new $e([],{}),t.segments.length===0&&t.hasChildren())return pc(t,e,i);let n=EN(t,e,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){let o=new $e(t.segments.slice(0,n.pathIndex),{});return o.children[we]=new $e(t.segments.slice(n.pathIndex),t.children),pc(o,0,r)}else return n.match&&r.length===0?new $e(t.segments,{}):n.match&&!t.hasChildren()?y_(t,e,i):n.match?pc(t,0,r):y_(t,e,i)}function pc(t,e,i){if(i.length===0)return new $e(t.segments,{});{let n=CN(i),r={};if(Object.keys(n).some(o=>o!==we)&&t.children[we]&&t.numberOfChildren===1&&t.children[we].segments.length===0){let o=pc(t.children[we],e,i);return new $e(t.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=YI(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new $e(t.segments,r)}}function EN(t,e,i){let n=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=i.length)return o;let s=t.segments[r],a=i[n];if(bc(a))break;let l=`${a}`,c=n<i.length-1?i[n+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!PI(l,c,s))return o;n+=2}else{if(!PI(l,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function y_(t,e,i){let n=t.segments.slice(0,e),r=0;for(;r<i.length;){let o=i[r];if(bc(o)){let l=IN(o.outlets);return new $e(n,l)}if(r===0&&Vh(i[0])){let l=t.segments[e];n.push(new Uo(l.path,MI(i[0]))),r++;continue}let s=bc(o)?o.outlets[we]:`${o}`,a=r<i.length-1?i[r+1]:null;s&&a&&Vh(a)?(n.push(new Uo(s,MI(a))),r+=2):(n.push(new Uo(s,{})),r++)}return new $e(n,{})}function IN(t){let e={};return Object.entries(t).forEach(([i,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[i]=y_(new $e([],{}),0,n))}),e}function MI(t){let e={};return Object.entries(t).forEach(([i,n])=>e[i]=`${n}`),e}function PI(t,e,i){return t==i.path&&On(e,i.parameters)}var gc="imperative",Jt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Jt||{}),Ki=class{constructor(e,i){this.id=e,this.url=i}},vc=class extends Ki{constructor(e,i,n="imperative",r=null){super(e,i),this.type=Jt.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Ki{constructor(e,i,n){super(e,i),this.urlAfterRedirects=n,this.type=Jt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pi=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Pi||{}),w_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(w_||{}),jr=class extends Ki{constructor(e,i,n,r){super(e,i),this.reason=n,this.code=r,this.type=Jt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qo=class extends Ki{constructor(e,i,n,r){super(e,i),this.reason=n,this.code=r,this.type=Jt.NavigationSkipped}},yc=class extends Ki{constructor(e,i,n,r){super(e,i),this.error=n,this.target=r,this.type=Jt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jh=class extends Ki{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=Jt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},x_=class extends Ki{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=Jt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class extends Ki{constructor(e,i,n,r,o){super(e,i),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=Jt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},E_=class extends Ki{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=Jt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I_=class extends Ki{constructor(e,i,n,r){super(e,i),this.urlAfterRedirects=n,this.state=r,this.type=Jt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T_=class{constructor(e){this.route=e,this.type=Jt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},S_=class{constructor(e){this.route=e,this.type=Jt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},D_=class{constructor(e){this.snapshot=e,this.type=Jt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},A_=class{constructor(e){this.snapshot=e,this.type=Jt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},k_=class{constructor(e){this.snapshot=e,this.type=Jt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R_=class{constructor(e){this.snapshot=e,this.type=Jt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wc=class{},xc=class{constructor(e){this.url=e}};var M_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $h,this.attachRef=null}},$h=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new M_,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=P_(e,this._root);return i?i.children.map(n=>n.value):[]}firstChild(e){let i=P_(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=O_(e,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return O_(e,this._root).map(i=>i.value)}};function P_(t,e){if(t===e.value)return e;for(let i of e.children){let n=P_(t,i);if(n)return n}return null}function O_(t,e){if(t===e.value)return[e];for(let i of e.children){let n=O_(t,i);if(n.length)return n.unshift(e),n}return[]}var Mi=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function da(t){let e={};return t&&t.children.forEach(i=>e[i.value.outlet]=i),e}var zh=class extends Bh{constructor(e,i){super(e),this.snapshot=i,$_(this,e)}toString(){return this.snapshot.toString()}};function QI(t){let e=TN(t),i=new Qt([new Uo("",{})]),n=new Qt({}),r=new Qt({}),o=new Qt({}),s=new Qt(""),a=new $o(i,n,o,s,r,we,t,e.root);return a.snapshot=e.root,new zh(new Mi(a,[]),e)}function TN(t){let e={},i={},n={},r="",o=new Cc([],e,n,r,i,we,t,null,{});return new Uh("",new Mi(o,[]))}var $o=class{constructor(e,i,n,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(B(c=>c[Tc]))??F(void 0),this.url=e,this.params=i,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>ma(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>ma(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function q_(t,e,i="emptyOnly"){let n,{routeConfig:r}=t;return e!==null&&(i==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:D(D({},e.params),t.params),data:D(D({},e.data),t.data),resolve:D(D(D(D({},t.data),e.data),r?.data),t._resolvedData)}:n={params:D({},t.params),data:D({},t.data),resolve:D(D({},t.data),t._resolvedData??{})},r&&ZI(r)&&(n.resolve[Tc]=r.title),n}var Cc=class{get title(){return this.data?.[Tc]}constructor(e,i,n,r,o,s,a,l,c){this.url=e,this.params=i,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ma(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},Uh=class extends Bh{constructor(e,i){super(i),this.url=e,$_(this,i)}toString(){return XI(this._root)}};function $_(t,e){e.value._routerState=t,e.children.forEach(i=>$_(t,i))}function XI(t){let e=t.children.length>0?` { ${t.children.map(XI).join(", ")} } `:"";return`${t.value}${e}`}function f_(t){if(t.snapshot){let e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,On(e.queryParams,i.queryParams)||t.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&t.fragmentSubject.next(i.fragment),On(e.params,i.params)||t.paramsSubject.next(i.params),tN(e.url,i.url)||t.urlSubject.next(i.url),On(e.data,i.data)||t.dataSubject.next(i.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function F_(t,e){let i=On(t.params,e.params)&&oN(t.url,e.url),n=!t.parent!=!e.parent;return i&&!n&&(!t.parent||F_(t.parent,e.parent))}function ZI(t){return typeof t.title=="string"||t.title===null}var W_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new Q,this.deactivateEvents=new Q,this.attachEvents=new Q,this.detachEvents=new Q,this.parentContexts=M($h),this.location=M(yi),this.changeDetector=M(Le),this.environmentInjector=M(Yl),this.inputBinder=M(G_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ye(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Ye(4013,!1);this._activatedRoute=n;let o=this.location,a=n.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new N_(n,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gt]});let t=e;return t})(),N_=class{constructor(e,i,n){this.route=e,this.childContexts=i,this.parent=n,this.__ngOutletInjector=!0}get(e,i){return e===$o?this.route:e===$h?this.childContexts:this.parent.get(e,i)}},G_=new R("");function SN(t,e,i){let n=Ec(t,e._root,i?i._root:void 0);return new zh(n,e)}function Ec(t,e,i){if(i&&t.shouldReuseRoute(e.value,i.value.snapshot)){let n=i.value;n._futureSnapshot=e.value;let r=DN(t,e,i);return new Mi(n,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ec(t,a)),s}}let n=AN(e.value),r=e.children.map(o=>Ec(t,o));return new Mi(n,r)}}function DN(t,e,i){return e.children.map(n=>{for(let r of i.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return Ec(t,n,r);return Ec(t,n)})}function AN(t){return new $o(new Qt(t.url),new Qt(t.params),new Qt(t.queryParams),new Qt(t.fragment),new Qt(t.data),t.outlet,t.component,t)}var JI="ngNavigationCancelingError";function eT(t,e){let{redirectTo:i,navigationBehaviorOptions:n}=fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tT(!1,Pi.Redirect);return r.url=i,r.navigationBehaviorOptions=n,r}function tT(t,e){let i=new Error(`NavigationCancelingError: ${t||""}`);return i[JI]=!0,i.cancellationCode=e,i}function kN(t){return iT(t)&&fa(t.url)}function iT(t){return!!t&&t[JI]}var RN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X({type:e,selectors:[["ng-component"]],standalone:!0,features:[Z],decls:1,vars:0,template:function(r,o){r&1&&q(0,"router-outlet")},dependencies:[W_],encapsulation:2});let t=e;return t})();function MN(t,e){return t.providers&&!t._injector&&(t._injector=jE(t.providers,e,`Route: ${t.path}`)),t._injector??e}function K_(t){let e=t.children&&t.children.map(K_),i=e?Ue(D({},t),{children:e}):D({},t);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==we&&(i.component=RN),i}function Fn(t){return t.outlet||we}function PN(t,e){let i=t.filter(n=>Fn(n)===e);return i.push(...t.filter(n=>Fn(n)!==e)),i}function Sc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var ON=(t,e,i,n)=>B(r=>(new V_(e,r.targetRouterState,r.currentRouterState,i,n).activate(t),r)),V_=class{constructor(e,i,n,r,o){this.routeReuseStrategy=e,this.futureState=i,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let i=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,n,e),f_(this.futureState.root),this.activateChildRoutes(i,n,e)}deactivateChildRoutes(e,i,n){let r=da(i);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,i,n){let r=e.value,o=i?i.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,i,s.children)}else this.deactivateChildRoutes(e,i,n);else o&&this.deactivateRouteAndItsChildren(i,n)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let n=i.getContext(e.value.outlet),r=n&&e.value.component?n.children:i,o=da(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let n=i.getContext(e.value.outlet),r=n&&e.value.component?n.children:i,o=da(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,i,n){let r=da(i);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new R_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new A_(e.value.snapshot))}activateRoutes(e,i,n){let r=e.value,o=i?i.value:null;if(f_(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,i,s.children)}else this.activateChildRoutes(e,i,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),f_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Sc(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,n)}},Hh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ha=class{constructor(e,i){this.component=e,this.route=i}};function FN(t,e,i){let n=t._root,r=e?e._root:null;return mc(n,r,i,[n.value])}function NN(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ga(t,e){let i=Symbol(),n=e.get(t,i);return n===i?typeof t=="function"&&!CE(t)?t:e.get(t):n}function mc(t,e,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=da(e);return t.children.forEach(s=>{VN(s,o[s.value.outlet],i,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>_c(a,i.getContext(s),r)),r}function VN(t,e,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=i?i.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=LN(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Hh(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?mc(t,e,a?a.children:null,n,r):mc(t,e,i,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ha(a.outlet.component,s))}else s&&_c(e,a,r),r.canActivateChecks.push(new Hh(n)),o.component?mc(t,null,a?a.children:null,n,r):mc(t,null,i,n,r);return r}function LN(t,e,i){if(typeof i=="function")return i(t,e);switch(i){case"pathParamsChange":return!Ho(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ho(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!F_(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!F_(t,e)}}function _c(t,e,i){let n=da(t),r=t.value;Object.entries(n).forEach(([o,s])=>{r.component?e?_c(s,e.children.getContext(o),i):_c(s,null,i):_c(s,e,i)}),r.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new ha(e.outlet.component,r)):i.canDeactivateChecks.push(new ha(null,r)):i.canDeactivateChecks.push(new ha(null,r))}function Dc(t){return typeof t=="function"}function jN(t){return typeof t=="boolean"}function BN(t){return t&&Dc(t.canLoad)}function zN(t){return t&&Dc(t.canActivate)}function UN(t){return t&&Dc(t.canActivateChild)}function HN(t){return t&&Dc(t.canDeactivate)}function qN(t){return t&&Dc(t.canMatch)}function nT(t){return t instanceof pE||t?.name==="EmptyError"}var Mh=Symbol("INITIAL_VALUE");function pa(){return qe(t=>Wl(t.map(e=>e.pipe(at(1),ht(Mh)))).pipe(B(e=>{for(let i of e)if(i!==!0){if(i===Mh)return Mh;if(i===!1||i instanceof Vr)return i}return!0}),He(e=>e!==Mh),at(1)))}function $N(t,e){return Ui(i=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?F(Ue(D({},i),{guardsResult:!0})):WN(s,n,r,t).pipe(Ui(a=>a&&jN(a)?GN(n,o,t,e):F(a)),B(a=>Ue(D({},i),{guardsResult:a})))})}function WN(t,e,i,n){return pt(t).pipe(Ui(r=>ZN(r.component,r.route,i,e,n)),kn(r=>r!==!0,!0))}function GN(t,e,i,n){return pt(e).pipe(Ro(r=>Gs(YN(r.route.parent,n),KN(r.route,n),XN(t,r.path,i),QN(t,r.route,i))),kn(r=>r!==!0,!0))}function KN(t,e){return t!==null&&e&&e(new k_(t)),F(!0)}function YN(t,e){return t!==null&&e&&e(new D_(t)),F(!0)}function QN(t,e,i){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return F(!0);let r=n.map(o=>Ks(()=>{let s=Sc(e)??i,a=ga(o,s),l=zN(a)?a.canActivate(e,t):Rr(s,()=>a(e,t));return Br(l).pipe(kn())}));return F(r).pipe(pa())}function XN(t,e,i){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>NN(s)).filter(s=>s!==null).map(s=>Ks(()=>{let a=s.guards.map(l=>{let c=Sc(s.node)??i,d=ga(l,c),u=UN(d)?d.canActivateChild(n,t):Rr(c,()=>d(n,t));return Br(u).pipe(kn())});return F(a).pipe(pa())}));return F(o).pipe(pa())}function ZN(t,e,i,n,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let l=Sc(e)??r,c=ga(a,l),d=HN(c)?c.canDeactivate(t,e,i,n):Rr(l,()=>c(t,e,i,n));return Br(d).pipe(kn())});return F(s).pipe(pa())}function JN(t,e,i,n){let r=e.canLoad;if(r===void 0||r.length===0)return F(!0);let o=r.map(s=>{let a=ga(s,t),l=BN(a)?a.canLoad(e,i):Rr(t,()=>a(e,i));return Br(l)});return F(o).pipe(pa(),rT(n))}function rT(t){return mE(Ke(e=>{if(fa(e))throw eT(t,e)}),B(e=>e===!0))}function eV(t,e,i,n){let r=e.canMatch;if(!r||r.length===0)return F(!0);let o=r.map(s=>{let a=ga(s,t),l=qN(a)?a.canMatch(e,i):Rr(t,()=>a(e,i));return Br(l)});return F(o).pipe(pa(),rT(n))}var Ic=class{constructor(e){this.segmentGroup=e||null}},qh=class extends Error{constructor(e){super(),this.urlTree=e}};function ca(t){return ar(new Ic(t))}function tV(t){return ar(new Ye(4e3,!1))}function iV(t){return ar(tT(!1,Pi.GuardRejected))}var L_=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let n=[],r=i.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return F(n);if(r.numberOfChildren>1||!r.children[we])return tV(e.redirectTo);r=r.children[we]}}applyRedirectCommands(e,i,n){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,n);if(i.startsWith("/"))throw new qh(r);return r}applyRedirectCreateUrlTree(e,i,n,r){let o=this.createSegmentGroup(e,i.root,n,r);return new Vr(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let n={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);n[r]=i[a]}else n[r]=o}),n}createSegmentGroup(e,i,n,r){let o=this.createSegments(e,i.segments,n,r),s={};return Object.entries(i.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,n,r)}),new $e(o,s)}createSegments(e,i,n,r){return i.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,n))}findPosParam(e,i,n){let r=n[i.path.substring(1)];if(!r)throw new Ye(4001,!1);return r}findOrReturn(e,i){let n=0;for(let r of i){if(r.path===e.path)return i.splice(n),r;n++}return e}},j_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nV(t,e,i,n,r){let o=Y_(t,e,i);return o.matched?(n=MN(e,n),eV(n,e,i,r).pipe(B(s=>s===!0?o:D({},j_)))):F(o)}function Y_(t,e,i){if(e.path==="**")return rV(i);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||i.length>0)?D({},j_):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(e.matcher||eN)(i,t,e);if(!r)return D({},j_);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?D(D({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function rV(t){return{matched:!0,parameters:t.length>0?VI(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function OI(t,e,i,n){return i.length>0&&aV(t,i,n)?{segmentGroup:new $e(e,sV(n,new $e(i,t.children))),slicedSegments:[]}:i.length===0&&lV(t,i,n)?{segmentGroup:new $e(t.segments,oV(t,i,n,t.children)),slicedSegments:i}:{segmentGroup:new $e(t.segments,t.children),slicedSegments:i}}function oV(t,e,i,n){let r={};for(let o of i)if(Wh(t,e,o)&&!n[Fn(o)]){let s=new $e([],{});r[Fn(o)]=s}return D(D({},n),r)}function sV(t,e){let i={};i[we]=e;for(let n of t)if(n.path===""&&Fn(n)!==we){let r=new $e([],{});i[Fn(n)]=r}return i}function aV(t,e,i){return i.some(n=>Wh(t,e,n)&&Fn(n)!==we)}function lV(t,e,i){return i.some(n=>Wh(t,e,n))}function Wh(t,e,i){return(t.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function cV(t,e,i,n){return Fn(t)!==n&&(n===we||!Wh(e,i,t))?!1:Y_(e,t,i).matched}function dV(t,e,i){return e.length===0&&!t.children[i]}var B_=class{};function uV(t,e,i,n,r,o,s="emptyOnly"){return new z_(t,e,i,n,r,s,o).recognize()}var hV=31,z_=class{constructor(e,i,n,r,o,s,a){this.injector=e,this.configLoader=i,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new L_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ye(4002,`'${e.segmentGroup}'`)}recognize(){let e=OI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(i=>{let n=new Cc([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,{},we,this.rootComponentType,null,{}),r=new Mi(n,i),o=new Uh("",r),s=vN(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,we).pipe(kr(n=>{if(n instanceof qh)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Ic?this.noMatchError(n):n}))}inheritParamsAndData(e,i){let n=e.value,r=q_(n,i,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(e,i,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,i,n):this.processSegment(e,i,n,n.segments,r,!0).pipe(B(o=>o instanceof Mi?[o]:[]))}processChildren(e,i,n){let r=[];for(let o of Object.keys(n.children))o==="primary"?r.unshift(o):r.push(o);return pt(r).pipe(Ro(o=>{let s=n.children[o],a=PN(i,o);return this.processSegmentGroup(e,a,s,o)}),lr((o,s)=>(o.push(...s),o)),Pg(null),vE(),Ui(o=>{if(o===null)return ca(n);let s=oT(o);return mV(s),F(s)}))}processSegment(e,i,n,r,o,s){return pt(i).pipe(Ro(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,n,r,o,s).pipe(kr(l=>{if(l instanceof Ic)return F(null);throw l}))),kn(a=>!!a),kr(a=>{if(nT(a))return dV(n,r,o)?F(new B_):ca(n);throw a}))}processSegmentAgainstRoute(e,i,n,r,o,s,a){return cV(n,r,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,n,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,n,o,s):ca(r):ca(r)}expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:d}=Y_(i,r,o);if(!a)return ca(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hV&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,u).pipe(Ui(h=>this.processSegment(e,n,i,h.concat(d),s,!1)))}matchSegmentAgainstRoute(e,i,n,r,o){let s=nV(i,n,r,e,this.urlSerializer);return n.path==="**"&&(i.children={}),s.pipe(qe(a=>a.matched?(e=n._injector??e,this.getChildConfig(e,n,r).pipe(qe(({routes:l})=>{let c=n._loadedInjector??e,{consumedSegments:d,remainingSegments:u,parameters:h}=a,m=new Cc(d,h,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,pV(n),Fn(n),n.component??n._loadedComponent??null,n,gV(n)),{segmentGroup:b,slicedSegments:y}=OI(i,d,u,l);if(y.length===0&&b.hasChildren())return this.processChildren(c,l,b).pipe(B(j=>j===null?null:new Mi(m,j)));if(l.length===0&&y.length===0)return F(new Mi(m,[]));let E=Fn(n)===o;return this.processSegment(c,l,b,y,E?we:o,!0).pipe(B(j=>new Mi(m,j instanceof Mi?[j]:[])))}))):ca(i)))}getChildConfig(e,i,n){return i.children?F({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?F({routes:i._loadedRoutes,injector:i._loadedInjector}):JN(e,i,n,this.urlSerializer).pipe(Ui(r=>r?this.configLoader.loadChildren(e,i).pipe(Ke(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):iV(i))):F({routes:[],injector:e})}};function mV(t){t.sort((e,i)=>e.value.outlet===we?-1:i.value.outlet===we?1:e.value.outlet.localeCompare(i.value.outlet))}function fV(t){let e=t.value.routeConfig;return e&&e.path===""}function oT(t){let e=[],i=new Set;for(let n of t){if(!fV(n)){e.push(n);continue}let r=e.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),i.add(r)):e.push(n)}for(let n of i){let r=oT(n.children);e.push(new Mi(n.value,r))}return e.filter(n=>!i.has(n))}function pV(t){return t.data||{}}function gV(t){return t.resolve||{}}function _V(t,e,i,n,r,o){return Ui(s=>uV(t,e,i,n,s.extractedUrl,r,o).pipe(B(({state:a,tree:l})=>Ue(D({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function bV(t,e){return Ui(i=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=i;if(!r.length)return F(i);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of sT(l))s.add(c);let a=0;return pt(s).pipe(Ro(l=>o.has(l)?vV(l,n,t,e):(l.data=q_(l,l.parent,t).resolve,F(void 0))),Ke(()=>a++),Og(1),Ui(l=>a===s.size?F(i):Dn))})}function sT(t){let e=t.children.map(i=>sT(i)).flat();return[t,...e]}function vV(t,e,i,n){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!ZI(r)&&(o[Tc]=r.title),yV(o,t,e,n).pipe(B(s=>(t._resolvedData=s,t.data=q_(t,t.parent,i).resolve,null)))}function yV(t,e,i,n){let r=__(t);if(r.length===0)return F({});let o={};return pt(r).pipe(Ui(s=>wV(t[s],e,i,n).pipe(kn(),Ke(a=>{o[s]=a}))),Og(1),_E(o),kr(s=>nT(s)?Dn:ar(s)))}function wV(t,e,i,n){let r=Sc(e)??n,o=ga(t,r),s=o.resolve?o.resolve(e,i):Rr(r,()=>o(e,i));return Br(s)}function p_(t){return qe(e=>{let i=t(e);return i?pt(i).pipe(B(()=>e)):F(e)})}var aT=(()=>{let e=class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===we);return r}getResolvedTitleForRoute(n){return n.data[Tc]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>M(xV),providedIn:"root"});let t=e;return t})(),xV=(()=>{let e=class e extends aT{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(_(SI))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Q_=new R("",{providedIn:"root",factory:()=>({})}),X_=new R(""),CV=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(zg)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return F(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Br(n.loadComponent()).pipe(B(lT),Ke(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Mo(()=>{this.componentLoaders.delete(n)})),o=new kg(r,()=>new J).pipe(Ag());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=EV(r,this.compiler,n,this.onLoadEndListener).pipe(Mo(()=>{this.childrenLoaders.delete(r)})),a=new kg(s,()=>new J).pipe(Ag());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EV(t,e,i,n){return Br(t.loadChildren()).pipe(B(lT),Ui(r=>r instanceof LE||Array.isArray(r)?F(r):pt(e.compileModuleAsync(r))),B(r=>{n&&n(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(i).injector,s=o.get(X_,[],{optional:!0,self:!0}).flat()),{routes:s.map(K_),injector:o}}))}function IV(t){return t&&typeof t=="object"&&"default"in t}function lT(t){return IV(t)?t.default:t}var Z_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>M(TV),providedIn:"root"});let t=e;return t})(),TV=(()=>{let e=class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),SV=new R("");var DV=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new J,this.transitionAbortSubject=new J,this.configLoader=M(CV),this.environmentInjector=M(Yl),this.urlSerializer=M(H_),this.rootContexts=M($h),this.location=M(aa),this.inputBindingEnabled=M(G_,{optional:!0})!==null,this.titleStrategy=M(aT),this.options=M(Q_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(Z_),this.createViewTransition=M(SV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let n=o=>this.events.next(new T_(o)),r=o=>this.events.next(new S_(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ue(D(D({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new Qt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:gc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(He(s=>s.id!==0),B(s=>Ue(D({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),qe(s=>{let a=!1,l=!1;return F(s).pipe(qe(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Pi.SupersededByNewNavigation),Dn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ue(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!d&&u!=="reload"){let h="";return this.events.next(new qo(c.id,this.urlSerializer.serialize(c.rawUrl),h,w_.IgnoredSameUrlNavigation)),c.resolve(null),Dn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(qe(h=>{let m=this.transitions?.getValue();return this.events.next(new vc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?Dn:Promise.resolve(h)}),_V(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Ue(D({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new jh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:m,source:b,restoredState:y,extras:E}=c,j=new vc(h,this.urlSerializer.serialize(m),b,y);this.events.next(j);let re=QI(this.rootComponentType).snapshot;return this.currentTransition=s=Ue(D({},c),{targetSnapshot:re,urlAfterRedirects:m,extras:Ue(D({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,F(s)}else{let h="";return this.events.next(new qo(c.id,this.urlSerializer.serialize(c.extractedUrl),h,w_.IgnoredByUrlHandlingStrategy)),c.resolve(null),Dn}}),Ke(c=>{let d=new x_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),B(c=>(this.currentTransition=s=Ue(D({},c),{guards:FN(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),$N(this.environmentInjector,c=>this.events.next(c)),Ke(c=>{if(s.guardsResult=c.guardsResult,fa(c.guardsResult))throw eT(this.urlSerializer,c.guardsResult);let d=new C_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),He(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Pi.GuardRejected),!1)),p_(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Ke(d=>{let u=new E_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),qe(d=>{let u=!1;return F(d).pipe(bV(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",Pi.NoDataFromResolver)}}))}),Ke(d=>{let u=new I_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),p_(c=>{let d=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ke(m=>{u.component=m}),B(()=>{})));for(let m of u.children)h.push(...d(m));return h};return Wl(d(c.targetSnapshot.root)).pipe(Pg(null),at(1))}),p_(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:c,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return u?pt(u).pipe(B(()=>s)):F(s)}),B(c=>{let d=SN(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Ue(D({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Ke(()=>{this.events.next(new wc)}),ON(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),at(1),Ke({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),ze(this.transitionAbortSubject.pipe(Ke(c=>{throw c}))),Mo(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",Pi.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),kr(c=>{if(l=!0,iT(c))this.events.next(new jr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),kN(c)?this.events.next(new xc(c.url)):s.resolve(!1);else{this.events.next(new yc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(c))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Dn}))}))}cancelNavigationTransition(n,r,o){let s=new jr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AV(t){return t!==gc}var kV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>M(RV),providedIn:"root"});let t=e;return t})(),U_=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},RV=(()=>{let e=class e extends U_{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:()=>M(MV),providedIn:"root"});let t=e;return t})(),MV=(()=>{let e=class e extends cT{constructor(){super(...arguments),this.location=M(aa),this.urlSerializer=M(H_),this.options=M(Q_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(Z_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof vc)this.stateMemento=this.createStateMemento();else if(n instanceof qo)this.rawUrlTree=r.initialUrl;else if(n instanceof jh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else n instanceof wc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof jr&&(n.code===Pi.GuardRejected||n.code===Pi.NoDataFromResolver)?this.restoreHistory(r):n instanceof yc?this.restoreHistory(r,!0):n instanceof Lr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=D(D({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=D(D({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(fc||{});function PV(t,e){t.events.pipe(He(i=>i instanceof Lr||i instanceof jr||i instanceof yc||i instanceof qo),B(i=>i instanceof Lr||i instanceof qo?fc.COMPLETE:(i instanceof jr?i.code===Pi.Redirect||i.code===Pi.SupersededByNewNavigation:!1)?fc.REDIRECTING:fc.FAILED),He(i=>i!==fc.REDIRECTING),at(1)).subscribe(()=>{e()})}function OV(t){throw t}var FV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ac=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=M(ph),this.stateManager=M(cT),this.options=M(Q_,{optional:!0})||{},this.pendingTasks=M(Lg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(DV),this.urlSerializer=M(H_),this.location=M(aa),this.urlHandlingStrategy=M(Z_),this._events=new J,this.errorHandler=this.options.errorHandler||OV,this.navigated=!1,this.routeReuseStrategy=M(kV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(X_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(G_,{optional:!0}),this.eventsSubscription=new nt,this.isNgZoneEnabled=M(W)instanceof W&&W.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof jr&&r.code!==Pi.Redirect&&r.code!==Pi.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Lr)this.navigated=!0;else if(r instanceof xc){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||AV(o.source)};this.scheduleNavigation(a,gc,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}LV(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=D({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(n);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(K_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:a,u=null;switch(l){case"merge":u=D(D({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=o?o.snapshot:this.routerState.snapshot.root;h=WI(m)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),h=this.currentUrlTree.root}return GI(h,n,u,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=fa(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,gc,null,r)}navigate(n,r={skipLocationChange:!1}){return VV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=D({},FV):r===!1?o=D({},NV):o=r,fa(n))return kI(this.currentUrlTree,n,o);let s=this.parseUrl(n);return kI(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(n,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,d;a?(l=a.resolve,c=a.reject,d=a.promise):d=new Promise((h,m)=>{l=h,c=m});let u=this.pendingTasks.add();return PV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:l,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function VV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Ye(4008,!1)}function LV(t){return!(t instanceof wc)&&!(t instanceof xc)}var Nn=(()=>{let e=class e{constructor(n,r,o,s,a,l){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new J,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof Lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,s,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(n!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:NE(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,n,r):o.removeAttribute(s,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(f(Ac),f($o),dr("tabindex"),f(Fo),f(ee),f(Ug))},e.\u0275dir=Y({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&G("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&ue("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[N.HasDecoratorInputTransform,"preserveFragment","preserveFragment",ye],skipLocationChange:[N.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",ye],replaceUrl:[N.HasDecoratorInputTransform,"replaceUrl","replaceUrl",ye],routerLink:"routerLink"},standalone:!0,features:[Qe,gt]});let t=e;return t})();var jV=new R("");function dT(t,...e){return cr([{provide:X_,multi:!0,useValue:t},[],{provide:$o,useFactory:BV,deps:[Ac]},{provide:_h,multi:!0,useFactory:zV},e.map(i=>i.\u0275providers)])}function BV(t){return t.routerState.root}function zV(){let t=M(ri);return e=>{let i=t.get(ur);if(e!==i.components[0])return;let n=t.get(Ac),r=t.get(UV);t.get(HV)===1&&n.initialNavigation(),t.get(qV,null,Ng.Optional)?.setUpPreloading(),t.get(jV,null,Ng.Optional)?.init(),n.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var UV=new R("",{factory:()=>new J}),HV=new R("",{providedIn:"root",factory:()=>1});var qV=new R("");var eb;try{eb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{eb=!1}var Ae=(()=>{let e=class e{constructor(n){this._platformId=n,this.isBrowser=this._platformId?ic(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||eb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(_(wt))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kc;function WV(){if(kc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kc=!0}))}finally{kc=kc||!1}return kc}function Yi(t){return WV()?t:!!t.capture}var fn=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(fn||{}),Gh,Wo;function Kh(){if(Wo==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Wo=!1,Wo;if("scrollBehavior"in document.documentElement.style)Wo=!0;else{let t=Element.prototype.scrollTo;t?Wo=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Wo=!1}}return Wo}function _a(){if(typeof document!="object"||!document)return fn.NORMAL;if(Gh==null){let t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let i=document.createElement("div"),n=i.style;n.width="2px",n.height="1px",t.appendChild(i),document.body.appendChild(t),Gh=fn.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,Gh=t.scrollLeft===0?fn.NEGATED:fn.INVERTED),t.remove()}return Gh}var J_;function GV(){if(J_==null){let t=typeof document<"u"?document.head:null;J_=!!(t&&(t.createShadowRoot||t.attachShadow))}return J_}function uT(t){if(GV()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Rc(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function pn(t){return t.composedPath?t.composedPath()[0]:t.target}function Mc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function zr(t,...e){return e.length?e.some(i=>t[i]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function tb(t){return t!=null&&`${t}`!="false"}function Yh(t,e=0){return KV(t)?Number(t):e}function KV(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function ba(t){return Array.isArray(t)?t:[t]}function xt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function gn(t){return t instanceof ee?t.nativeElement:t}var hT=(()=>{let e=class e{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),YV=(()=>{let e=class e{constructor(n){this._mutationObserverFactory=n,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((n,r)=>this._cleanupObserver(r))}observe(n){let r=gn(n);return new yt(o=>{let a=this._observeElement(r).subscribe(o);return()=>{a.unsubscribe(),this._unobserveElement(r)}})}_observeElement(n){if(this._observedElements.has(n))this._observedElements.get(n).count++;else{let r=new J,o=this._mutationObserverFactory.create(s=>r.next(s));o&&o.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:o,stream:r,count:1})}return this._observedElements.get(n).stream}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){let{observer:r,stream:o}=this._observedElements.get(n);r&&r.disconnect(),o.complete(),this._observedElements.delete(n)}}};e.\u0275fac=function(r){return new(r||e)(_(hT))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mT=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(n){this._debounce=Yh(n),this._subscribe()}constructor(n,r,o){this._contentObserver=n,this._elementRef=r,this._ngZone=o,this.event=new Q,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let n=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?n.pipe(Qs(this.debounce)):n).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(f(YV),f(ee),f(W))},e.\u0275dir=Y({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[N.HasDecoratorInputTransform,"cdkObserveContentDisabled","disabled",ye],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[Qe]});let t=e;return t})(),Qh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({providers:[hT]});let t=e;return t})();var fT=new Set,Go,QV=(()=>{let e=class e{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ZV}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&XV(n,this._nonce),this._matchMedia(n)}};e.\u0275fac=function(r){return new(r||e)(_(Ae),_(Ql,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XV(t,e){if(!fT.has(t))try{Go||(Go=document.createElement("style"),e&&(Go.nonce=e),Go.setAttribute("type","text/css"),document.head.appendChild(Go)),Go.sheet&&(Go.sheet.insertRule(`@media ${t} {body{ }}`,0),fT.add(t))}catch(i){console.error(i)}}function ZV(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var Xh=(()=>{let e=class e{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new J}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return pT(ba(n)).some(o=>this._registerQuery(o).mql.matches)}observe(n){let o=pT(ba(n)).map(a=>this._registerQuery(a).observable),s=Wl(o);return s=Gs(s.pipe(at(1)),s.pipe(Zs(1),Qs(0))),s.pipe(B(a=>{let l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:d})=>{l.matches=l.matches||c,l.breakpoints[d]=c}),l}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),s={observable:new yt(a=>{let l=c=>this._zone.run(()=>a.next(c));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(ht(r),B(({matches:a})=>({query:n,matches:a})),ze(this._destroySubject)),mql:r};return this._queries.set(n,s),s}};e.\u0275fac=function(r){return new(r||e)(_(QV),_(W))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pT(t){return t.map(e=>e.split(",")).reduce((e,i)=>e.concat(i)).map(e=>e.trim())}var gT={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var nb=class{constructor(e,i){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new J,this._typeaheadSubscription=nt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new J,this.change=new J,e instanceof Rn?this._itemChangesSubscription=e.changes.subscribe(n=>this._itemsChanged(n.toArray())):Vg(e)&&(this._effectRef=HE(()=>this._itemsChanged(e()),{injector:i}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ke(i=>this._pressedLetters.push(i)),Qs(e),He(()=>this._pressedLetters.length>0),B(()=>this._pressedLetters.join(""))).subscribe(i=>{let n=this._getItemsArray();for(let r=1;r<n.length+1;r++){let o=(this._activeItemIndex+r)%n.length,s=n[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(i)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,i=10){return this._pageUpAndDown={enabled:e,delta:i},this}setActiveItem(e){let i=this._activeItem;this.updateActiveItem(e),this._activeItem!==i&&this.change.next(this._activeItemIndex)}onKeydown(e){let i=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(i){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||zr(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let i=this._getItemsArray(),n=typeof e=="number"?e:i.indexOf(e),r=i[n];this._activeItem=r??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let i=this._getItemsArray();for(let n=1;n<=i.length;n++){let r=(this._activeItemIndex+e*n+i.length)%i.length,o=i[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,i){let n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(e+=i,!n[e])return;this.setActiveItem(e)}}_getItemsArray(){return Vg(this._items)?this._items():this._items instanceof Rn?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){let i=e.indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}};var ya=class extends nb{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var dL=(()=>{let e=class e{constructor(n){this._platform=n}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return hL(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let r=uL(yL(n));if(r&&(_T(r)===-1||!this.isVisible(r)))return!1;let o=n.nodeName.toLowerCase(),s=_T(n);return n.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!bL(n)?!1:o==="audio"?n.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,r){return vL(n)&&!this.isDisabled(n)&&(r?.ignoreVisibility||this.isVisible(n))}};e.\u0275fac=function(r){return new(r||e)(_(Ae))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uL(t){try{return t.frameElement}catch{return null}}function hL(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function mL(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function fL(t){return gL(t)&&t.type=="hidden"}function pL(t){return _L(t)&&t.hasAttribute("href")}function gL(t){return t.nodeName.toLowerCase()=="input"}function _L(t){return t.nodeName.toLowerCase()=="a"}function yT(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function _T(t){if(!yT(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function bL(t){let e=t.nodeName.toLowerCase(),i=e==="input"&&t.type;return i==="text"||i==="password"||e==="select"||e==="textarea"}function vL(t){return fL(t)?!1:mL(t)||pL(t)||t.hasAttribute("contenteditable")||yT(t)}function yL(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var rb=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,i,n,r,o=!1){this._element=e,this._checker=i,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let e=this._startAnchor,i=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let i=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let n=this._getFirstTabbableElement(i);return n?.focus(e),!!n}return i.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let i=this._getRegionBoundary("start");return i&&i.focus(e),!!i}focusLastTabbableElement(e){let i=this._getRegionBoundary("end");return i&&i.focus(e),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let n=0;n<i.length;n++){let r=i[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let n=i.length-1;n>=0;n--){let r=i[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[n]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,i){e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(at(1)).subscribe(e)}},wL=(()=>{let e=class e{constructor(n,r,o){this._checker=n,this._ngZone=r,this._document=o}create(n,r=!1){return new rb(n,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(_(dL),_(W),_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wT=(()=>{let e=class e{get enabled(){return this.focusTrap?.enabled||!1}set enabled(n){this.focusTrap&&(this.focusTrap.enabled=n)}constructor(n,r,o){this._elementRef=n,this._focusTrapFactory=r,this._previouslyFocusedElement=null,M(Ae).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(n){let r=n.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Rc(),this.focusTrap?.focusInitialElementWhenReady()}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(wL),f(he))},e.\u0275dir=Y({type:e,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[N.HasDecoratorInputTransform,"cdkTrapFocus","enabled",ye],autoCapture:[N.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",ye]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Qe,gt]});let t=e;return t})();function ob(t){return t.buttons===0||t.detail===0}function sb(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var xL=new R("cdk-input-modality-detector-options"),CL={ignoreKeys:[18,17,224,91,16]},xT=650,va=Yi({passive:!0,capture:!0}),EL=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(n,r,o,s){this._platform=n,this._mostRecentTarget=null,this._modality=new Qt(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=pn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<xT||(this._modality.next(ob(a)?"keyboard":"mouse"),this._mostRecentTarget=pn(a))},this._onTouchstart=a=>{if(sb(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=pn(a)},this._options=D(D({},CL),s),this.modalityDetected=this._modality.pipe(Zs(1)),this.modalityChanged=this.modalityDetected.pipe(hn()),n.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,va),o.addEventListener("mousedown",this._onMousedown,va),o.addEventListener("touchstart",this._onTouchstart,va)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,va),document.removeEventListener("mousedown",this._onMousedown,va),document.removeEventListener("touchstart",this._onTouchstart,va))}};e.\u0275fac=function(r){return new(r||e)(_(Ae),_(W),_(he),_(xL,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IL=new R("liveAnnouncerElement",{providedIn:"root",factory:TL});function TL(){return null}var SL=new R("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),DL=0,CT=(()=>{let e=class e{constructor(n,r,o,s){this._ngZone=r,this._defaultOptions=s,this._document=o,this._liveElement=n||this._createLiveElement()}announce(n,...r){let o=this._defaultOptions,s,a;return r.length===1&&typeof r[0]=="number"?a=r[0]:[s,a]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=o&&o.politeness?o.politeness:"polite"),a==null&&o&&(a=o.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(l=>this._currentResolve=l)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=n,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let n="cdk-live-announcer-element",r=this._document.getElementsByClassName(n),o=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return o.classList.add(n),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${DL++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(n){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],a=s.getAttribute("aria-owns");a?a.indexOf(n)===-1&&s.setAttribute("aria-owns",a+" "+n):s.setAttribute("aria-owns",n)}}};e.\u0275fac=function(r){return new(r||e)(_(IL,8),_(W),_(he),_(SL,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jh=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Jh||{}),AL=new R("cdk-focus-monitor-default-options"),Zh=Yi({passive:!0,capture:!0}),zc=(()=>{let e=class e{constructor(n,r,o,s,a){this._ngZone=n,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new J,this._rootNodeFocusAndBlurListener=l=>{let c=pn(l);for(let d=c;d;d=d.parentElement)l.type==="focus"?this._onFocus(l,d):this._onBlur(l,d)},this._document=s,this._detectionMode=a?.detectionMode||Jh.IMMEDIATE}monitor(n,r=!1){let o=gn(n);if(!this._platform.isBrowser||o.nodeType!==1)return F();let s=uT(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let l={checkChildren:r,subject:new J,rootNode:s};return this._elementInfo.set(o,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(n){let r=gn(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){let s=gn(n),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([l,c])=>this._originChanged(l,r,c)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===Jh.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===Jh.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?xT:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,r){let o=this._elementInfo.get(r),s=pn(n);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(n,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Zh),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Zh)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ze(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Zh),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Zh),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((o,s)=>{(s===n||o.checkChildren&&s.contains(n))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let s=n.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(_(W),_(Ae),_(EL),_(he,8),_(AL,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),em=(()=>{let e=class e{constructor(n,r){this._elementRef=n,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new Q}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let n=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(n,n.nodeType===1&&n.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(zc))},e.\u0275dir=Y({type:e,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let t=e;return t})(),Ko=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Ko||{}),bT="cdk-high-contrast-black-on-white",vT="cdk-high-contrast-white-on-black",ib="cdk-high-contrast-active",ab=(()=>{let e=class e{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=M(Xh).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ko.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(n):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(n.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ko.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ko.BLACK_ON_WHITE}return Ko.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(ib,bT,vT),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Ko.BLACK_ON_WHITE?n.add(ib,bT):r===Ko.WHITE_ON_BLACK&&n.add(ib,vT)}}};e.\u0275fac=function(r){return new(r||e)(_(Ae),_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ET=(()=>{let e=class e{constructor(n){n._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(_(ab))},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[Qh]});let t=e;return t})();var kL=new R("cdk-dir-doc",{providedIn:"root",factory:RL});function RL(){return M(he)}var ML=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function PL(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?ML.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Ht=(()=>{let e=class e{constructor(n){if(this.value="ltr",this.change=new Q,n){let r=n.body?n.body.dir:null,o=n.documentElement?n.documentElement.dir:null;this.value=PL(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(_(kL,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Vn=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({});let t=e;return t})();function OL(){return!0}var FL=new R("mat-sanity-checks",{providedIn:"root",factory:OL}),pe=(()=>{let e=class e{constructor(n,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return Mc()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}};e.\u0275fac=function(r){return new(r||e)(_(ab),_(FL,8),_(he))},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[Vn,Vn]});let t=e;return t})();var Xi=class{constructor(){this._localeChanges=new J,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return e==null||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,i){return this.getYear(e)-this.getYear(i)||this.getMonth(e)-this.getMonth(i)||this.getDate(e)-this.getDate(i)}sameDate(e,i){if(e&&i){let n=this.isValid(e),r=this.isValid(i);return n&&r?!this.compareDate(e,i):n==r}return e==i}clampDate(e,i,n){return i&&this.compareDate(e,i)<0?i:n&&this.compareDate(e,n)>0?n:e}},Hc=new R("mat-date-formats");var wa=(()=>{let e=class e{isErrorState(n,r){return!!(n&&n.invalid&&(n.touched||r&&r.submitted))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qi=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Qi||{}),ub=class{constructor(e,i,n,r=!1){this._renderer=e,this.element=i,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=Qi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},IT=Yi({passive:!0,capture:!0}),hb=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let i=pn(e);i&&this._events.get(e.type)?.forEach((n,r)=>{(r===i||r.contains(i))&&n.forEach(o=>o.handleEvent(e))})}}addHandler(e,i,n,r){let o=this._events.get(i);if(o){let s=o.get(n);s?s.add(r):o.set(n,new Set([r]))}else this._events.set(i,new Map([[n,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,IT)})}removeHandler(e,i,n){let r=this._events.get(e);if(!r)return;let o=r.get(i);o&&(o.delete(n),o.size===0&&r.delete(i),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,IT)))}},TT={enterDuration:225,exitDuration:150},NL=800,ST=Yi({passive:!0,capture:!0}),DT=["mousedown","touchstart"],AT=["mouseup","mouseleave","touchend","touchcancel"],Uc=class Uc{constructor(e,i,n,r){this._target=e,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=gn(n))}fadeInRipple(e,i,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=D(D({},TT),n.animation);n.centered&&(e=r.left+r.width/2,i=r.top+r.height/2);let s=n.radius||VL(e,i,r),a=e-r.left,l=i-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${l-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,n.color!=null&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,m=u.transitionDuration,b=h==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,y=new ub(this,d,n,b);d.style.transform="scale3d(1, 1, 1)",y.state=Qi.FADING_IN,n.persistent||(this._mostRecentTransientRipple=y);let E=null;return!b&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let j=()=>this._finishRippleTransition(y),re=()=>this._destroyRipple(y);d.addEventListener("transitionend",j),d.addEventListener("transitioncancel",re),E={onTransitionEnd:j,onTransitionCancel:re}}),this._activeRipples.set(y,E),(b||!c)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===Qi.FADING_OUT||e.state===Qi.HIDDEN)return;let i=e.element,n=D(D({},TT),e.config.animation);i.style.transitionDuration=`${n.exitDuration}ms`,i.style.opacity="0",e.state=Qi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let i=gn(e);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,DT.forEach(n=>{Uc._eventManager.addHandler(this._ngZone,n,i,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{AT.forEach(i=>{this._triggerElement.addEventListener(i,this,ST)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Qi.FADING_IN?this._startFadeOutTransition(e):e.state===Qi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let i=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=Qi.VISIBLE,!n&&(!i||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let i=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Qi.HIDDEN,i!==null&&(e.element.removeEventListener("transitionend",i.onTransitionEnd),e.element.removeEventListener("transitioncancel",i.onTransitionCancel)),e.element.remove()}_onMousedown(e){let i=ob(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+NL;!this._target.rippleDisabled&&!i&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!sb(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=e.changedTouches;if(i)for(let n=0;n<i.length;n++)this.fadeInRipple(i[n].clientX,i[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let i=e.state===Qi.VISIBLE||e.config.terminateOnPointerUp&&e.state===Qi.FADING_IN;!e.config.persistent&&i&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(DT.forEach(i=>Uc._eventManager.removeHandler(i,e,this)),this._pointerUpEventsRegistered&&AT.forEach(i=>e.removeEventListener(i,this,ST)))}};Uc._eventManager=new hb;var mb=Uc;function VL(t,e,i){let n=Math.max(Math.abs(t-i.left),Math.abs(t-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(n*n+r*r)}var fb=new R("mat-ripple-global-options"),xa=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,r,o,s,a){this._elementRef=n,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new mb(this,r,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:D(D(D({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,o){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,r,D(D({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,D(D({},this.rippleConfig),n))}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(W),f(Ae),f(fb,8),f(oi,8))},e.\u0275dir=Y({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&oe("mat-ripple-unbounded",o.unbounded)},inputs:{color:[N.None,"matRippleColor","color"],unbounded:[N.None,"matRippleUnbounded","unbounded"],centered:[N.None,"matRippleCentered","centered"],radius:[N.None,"matRippleRadius","radius"],animation:[N.None,"matRippleAnimation","animation"],disabled:[N.None,"matRippleDisabled","disabled"],trigger:[N.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),qc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,pe]});let t=e;return t})();var LL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe]});let t=e;return t})();var pb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[qc,pe,LL]});let t=e;return t})(),kT={capture:!0},RT=["focus","click","mouseenter","touchstart"],cb="mat-ripple-loader-uninitialized",db="mat-ripple-loader-class-name",MT="mat-ripple-loader-centered",tm="mat-ripple-loader-disabled",PT=(()=>{let e=class e{constructor(){this._document=M(he,{optional:!0}),this._animationMode=M(oi,{optional:!0}),this._globalRippleOptions=M(fb,{optional:!0}),this._platform=M(Ae),this._ngZone=M(W),this._hosts=new Map,this._onInteraction=n=>{if(!(n.target instanceof HTMLElement))return;let o=n.target.closest(`[${cb}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let n of RT)this._document?.addEventListener(n,this._onInteraction,kT)})}ngOnDestroy(){let n=this._hosts.keys();for(let r of n)this.destroyRipple(r);for(let r of RT)this._document?.removeEventListener(r,this._onInteraction,kT)}configureRipple(n,r){n.setAttribute(cb,""),(r.className||!n.hasAttribute(db))&&n.setAttribute(db,r.className||""),r.centered&&n.setAttribute(MT,""),r.disabled&&n.setAttribute(tm,"")}getRipple(n){return this._hosts.get(n)||this._createRipple(n)}setDisabled(n,r){let o=this._hosts.get(n);if(o){o.disabled=r;return}r?n.setAttribute(tm,""):n.removeAttribute(tm)}_createRipple(n){if(!this._document)return;let r=this._hosts.get(n);if(r)return r;n.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",n.getAttribute(db)),n.append(o);let s=new xa(new ee(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=n,s.centered=n.hasAttribute(MT),s.disabled=n.hasAttribute(tm),this.attachRipple(n,s),s}attachRipple(n,r){n.removeAttribute(cb),this._hosts.set(n,r)}destroyRipple(n){let r=this._hosts.get(n);r&&(r.ngOnDestroy(),this._hosts.delete(n))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,ki,pe]});let t=e;return t})();var _b=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,pe]});let t=e;return t})();var jL=["*"],im;function BL(){if(im===void 0&&(im=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(im=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return im}function $c(t){return BL()?.createHTML(t)||t}function FT(t){return Error(`Unable to find icon with the name "${t}"`)}function zL(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function NT(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function VT(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var mr=class{constructor(e,i,n){this.url=e,this.svgText=i,this.options=n}},UL=(()=>{let e=class e{constructor(n,r,o,s){this._httpClient=n,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(n,r,o){return this.addSvgIconInNamespace("",n,r,o)}addSvgIconLiteral(n,r,o){return this.addSvgIconLiteralInNamespace("",n,r,o)}addSvgIconInNamespace(n,r,o,s){return this._addSvgIconConfig(n,r,new mr(o,null,s))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,r,o,s){let a=this._sanitizer.sanitize(Di.HTML,o);if(!a)throw VT(o);let l=$c(a);return this._addSvgIconConfig(n,r,new mr("",l,s))}addSvgIconSet(n,r){return this.addSvgIconSetInNamespace("",n,r)}addSvgIconSetLiteral(n,r){return this.addSvgIconSetLiteralInNamespace("",n,r)}addSvgIconSetInNamespace(n,r,o){return this._addSvgIconSetConfig(n,new mr(r,null,o))}addSvgIconSetLiteralInNamespace(n,r,o){let s=this._sanitizer.sanitize(Di.HTML,r);if(!s)throw VT(r);let a=$c(s);return this._addSvgIconSetConfig(n,new mr("",a,o))}registerFontClassAlias(n,r=n){return this._fontCssClassesByAlias.set(n,r),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){let r=this._sanitizer.sanitize(Di.RESOURCE_URL,n);if(!r)throw NT(n);let o=this._cachedIconsByUrl.get(r);return o?F(nm(o)):this._loadSvgIconFromConfig(new mr(n,null)).pipe(Ke(s=>this._cachedIconsByUrl.set(r,s)),B(s=>nm(s)))}getNamedSvgIcon(n,r=""){let o=LT(r,n),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,n),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(n,a):ar(FT(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?F(nm(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(B(r=>nm(r)))}_getSvgFromIconSetConfigs(n,r){let o=this._extractIconWithNameFromAnySet(n,r);if(o)return F(o);let s=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(kr(l=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(Di.RESOURCE_URL,a.url)} failed: ${l.message}`;return this._errorHandler.handleError(new Error(d)),F(null)})));return oh(s).pipe(B(()=>{let a=this._extractIconWithNameFromAnySet(n,r);if(!a)throw FT(n);return a}))}_extractIconWithNameFromAnySet(n,r){for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.svgText&&s.svgText.toString().indexOf(n)>-1){let a=this._svgElementFromConfig(s),l=this._extractSvgIconFromSet(a,n,s.options);if(l)return l}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(Ke(r=>n.svgText=r),B(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?F(null):this._fetchIcon(n).pipe(Ke(r=>n.svgText=r))}_extractSvgIconFromSet(n,r,o){let s=n.querySelector(`[id="${r}"]`);if(!s)return null;let a=s.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let l=this._svgElementFromString($c("<svg></svg>"));return l.appendChild(a),this._setSvgAttributes(l,o)}_svgElementFromString(n){let r=this._document.createElement("DIV");r.innerHTML=n;let o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(n){let r=this._svgElementFromString($c("<svg></svg>")),o=n.attributes;for(let s=0;s<o.length;s++){let{name:a,value:l}=o[s];a!=="id"&&r.setAttribute(a,l)}for(let s=0;s<n.childNodes.length;s++)n.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(n.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(n,r){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),r&&r.viewBox&&n.setAttribute("viewBox",r.viewBox),n}_fetchIcon(n){let{url:r,options:o}=n,s=o?.withCredentials??!1;if(!this._httpClient)throw zL();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(Di.RESOURCE_URL,r);if(!a)throw NT(r);let l=this._inProgressUrlFetches.get(a);if(l)return l;let c=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(B(d=>$c(d)),Mo(()=>this._inProgressUrlFetches.delete(a)),sh());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(n,r,o){return this._svgIconConfigs.set(LT(n,r),o),this}_addSvgIconSetConfig(n,r){let o=this._iconSetConfigs.get(n);return o?o.push(r):this._iconSetConfigs.set(n,[r]),this}_svgElementFromConfig(n){if(!n.svgElement){let r=this._svgElementFromString(n.svgText);this._setSvgAttributes(r,n.options),n.svgElement=r}return n.svgElement}_getIconConfigFromResolvers(n,r){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](r,n);if(s)return HL(s)?new mr(s.url,null,s.options):new mr(s,null)}}};e.\u0275fac=function(r){return new(r||e)(_(bI,8),_(u_),_(he,8),_(Po))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nm(t){return t.cloneNode(!0)}function LT(t,e){return t+":"+e}function HL(t){return!!(t.url&&t.options)}var qL=new R("MAT_ICON_DEFAULT_OPTIONS"),$L=new R("mat-icon-location",{providedIn:"root",factory:WL});function WL(){let t=M(he),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var jT=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],GL=jT.map(t=>`[${t}]`).join(", "),KL=/^url\(['"]?#(.*?)['"]?\)$/,BT=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(n){this._color=n}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){let r=this._cleanupFontValue(n);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){let r=this._cleanupFontValue(n);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(n,r,o,s,a,l){this._elementRef=n,this._iconRegistry=r,this._location=s,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=nt.EMPTY,l&&(l.color&&(this.color=this._defaultColor=l.color),l.fontSet&&(this.fontSet=l.fontSet)),o||n.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];let r=n.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let n=this._elementsWithExternalReferences;if(n&&n.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){let n=this._elementRef.nativeElement,r=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let o=n.childNodes[r];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let n=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>n.classList.remove(o)),r.forEach(o=>n.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return typeof n=="string"?n.trim().split(" ")[0]:n}_prependPathToReferences(n){let r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${n}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(n){let r=n.querySelectorAll(GL),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)jT.forEach(a=>{let l=r[s],c=l.getAttribute(a),d=c?c.match(KL):null;if(d){let u=o.get(l);u||(u=[],o.set(l,u)),u.push({name:a,value:d[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){let[r,o]=this._splitIconName(n);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(at(1)).subscribe(s=>this._setSvgElement(s),s=>{let a=`Error retrieving icon ${r}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(a))})}}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(UL),dr("aria-hidden"),f($L),f(Po),f(qL,8))},e.\u0275cmp=X({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,o){r&2&&(ue("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),Ai(o.color?"mat-"+o.color:""),oe("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[N.HasDecoratorInputTransform,"inline","inline",ye],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Qe,Z],ngContentSelectors:jL,decls:1,vars:0,template:function(r,o){r&1&&(rt(),ke(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=e;return t})(),Wc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,pe]});let t=e;return t})();var bb=class{constructor(e){this._box=e,this._destroyed=new J,this._resizeSubject=new J,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(i=>this._resizeSubject.next(i)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new yt(i=>{let n=this._resizeSubject.subscribe(i);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),n.unsubscribe(),this._elementObservables.delete(e)}}).pipe(He(i=>i.some(n=>n.target===e)),Xs({bufferSize:1,refCount:!0}),ze(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},zT=(()=>{let e=class e{constructor(){this._observers=new Map,this._ngZone=M(W),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,n]of this._observers)n.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(n,r){let o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new bb(o)),this._observers.get(o).observe(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var YL=["notch"],QL=["matFormFieldNotchedOutline",""],XL=["*"],ZL=["textField"],JL=["iconPrefixContainer"],e2=["textPrefixContainer"],t2=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],i2=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function n2(t,e){t&1&&q(0,"span",17)}function r2(t,e){if(t&1&&(p(0,"label",16),ke(1,1),me(2,n2,1,0,"span",17),g()),t&2){let i=P(2);z("floating",i._shouldLabelFloat())("monitorResize",i._hasOutline())("id",i._labelId),ue("for",i._control.id),v(2),xe(2,!i.hideRequiredMarker&&i._control.required?2:-1)}}function o2(t,e){if(t&1&&me(0,r2,3,5,"label",16),t&2){let i=P();xe(0,i._hasFloatingLabel()?0:-1)}}function s2(t,e){t&1&&q(0,"div",5)}function a2(t,e){}function l2(t,e){if(t&1&&me(0,a2,0,0,"ng-template",11),t&2){P(2);let i=Mn(1);z("ngTemplateOutlet",i)}}function c2(t,e){if(t&1&&(p(0,"div",7),me(1,l2,1,1,null,11),g()),t&2){let i=P();z("matFormFieldNotchedOutlineOpen",i._shouldLabelFloat()),v(),xe(1,i._forceDisplayInfixLabel()?-1:1)}}function d2(t,e){t&1&&(p(0,"div",8,2),ke(2,2),g())}function u2(t,e){t&1&&(p(0,"div",9,3),ke(2,3),g())}function h2(t,e){}function m2(t,e){if(t&1&&me(0,h2,0,0,"ng-template",11),t&2){P();let i=Mn(1);z("ngTemplateOutlet",i)}}function f2(t,e){t&1&&(p(0,"div",12),ke(1,4),g())}function p2(t,e){t&1&&(p(0,"div",13),ke(1,5),g())}function g2(t,e){t&1&&q(0,"div",14)}function _2(t,e){if(t&1&&(p(0,"div",18),ke(1,6),g()),t&2){let i=P();z("@transitionMessages",i._subscriptAnimationState)}}function b2(t,e){if(t&1&&(p(0,"mat-hint",20),S(1),g()),t&2){let i=P(2);z("id",i._hintLabelId),v(),Ve(i.hintLabel)}}function v2(t,e){if(t&1&&(p(0,"div",19),me(1,b2,2,2,"mat-hint",20),ke(2,7),q(3,"div",21),ke(4,8),g()),t&2){let i=P();z("@transitionMessages",i._subscriptAnimationState),v(),xe(1,i.hintLabel?1:-1)}}var UT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["mat-label"]],standalone:!0});let t=e;return t})();var y2=new R("MatError");var w2=0,HT=(()=>{let e=class e{constructor(){this.align="start",this.id=`mat-mdc-hint-${w2++}`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,o){r&2&&(Vo("id",o.id),ue("align",null),oe("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0});let t=e;return t})(),x2=new R("MatPrefix");var C2=new R("MatSuffix");var XT=new R("FloatingLabelParent"),qT=(()=>{let e=class e{get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(n){this._elementRef=n,this._floating=!1,this._monitorResize=!1,this._resizeObserver=M(zT),this._ngZone=M(W),this._parent=M(XT),this._resizeSubscription=new nt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return E2(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}};e.\u0275fac=function(r){return new(r||e)(f(ee))},e.\u0275dir=Y({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,o){r&2&&oe("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0});let t=e;return t})();function E2(t){let e=t;if(e.offsetParent!==null)return e.scrollWidth;let i=e.cloneNode(!0);i.style.setProperty("position","absolute"),i.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(i);let n=i.scrollWidth;return i.remove(),n}var $T="mdc-line-ripple--active",rm="mdc-line-ripple--deactivating",WT=(()=>{let e=class e{constructor(n,r){this._elementRef=n,this._handleTransitionEnd=o=>{let s=this._elementRef.nativeElement.classList,a=s.contains(rm);o.propertyName==="opacity"&&a&&s.remove($T,rm)},r.runOutsideAngular(()=>{n.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let n=this._elementRef.nativeElement.classList;n.remove(rm),n.add($T)}deactivate(){this._elementRef.nativeElement.classList.add(rm)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(W))},e.\u0275dir=Y({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0});let t=e;return t})(),GT=(()=>{let e=class e{constructor(n,r){this._elementRef=n,this._ngZone=r,this.open=!1}ngAfterViewInit(){let n=this._elementRef.nativeElement.querySelector(".mdc-floating-label");n?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(n.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>n.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){!this.open||!n?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(W))},e.\u0275cmp=X({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,o){if(r&1&&Te(YL,5),r&2){let s;te(s=ie())&&(o._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,o){r&2&&oe("mdc-notched-outline--notched",o.open)},inputs:{open:[N.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Z],attrs:QL,ngContentSelectors:XL,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(r,o){r&1&&(rt(),q(0,"div",1),p(1,"div",2,0),ke(3),g(),q(4,"div",3))},encapsulation:2,changeDetection:0});let t=e;return t})(),I2={transitionMessages:$i("transitionMessages",[Lt("enter",Ze({opacity:1,transform:"translateY(0%)"})),Zt("void => enter",[Ze({opacity:0,transform:"translateY(-5px)"}),Xt("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},vb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e});let t=e;return t})();var yb=new R("MatFormField"),T2=new R("MAT_FORM_FIELD_DEFAULT_OPTIONS"),KT=0,YT="fill",S2="auto",QT="fixed",D2="translateY(-50%)",ZT=(()=>{let e=class e{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=tb(n)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||S2}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(n){let r=this._appearance,o=n||this._defaults?.appearance||YT;this._appearance=o,this._appearance==="outline"&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||QT}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||QT}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}constructor(n,r,o,s,a,l,c,d){this._elementRef=n,this._changeDetectorRef=r,this._ngZone=o,this._dir=s,this._platform=a,this._defaults=l,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance=YT,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${KT++}`,this._hintLabelId=`mat-mdc-hint-${KT++}`,this._subscriptAnimationState="",this._destroyed=new J,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,l&&(l.appearance&&(this.appearance=l.appearance),this._hideRequiredMarker=!!l?.hideRequiredMarker,l.color&&(this.color=l.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${n.controlType}`),n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe(ze(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Vt(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ze(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(ze(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(n){let r=this._control?this._control.ngControl:null;return r&&r[n]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&n.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let r=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,o=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;r?n.push(r.id):this._hintLabel&&n.push(this._hintLabelId),o&&n.push(o.id)}else this._errorChildren&&n.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(n)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let n=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){n.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,a=o?.getBoundingClientRect().width??0,l=this._dir.value==="rtl"?"-1":"1",c=`${s+a}px`,u=`calc(${l} * (${c} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;n.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${D2} translateX(${u})
    )`}_isAttachedToDom(){let n=this._elementRef.nativeElement;if(n.getRootNode){let r=n.getRootNode();return r&&r!==n}return document.documentElement.contains(n)}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Le),f(W),f(Ht),f(Ae),f(T2,8),f(oi,8),f(he))},e.\u0275cmp=X({type:e,selectors:[["mat-form-field"]],contentQueries:function(r,o,s){if(r&1&&(Xe(s,UT,5),Xe(s,UT,7),Xe(s,vb,5),Xe(s,x2,5),Xe(s,C2,5),Xe(s,y2,5),Xe(s,HT,5)),r&2){let a;te(a=ie())&&(o._labelChildNonStatic=a.first),te(a=ie())&&(o._labelChildStatic=a.first),te(a=ie())&&(o._formFieldControl=a.first),te(a=ie())&&(o._prefixChildren=a),te(a=ie())&&(o._suffixChildren=a),te(a=ie())&&(o._errorChildren=a),te(a=ie())&&(o._hintChildren=a)}},viewQuery:function(r,o){if(r&1&&(Te(ZL,5),Te(JL,5),Te(e2,5),Te(qT,5),Te(GT,5),Te(WT,5)),r&2){let s;te(s=ie())&&(o._textField=s.first),te(s=ie())&&(o._iconPrefixContainer=s.first),te(s=ie())&&(o._textPrefixContainer=s.first),te(s=ie())&&(o._floatingLabel=s.first),te(s=ie())&&(o._notchedOutline=s.first),te(s=ie())&&(o._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,o){r&2&&oe("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations",o._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[et([{provide:yb,useExisting:e},{provide:XT,useExisting:e}]),Z],ngContentSelectors:i2,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,o){if(r&1){let s=Je();rt(t2),me(0,o2,1,1,"ng-template",null,0,mh),p(2,"div",4,1),G("click",function(l){return ae(s),le(o._control.onContainerClick(l))}),me(4,s2,1,0,"div",5),p(5,"div",6),me(6,c2,2,2,"div",7)(7,d2,3,0,"div",8)(8,u2,3,0,"div",9),p(9,"div",10),me(10,m2,1,1,null,11),ke(11),g(),me(12,f2,2,0,"div",12)(13,p2,2,0,"div",13),g(),me(14,g2,1,0,"div",14),g(),p(15,"div",15),me(16,_2,2,1)(17,v2,5,2),g()}if(r&2){let s;v(2),oe("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),v(2),xe(4,!o._hasOutline()&&!o._control.disabled?4:-1),v(2),xe(6,o._hasOutline()?6:-1),v(),xe(7,o._hasIconPrefix?7:-1),v(),xe(8,o._hasTextPrefix?8:-1),v(2),xe(10,!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),v(2),xe(12,o._hasTextSuffix?12:-1),v(),xe(13,o._hasIconSuffix?13:-1),v(),xe(14,o._hasOutline()?-1:14),v(),oe("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic"),v(),xe(16,(s=o._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[qT,GT,tc,WT,HT],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[I2.transitionMessages]},changeDetection:0});let t=e;return t})(),Ur=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,ki,Qh,pe]});let t=e;return t})();var JT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({});let t=e;return t})();var cS=(()=>{let e=class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};e.\u0275fac=function(r){return new(r||e)(f(Fo),f(ee))},e.\u0275dir=Y({type:e});let t=e;return t})(),hm=(()=>{let e=class e extends cS{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275dir=Y({type:e,features:[Ne]});let t=e;return t})(),Ia=new R("");var A2={provide:Ia,useExisting:ni(()=>Ln),multi:!0};function k2(){let t=sa()?sa().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var R2=new R(""),Ln=(()=>{let e=class e extends cS{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!k2())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};e.\u0275fac=function(r){return new(r||e)(f(Fo),f(ee),f(R2,8))},e.\u0275dir=Y({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&G("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[et([A2]),Ne]});let t=e;return t})();function Hr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function dS(t){return t!=null&&typeof t.length=="number"}var Ib=new R(""),Tb=new R(""),M2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Zi=class{static min(e){return P2(e)}static max(e){return O2(e)}static required(e){return F2(e)}static requiredTrue(e){return N2(e)}static email(e){return V2(e)}static minLength(e){return L2(e)}static maxLength(e){return j2(e)}static pattern(e){return B2(e)}static nullValidator(e){return uS(e)}static compose(e){return _S(e)}static composeAsync(e){return vS(e)}};function P2(t){return e=>{if(Hr(e.value)||Hr(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}}function O2(t){return e=>{if(Hr(e.value)||Hr(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}}function F2(t){return Hr(t.value)?{required:!0}:null}function N2(t){return t.value===!0?null:{required:!0}}function V2(t){return Hr(t.value)||M2.test(t.value)?null:{email:!0}}function L2(t){return e=>Hr(e.value)||!dS(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function j2(t){return e=>dS(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function B2(t){if(!t)return uS;let e,i;return typeof t=="string"?(i="",t.charAt(0)!=="^"&&(i+="^"),i+=t,t.charAt(t.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=t.toString(),e=t),n=>{if(Hr(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function uS(t){return null}function hS(t){return t!=null}function mS(t){return gh(t)?pt(t):t}function fS(t){let e={};return t.forEach(i=>{e=i!=null?D(D({},e),i):e}),Object.keys(e).length===0?null:e}function pS(t,e){return e.map(i=>i(t))}function z2(t){return!t.validate}function gS(t){return t.map(e=>z2(e)?e:i=>e.validate(i))}function _S(t){if(!t)return null;let e=t.filter(hS);return e.length==0?null:function(i){return fS(pS(i,e))}}function bS(t){return t!=null?_S(gS(t)):null}function vS(t){if(!t)return null;let e=t.filter(hS);return e.length==0?null:function(i){let n=pS(i,e).map(mS);return oh(n).pipe(B(fS))}}function yS(t){return t!=null?vS(gS(t)):null}function eS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function wS(t){return t._rawValidators}function xS(t){return t._rawAsyncValidators}function wb(t){return t?Array.isArray(t)?t:[t]:[]}function sm(t,e){return Array.isArray(t)?t.includes(e):t===e}function tS(t,e){let i=wb(e);return wb(t).forEach(r=>{sm(i,r)||i.push(r)}),i}function iS(t,e){return wb(e).filter(i=>!sm(t,i))}var am=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},Qo=class extends am{get formDirective(){return null}get path(){return null}},Xo=class extends am{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},lm=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},U2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},f6=Ue(D({},U2),{"[class.ng-submitted]":"isSubmitted"}),jn=(()=>{let e=class e extends lm{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(f(Xo,2))},e.\u0275dir=Y({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&oe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Ne]});let t=e;return t})(),mm=(()=>{let e=class e extends lm{constructor(n){super(n)}};e.\u0275fac=function(r){return new(r||e)(f(Qo,10))},e.\u0275dir=Y({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&oe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Ne]});let t=e;return t})();var Gc="VALID",om="INVALID",Ca="PENDING",Kc="DISABLED";function Sb(t){return(fm(t)?t.validators:t)||null}function H2(t){return Array.isArray(t)?bS(t):t||null}function Db(t,e){return(fm(e)?e.asyncValidators:t)||null}function q2(t){return Array.isArray(t)?yS(t):t||null}function fm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function CS(t,e,i){let n=t.controls;if(!(e?Object.keys(n):n).length)throw new Ye(1e3,"");if(!n[i])throw new Ye(1001,"")}function ES(t,e,i){t._forEachChild((n,r)=>{if(i[r]===void 0)throw new Ye(1002,"")})}var Ea=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gc}get invalid(){return this.status===om}get pending(){return this.status==Ca}get disabled(){return this.status===Kc}get enabled(){return this.status!==Kc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iS(e,this._rawAsyncValidators))}hasValidator(e){return sm(this._rawValidators,e)}hasAsyncValidator(e){return sm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ca,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Kc,this.errors=null,this._forEachChild(n=>{n.disable(Ue(D({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ue(D({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Gc,this._forEachChild(n=>{n.enable(Ue(D({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ue(D({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gc||this.status===Ca)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kc:Gc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ca,this._hasOwnPendingAsyncValidator=!0;let i=mS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(e,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Q,this.statusChanges=new Q}_calculateStatus(){return this._allControlsDisabled()?Kc:this.errors?om:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ca)?Ca:this._anyControlsHaveStatus(om)?om:Gc}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=H2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=q2(this._rawAsyncValidators)}},cm=class extends Ea{constructor(e,i,n){super(Sb(i),Db(n,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,n={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){ES(this,!0,e),Object.keys(e).forEach(n=>{CS(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,n)=>(e[n]=i.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,n)=>n._syncPendingControls()?!0:i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(i=>{let n=this.controls[i];n&&e(n,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[i,n]of Object.entries(this.controls))if(this.contains(i)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(i,n,r)=>((n.enabled||this.disabled)&&(i[r]=n.value),i))}_reduceChildren(e,i){let n=e;return this._forEachChild((r,o)=>{n=i(n,r,o)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xb=class extends cm{};var pm=new R("CallSetDisabledState",{providedIn:"root",factory:()=>gm}),gm="always";function IS(t,e){return[...e.path,t]}function Cb(t,e,i=gm){Ab(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),W2(t,e),K2(t,e),G2(t,e),$2(t,e)}function nS(t,e,i=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),um(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function dm(t,e){t.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function $2(t,e){if(e.valueAccessor.setDisabledState){let i=n=>{e.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(i),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(i)})}}function Ab(t,e){let i=wS(t);e.validator!==null?t.setValidators(eS(i,e.validator)):typeof i=="function"&&t.setValidators([i]);let n=xS(t);e.asyncValidator!==null?t.setAsyncValidators(eS(n,e.asyncValidator)):typeof n=="function"&&t.setAsyncValidators([n]);let r=()=>t.updateValueAndValidity();dm(e._rawValidators,r),dm(e._rawAsyncValidators,r)}function um(t,e){let i=!1;if(t!==null){if(e.validator!==null){let r=wS(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(i=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=xS(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(i=!0,t.setAsyncValidators(o))}}}let n=()=>{};return dm(e._rawValidators,n),dm(e._rawAsyncValidators,n),i}function W2(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&TS(t,e)})}function G2(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&TS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function TS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function K2(t,e){let i=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};t.registerOnChange(i),e._registerOnDestroy(()=>{t._unregisterOnChange(i)})}function Y2(t,e){t==null,Ab(t,e)}function Q2(t,e){return um(t,e)}function SS(t,e){if(!t.hasOwnProperty("model"))return!1;let i=t.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function X2(t){return Object.getPrototypeOf(t.constructor)===hm}function Z2(t,e){t._syncPendingControls(),e.forEach(i=>{let n=i.control;n.updateOn==="submit"&&n._pendingChange&&(i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function DS(t,e){if(!e)return null;Array.isArray(e);let i,n,r;return e.forEach(o=>{o.constructor===Ln?i=o:X2(o)?n=o:r=o}),r||n||i||null}function J2(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function rS(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function oS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Yc=class extends Ea{constructor(e=null,i,n){super(Sb(i),Db(n,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fm(i)&&(i.nonNullable||i.initialValueIsDefault)&&(oS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){oS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ej=t=>t instanceof Yc;var tj={provide:Xo,useExisting:ni(()=>Zo)},sS=Promise.resolve(),Zo=(()=>{let e=class e extends Xo{constructor(n,r,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Yc,this._registered=!1,this.name="",this.update=new Q,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=DS(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),SS(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Cb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){sS.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&ye(r);sS.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?IS(n,this._parent):[n]}};e.\u0275fac=function(r){return new(r||e)(f(Qo,9),f(Ib,10),f(Tb,10),f(Ia,10),f(Le,8),f(pm,8))},e.\u0275dir=Y({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[N.None,"disabled","isDisabled"],model:[N.None,"ngModel","model"],options:[N.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[et([tj]),Ne,gt]});let t=e;return t})(),_m=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),ij={provide:Ia,useExisting:ni(()=>Qc),multi:!0},Qc=(()=>{let e=class e extends hm{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275dir=Y({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&G("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[et([ij]),Ne]});let t=e;return t})();var AS=new R("");var nj={provide:Qo,useExisting:ni(()=>Xc)},Xc=(()=>{let e=class e extends Qo{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Q,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(um(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Cb(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){nS(n.control||null,n,!1),J2(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,Z2(this.form,this.directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,o=this.form.get(n.path);r!==o&&(nS(r||null,n),ej(o)&&(Cb(o,n,this.callSetDisabledState),n.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);Y2(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&Q2(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ab(this.form,this),this._oldForm&&um(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(f(Ib,10),f(Tb,10),f(pm,8))},e.\u0275dir=Y({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&G("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[N.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[et([nj]),Ne,gt]});let t=e;return t})();var rj={provide:Xo,useExisting:ni(()=>Zc)},Zc=(()=>{let e=class e extends Xo{set isDisabled(n){}constructor(n,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Q,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=DS(this,s)}ngOnChanges(n){this._added||this._setUpControl(),SS(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return IS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(f(Qo,13),f(Ib,10),f(Tb,10),f(Ia,10),f(AS,8))},e.\u0275dir=Y({type:e,selectors:[["","formControlName",""]],inputs:{name:[N.None,"formControlName","name"],isDisabled:[N.None,"disabled","isDisabled"],model:[N.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[et([rj]),Ne,gt]});let t=e;return t})(),oj={provide:Ia,useExisting:ni(()=>Ta),multi:!0};function kS(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function sj(t){return t.split(":")[0]}var Ta=(()=>{let e=class e extends hm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),o=kS(r,n);this.setProperty("value",o)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=sj(n);return this._optionMap.has(r)?this._optionMap.get(r):n}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275dir=Y({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&G("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[et([oj]),Ne]});let t=e;return t})(),bm=(()=>{let e=class e{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(kS(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Fo),f(Ta,9))},e.\u0275dir=Y({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),aj={provide:Ia,useExisting:ni(()=>RS),multi:!0};function aS(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function lj(t){return t.split(":")[0]}var RS=(()=>{let e=class e extends hm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let o=n.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let c=a[l],d=this._getOptionValue(c.value);o.push(d)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let d=this._getOptionValue(c.value);o.push(d)}}}this.value=o,n(o)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=lj(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275dir=Y({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&G("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[et([aj]),Ne]});let t=e;return t})(),vm=(()=>{let e=class e{constructor(n,r,o){this._element=n,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(aS(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(aS(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Fo),f(RS,9))},e.\u0275dir=Y({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var MS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({});let t=e;return t})(),Eb=class extends Ea{constructor(e,i,n){super(Sb(i),Db(n,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,i={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(e,i,n={}){this.controls.splice(e,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,i={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(e,i,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),i&&(this.controls.splice(r,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,i={}){ES(this,!1,e),e.forEach((n,r)=>{CS(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e=[],i={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((i,n)=>n._syncPendingControls()?!0:i,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((i,n)=>{e(i,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(i=>i.enabled&&e(i))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function lS(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Sa=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,r=null){let o=this._reduceControls(n),s={};return lS(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new cm(o,s)}record(n,r=null){let o=this._reduceControls(n);return new xb(o,r)}control(n,r,o){let s={};return this.useNonNullable?(lS(r)?s=r:(s.validators=r,s.asyncValidators=o),new Yc(n,Ue(D({},s),{nonNullable:!0}))):new Yc(n,r,o)}array(n,r,o){let s=n.map(a=>this._createControl(a));return new Eb(s,r,o)}_reduceControls(n){let r={};return Object.keys(n).forEach(o=>{r[o]=this._createControl(n[o])}),r}_createControl(n){if(n instanceof Yc)return n;if(n instanceof Ea)return n;if(Array.isArray(n)){let r=n[0],o=n.length>1?n[1]:null,s=n.length>2?n[2]:null;return this.control(r,o,s)}else return this.control(n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bn=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:pm,useValue:n.callSetDisabledState??gm}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[MS]});let t=e;return t})(),qr=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:AS,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:pm,useValue:n.callSetDisabledState??gm}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[MS]});let t=e;return t})();var kb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,Ur,Ur,JT,pe]});let t=e;return t})();var cj=["mat-button",""],dj=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],uj=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var hj=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var mj=["mat-icon-button",""],fj=["*"];var pj=new R("MAT_BUTTON_CONFIG");var gj=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],OS=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(n){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,n)}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}constructor(n,r,o,s){this._elementRef=n,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=M(zc),this._rippleLoader=M(PT),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=M(pj,{optional:!0}),l=n.nativeElement,c=l.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:u}of gj)l.hasAttribute(d)&&c.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",r){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Oo()},e.\u0275dir=Y({type:e,inputs:{color:"color",disableRipple:[N.HasDecoratorInputTransform,"disableRipple","disableRipple",ye],disabled:[N.HasDecoratorInputTransform,"disabled","disabled",ye],ariaDisabled:[N.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",ye],disabledInteractive:[N.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",ye]},features:[Qe]});let t=e;return t})();var ed=(()=>{let e=class e extends OS{constructor(n,r,o,s){super(n,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Ae),f(W),f(oi,8))},e.\u0275cmp=X({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(ue("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Ai(o.color?"mat-"+o.color:""),oe("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ne,Z],attrs:cj,ngContentSelectors:uj,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(rt(dj),q(0,"span",0),ke(1),p(2,"span",1),ke(3,1),g(),ke(4,2),q(5,"span",2)(6,"span",3)),r&2&&oe("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var Rb=(()=>{let e=class e extends OS{constructor(n,r,o,s){super(n,r,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Ae),f(W),f(oi,8))},e.\u0275cmp=X({type:e,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(ue("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Ai(o.color?"mat-"+o.color:""),oe("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ne,Z],attrs:mj,ngContentSelectors:fj,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(rt(),q(0,"span",0),ke(1),q(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',hj],encapsulation:2,changeDetection:0});let t=e;return t})();var Jo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,qc,pe]});let t=e;return t})();var _j=20,Mb=(()=>{let e=class e{constructor(n,r,o){this._ngZone=n,this._platform=r,this._scrolled=new J,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=_j){return this._platform.isBrowser?new yt(r=>{this._globalSubscription||this._addGlobalListener();let o=n>0?this._scrolled.pipe(Mg(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):F()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let o=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(He(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,n)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,r){let o=gn(r),s=n.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let n=this._getWindow();return An(n.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(_(W),_(Ae),_(he,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pb=(()=>{let e=class e{constructor(n,r,o,s){this.elementRef=n,this.scrollDispatcher=r,this.ngZone=o,this.dir=s,this._destroyed=new J,this._elementScrolled=new yt(a=>this.ngZone.runOutsideAngular(()=>An(this.elementRef.nativeElement,"scroll").pipe(ze(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(n){let r=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";n.left==null&&(n.left=o?n.end:n.start),n.right==null&&(n.right=o?n.start:n.end),n.bottom!=null&&(n.top=r.scrollHeight-r.clientHeight-n.bottom),o&&_a()!=fn.NORMAL?(n.left!=null&&(n.right=r.scrollWidth-r.clientWidth-n.left),_a()==fn.INVERTED?n.left=n.right:_a()==fn.NEGATED&&(n.left=n.right?-n.right:n.right)):n.right!=null&&(n.left=r.scrollWidth-r.clientWidth-n.right),this._applyScrollToOptions(n)}_applyScrollToOptions(n){let r=this.elementRef.nativeElement;Kh()?r.scrollTo(n):(n.top!=null&&(r.scrollTop=n.top),n.left!=null&&(r.scrollLeft=n.left))}measureScrollOffset(n){let r="left",o="right",s=this.elementRef.nativeElement;if(n=="top")return s.scrollTop;if(n=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let a=this.dir&&this.dir.value=="rtl";return n=="start"?n=a?o:r:n=="end"&&(n=a?r:o),a&&_a()==fn.INVERTED?n==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:a&&_a()==fn.NEGATED?n==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:n==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Mb),f(W),f(Ht,8))},e.\u0275dir=Y({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let t=e;return t})(),bj=20,Da=(()=>{let e=class e{constructor(n,r,o){this._platform=n,this._change=new J,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(n.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),o=n.documentElement,s=o.getBoundingClientRect(),a=-s.top||n.body.scrollTop||r.scrollY||o.scrollTop||0,l=-s.left||n.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:l}}change(n=bj){return n>0?this._change.pipe(Mg(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(_(Ae),_(W),_(he,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({});let t=e;return t})(),Ob=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[Vn,fr,Vn,fr]});let t=e;return t})();var Fb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,fr,fr,pe]});let t=e;return t})();var td=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},$r=class extends td{constructor(e,i,n,r,o){super(),this.component=e,this.viewContainerRef=i,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=o}},Ji=class extends td{constructor(e,i,n,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Nb=class extends td{constructor(e){super(),this.element=e instanceof ee?e.nativeElement:e}},Aa=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof $r)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Ji)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Nb)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var ym=class extends Aa{constructor(e,i,n,r,o){super(),this.outletElement=e,this._componentFactoryResolver=i,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){let n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||ri.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let i=e.viewContainerRef,n=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(n);r!==-1&&i.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var NS=(()=>{let e=class e extends Ji{constructor(n,r){super(n,r)}};e.\u0275fac=function(r){return new(r||e)(f(Dt),f(yi))},e.\u0275dir=Y({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[Ne]});let t=e;return t})();var en=(()=>{let e=class e extends Aa{constructor(n,r,o){super(),this._componentFactoryResolver=n,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Q,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let l=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(l,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,s=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),a=r.createComponent(s,r.length,n.injector||r.injector,n.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=n,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}};e.\u0275fac=function(r){return new(r||e)(f(ia),f(yi),f(he))},e.\u0275dir=Y({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[N.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ne]});let t=e;return t})();var Wr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({});let t=e;return t})();var VS=Kh(),Vb=class{constructor(e,i){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=xt(-this._previousScrollPosition.left),e.style.top=xt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,n=e.style,r=i.style,o=n.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),VS&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),VS&&(n.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,n=this._viewportRuler.getViewportSize();return i.scrollHeight>n.height||i.scrollWidth>n.width}};var Lb=class{constructor(e,i,n,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(He(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},wm=class{enable(){}disable(){}attach(){}};function jb(t,e){return e.some(i=>{let n=t.bottom<i.top,r=t.top>i.bottom,o=t.right<i.left,s=t.left>i.right;return n||r||o||s})}function LS(t,e){return e.some(i=>{let n=t.top<i.top,r=t.bottom>i.bottom,o=t.left<i.left,s=t.right>i.right;return n||r||o||s})}var Bb=class{constructor(e,i,n,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();jb(i,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},vj=(()=>{let e=class e{constructor(n,r,o,s){this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new wm,this.close=a=>new Lb(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new Vb(this._viewportRuler,this._document),this.reposition=a=>new Bb(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};e.\u0275fac=function(r){return new(r||e)(_(Mb),_(Da),_(W),_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ka=class{constructor(e){if(this.scrollStrategy=new wm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let i=Object.keys(e);for(let n of i)e[n]!==void 0&&(this[n]=e[n])}}};var zb=class{constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var HS=(()=>{let e=class e{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(_(he))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yj=(()=>{let e=class e extends HS{constructor(n,r){super(n),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let l=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(o)):l.next(o);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(_(he),_(W,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wj=(()=>{let e=class e extends HS{constructor(n,r,o){super(n),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=pn(s)},this._clickListener=s=>{let a=pn(s),l=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){let u=c[d];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(a)||u.overlayElement.contains(l))break;let h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(n){if(super.add(n),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(_(he),_(Ae),_(W,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qS=(()=>{let e=class e{constructor(n,r){this._platform=r,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||Mc()){let o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(n),Mc()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(_(he),_(Ae))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ub=class{constructor(e,i,n,r,o,s,a,l,c,d=!1){this._portalOutlet=e,this._host=i,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new J,this._attachments=new J,this._detachments=new J,this._locationChanges=nt.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new J,this._outsidePointerEvents=new J,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(at(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=D(D({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Ue(D({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=xt(this._config.width),e.height=xt(this._config.height),e.minWidth=xt(this._config.minWidth),e.minHeight=xt(this._config.minHeight),e.maxWidth=xt(this._config.maxWidth),e.maxHeight=xt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,n){let r=ba(i||[]).filter(o=>!!o);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(ze(Vt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},jS="cdk-overlay-connected-position-bounding-box",xj=/([A-Za-z%]+)$/,xm=class{get positions(){return this._preferredPositions}constructor(e,i,n,r,o){this._viewportRuler=i,this._document=n,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new J,this._resizeSubscription=nt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(jS),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,i,a),d=this._getOverlayFit(c,i,n,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(d,c,n)){o.push({position:a,origin:l,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:i})}if(o.length){let a=null,l=-1;for(let c of o){let d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&es(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(jS),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,n){let r;if(n.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=n.originX=="start"?s:a}i.left<0&&(r-=i.left);let o;return n.originY=="center"?o=e.top+e.height/2:o=n.originY=="top"?e.top:e.bottom,i.top<0&&(o-=i.top),{x:r,y:o}}_getOverlayPoint(e,i,n){let r;n.overlayX=="center"?r=-i.width/2:n.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let o;return n.overlayY=="center"?o=-i.height/2:o=n.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,i,n,r){let o=zS(i),{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let d=0-s,u=s+o.width-n.width,h=0-a,m=a+o.height-n.height,b=this._subtractOverflows(o.width,d,u),y=this._subtractOverflows(o.height,h,m),E=b*y;return{visibleArea:E,isCompletelyWithinViewport:o.width*o.height===E,fitsInViewportVertically:y===o.height,fitsInViewportHorizontally:b==o.width}}_canFitWithFlexibleDimensions(e,i,n){if(this._hasFlexibleDimensions){let r=n.bottom-i.y,o=n.right-i.x,s=BS(this._overlayRef.getConfig().minHeight),a=BS(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=r,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,i,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=zS(i),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-n.top-e.y,0),c=Math.max(o.left-n.left-e.x,0),d=0,u=0;return r.width<=o.width?d=c||-s:d=e.x<this._viewportMargin?o.left-n.left-e.x:0,r.height<=o.height?u=l||-a:u=e.y<this._viewportMargin?o.top-n.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Cj(this._lastScrollVisibility,n)){let r=new zb(e,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=e.overlayY;e.overlayX==="center"?n="center":this._isRtl()?n=e.overlayX==="start"?"right":"left":n=e.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,i){let n=this._viewportRect,r=this._isRtl(),o,s,a;if(i.overlayY==="top")s=e.y,o=n.height-s+this._viewportMargin;else if(i.overlayY==="bottom")a=n.height-e.y+this._viewportMargin*2,o=n.height-a+this._viewportMargin;else{let m=Math.min(n.bottom-e.y+n.top,e.y),b=this._lastBoundingBoxSize.height;o=m*2,s=e.y-m,o>b&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-b/2)}let l=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,c=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,d,u,h;if(c)h=n.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(l)u=e.x,d=n.right-e.x;else{let m=Math.min(n.right-e.x+n.left,e.x),b=this._lastBoundingBoxSize.width;d=m*2,u=e.x-m,d>b&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-b/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(e,i){let n=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=xt(n.height),r.top=xt(n.top),r.bottom=xt(n.bottom),r.width=xt(n.width),r.left=xt(n.left),r.right=xt(n.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=xt(o)),s&&(r.maxWidth=xt(s))}this._lastBoundingBoxSize=n,es(this._boundingBox.style,r)}_resetBoundingBoxStyles(){es(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){es(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();es(n,this._getExactOverlayY(i,e,d)),es(n,this._getExactOverlayX(i,e,d))}else n.position="static";let a="",l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),s.maxHeight&&(r?n.maxHeight=xt(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=xt(s.maxWidth):o&&(n.maxWidth="")),es(this._pane.style,n)}_getExactOverlayY(e,i,n){let r={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=xt(o.y);return r}_getExactOverlayX(e,i,n){let r={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=xt(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:LS(e,n),isOriginOutsideView:jb(e,n),isOverlayClipped:LS(i,n),isOverlayOutsideView:jb(i,n)}}_subtractOverflows(e,...i){return i.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ba(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ee)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+i,height:n,width:i}}};function es(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function BS(t){if(typeof t!="number"&&t!=null){let[e,i]=t.split(xj);return!i||i==="px"?parseFloat(e):null}return t||null}function zS(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function Cj(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var US="cdk-global-overlay-wrapper",Hb=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(US),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=n,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",m="",b="",y="";l?y="flex-start":d==="center"?(y="center",h?b=u:m=u):h?d==="left"||d==="end"?(y="flex-end",m=u):(d==="right"||d==="start")&&(y="flex-start",b=u):d==="left"||d==="start"?(y="flex-start",m=u):(d==="right"||d==="end")&&(y="flex-end",b=u),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":b,i.justifyContent=y,i.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,n=i.style;i.classList.remove(US),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},Ej=(()=>{let e=class e{constructor(n,r,o,s){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new Hb}flexibleConnectedTo(n){return new xm(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(_(Da),_(he),_(Ae),_(qS))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ij=0,_n=(()=>{let e=class e{constructor(n,r,o,s,a,l,c,d,u,h,m,b){this.scrollStrategies=n,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=l,this._ngZone=c,this._document=d,this._directionality=u,this._location=h,this._outsideClickDispatcher=m,this._animationsModuleType=b}create(n){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new ka(n);return a.direction=a.direction||this._directionality.value,new Ub(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(n){let r=this._document.createElement("div");return r.id=`cdk-overlay-${Ij++}`,r.classList.add("cdk-overlay-pane"),n.appendChild(r),r}_createHostElement(){let n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(ur)),new ym(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(_(vj),_(qS),_(ia),_(Ej),_(yj),_(ri),_(W),_(he),_(Ht),_(aa),_(wj),_(oi,8))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Tj=new R("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=M(_n);return()=>t.scrollStrategies.reposition()}});function Sj(t){return()=>t.scrollStrategies.reposition()}var Dj={provide:Tj,deps:[_n],useFactory:Sj},Ra=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({providers:[_n,Dj],imports:[Vn,Wr,Ob,Ob]});let t=e;return t})();function kj(t,e){if(t&1){let i=Je();p(0,"div",1)(1,"button",2),G("click",function(){ae(i);let r=P();return le(r.action())}),S(2),g()()}if(t&2){let i=P();v(2),wi(" ",i.data.action," ")}}var Rj=["label"];function Mj(t,e){}var Pj=Math.pow(2,31)-1,id=class{constructor(e,i){this._overlayRef=i,this._afterDismissed=new J,this._afterOpened=new J,this._onAction=new J,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,Pj))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},$S=new R("MatSnackBarData"),Ma=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},Oj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),Fj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),Nj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),WS=(()=>{let e=class e{constructor(n,r){this.snackBarRef=n,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(f(id),f($S))},e.\u0275cmp=X({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Z],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(p(0,"div",0),S(1),g(),me(2,kj,3,1,"div",1)),r&2&&(v(),wi(" ",o.data.message,`
`),v(),xe(2,o.hasAction?2:-1))},dependencies:[ed,Oj,Fj,Nj],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),Vj={snackBarState:$i("state",[Lt("void, hidden",Ze({transform:"scale(0.8)",opacity:0})),Lt("visible",Ze({transform:"scale(1)",opacity:1})),Zt("* => visible",Xt("150ms cubic-bezier(0, 0, 0.2, 1)")),Zt("* => void, * => hidden",Xt("75ms cubic-bezier(0.4, 0.0, 1, 1)",Ze({opacity:0})))])},Lj=0,jj=(()=>{let e=class e extends Aa{constructor(n,r,o,s,a){super(),this._ngZone=n,this._elementRef=r,this._changeDetectorRef=o,this._platform=s,this.snackBarConfig=a,this._document=M(he),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new J,this._onExit=new J,this._onEnter=new J,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${Lj++}`,this.attachDomPortal=l=>{this._assertNotAttached();let c=this._portalOutlet.attachDomPortal(l);return this._afterPortalAttached(),c},a.politeness==="assertive"&&!a.announcementMessage?this._live="assertive":a.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(n){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(n);return this._afterPortalAttached(),r}attachTemplatePortal(n){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(n);return this._afterPortalAttached(),r}onAnimationEnd(n){let{fromState:r,toState:o}=n;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let n=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(a=>n.classList.add(a)):n.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,s="mdc-snackbar__label";o.classList.toggle(s,!o.querySelector(`.${s}`))}_exposeToModals(){let n=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],a=s.getAttribute("aria-owns");this._trackedModals.add(s),a?a.indexOf(n)===-1&&s.setAttribute("aria-owns",a+" "+n):s.setAttribute("aria-owns",n)}}_clearFromModals(){this._trackedModals.forEach(n=>{let r=n.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?n.setAttribute("aria-owns",o):n.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let n=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(n&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),r.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(f(W),f(ee),f(Le),f(Ae),f(Ma))},e.\u0275cmp=X({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(Te(en,7),Te(Rj,7)),r&2){let s;te(s=ie())&&(o._portalOutlet=s.first),te(s=ie())&&(o._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&Jl("@state.done",function(a){return o.onAnimationEnd(a)}),r&2&&Zl("@state",o._animationState)},standalone:!0,features:[Ne,Z],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(p(0,"div",1)(1,"div",2,0)(3,"div",3),me(4,Mj,0,0,"ng-template",4),g(),q(5,"div"),g()()),r&2&&(v(5),ue("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[en],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[Vj.snackBarState]}});let t=e;return t})();function Bj(){return new Ma}var zj=new R("mat-snack-bar-default-options",{providedIn:"root",factory:Bj}),Uj=(()=>{let e=class e{get _openedSnackBarRef(){let n=this._parentSnackBar;return n?n._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(n){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=n:this._snackBarRefAtThisLevel=n}constructor(n,r,o,s,a,l){this._overlay=n,this._live=r,this._injector=o,this._breakpointObserver=s,this._parentSnackBar=a,this._defaultConfig=l,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=WS,this.snackBarContainerComponent=jj,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(n,r){return this._attach(n,r)}openFromTemplate(n,r){return this._attach(n,r)}open(n,r="",o){let s=D(D({},this._defaultConfig),o);return s.data={message:n,action:r},s.announcementMessage===n&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(n,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,s=ri.create({parent:o||this._injector,providers:[{provide:Ma,useValue:r}]}),a=new $r(this.snackBarContainerComponent,r.viewContainerRef,s),l=n.attach(a);return l.instance.snackBarConfig=r,l.instance}_attach(n,r){let o=D(D(D({},new Ma),this._defaultConfig),r),s=this._createOverlay(o),a=this._attachSnackBarContainer(s,o),l=new id(a,s);if(n instanceof Dt){let c=new Ji(n,null,{$implicit:o.data,snackBarRef:l});l.instance=a.attachTemplatePortal(c)}else{let c=this._createInjector(o,l),d=new $r(n,void 0,c),u=a.attachComponentPortal(d);l.instance=u.instance}return this._breakpointObserver.observe(gT.HandsetPortrait).pipe(ze(s.detachments())).subscribe(c=>{s.overlayElement.classList.toggle(this.handsetCssClass,c.matches)}),o.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(l,o),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(n,r){n.afterDismissed().subscribe(()=>{this._openedSnackBarRef==n&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{n.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):n.containerInstance.enter(),r.duration&&r.duration>0&&n.afterOpened().subscribe(()=>n._dismissAfter(r.duration))}_createOverlay(n){let r=new ka;r.direction=n.direction;let o=this._overlay.position().global(),s=n.direction==="rtl",a=n.horizontalPosition==="left"||n.horizontalPosition==="start"&&!s||n.horizontalPosition==="end"&&s,l=!a&&n.horizontalPosition!=="center";return a?o.left("0"):l?o.right("0"):o.centerHorizontally(),n.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(n,r){let o=n&&n.viewContainerRef&&n.viewContainerRef.injector;return ri.create({parent:o||this._injector,providers:[{provide:id,useValue:r},{provide:$S,useValue:n.data}]})}};e.\u0275fac=function(r){return new(r||e)(_(_n),_(CT),_(ri),_(Xh),_(e,12),_(zj))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({providers:[Uj],imports:[Ra,Wr,Jo,pe,WS,pe]});let t=e;return t})();var Hj=new R("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=M(_n);return()=>t.scrollStrategies.reposition()}});function qj(t){return()=>t.scrollStrategies.reposition()}var $j={provide:Hj,deps:[_n],useFactory:qj};var $b=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({providers:[$j],imports:[ki,Ra,pb,pe,fr,Ur,pb,pe]});let t=e;return t})();var Yb=["*"];function Wj(t,e){t&1&&ke(0)}var Gj=["tabListContainer"],Kj=["tabList"],Yj=["tabListInner"],Qj=["nextPaginator"],Xj=["previousPaginator"],Zj=t=>({animationDuration:t}),Jj=(t,e)=>({value:t,params:e});function eB(t,e){}var tB=["tabBodyWrapper"],iB=["tabHeader"];function nB(t,e){}function rB(t,e){if(t&1&&me(0,nB,0,0,"ng-template",12),t&2){let i=P().$implicit;z("cdkPortalOutlet",i.templateLabel)}}function oB(t,e){if(t&1&&S(0),t&2){let i=P().$implicit;Ve(i.textLabel)}}function sB(t,e){if(t&1){let i=Je();p(0,"div",7,2),G("click",function(){let r=ae(i),o=r.$implicit,s=r.$index,a=P(),l=Mn(1);return le(a._handleClick(o,l,s))})("cdkFocusChange",function(r){let o=ae(i).$index,s=P();return le(s._tabFocusChanged(r,o))}),q(2,"span",8)(3,"div",9),p(4,"span",10)(5,"span",11),me(6,rB,1,1,null,12)(7,oB,1,1),g()()()}if(t&2){let i=e.$implicit,n=e.$index,r=Mn(1),o=P();oe("mdc-tab--active",o.selectedIndex===n),z("id",o._getTabLabelId(n))("ngClass",i.labelClass)("disabled",i.disabled)("fitInkBarToContent",o.fitInkBarToContent),ue("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",i.ariaLabel||null)("aria-labelledby",!i.ariaLabel&&i.ariaLabelledby?i.ariaLabelledby:null),v(3),z("matRippleTrigger",r)("matRippleDisabled",i.disabled||o.disableRipple),v(3),xe(6,i.templateLabel?6:7)}}function aB(t,e){t&1&&ke(0)}function lB(t,e){if(t&1){let i=Je();p(0,"mat-tab-body",13),G("_onCentered",function(){ae(i);let r=P();return le(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){ae(i);let o=P();return le(o._setTabBodyWrapperHeight(r))}),g()}if(t&2){let i=e.$implicit,n=e.$index,r=P();oe("mat-mdc-tab-body-active",r.selectedIndex===n),z("id",r._getTabContentId(n))("ngClass",i.bodyClass)("content",i.content)("position",i.position)("origin",i.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),ue("tabindex",r.contentTabIndex!=null&&r.selectedIndex===n?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(n))("aria-hidden",r.selectedIndex!==n)}}var cB=new R("MatTabContent"),dB=(()=>{let e=class e{constructor(n){this.template=n}};e.\u0275fac=function(r){return new(r||e)(f(Dt))},e.\u0275dir=Y({type:e,selectors:[["","matTabContent",""]],standalone:!0,features:[et([{provide:cB,useExisting:e}])]});let t=e;return t})(),uB=new R("MatTabLabel"),YS=new R("MAT_TAB"),hB=(()=>{let e=class e extends NS{constructor(n,r,o){super(n,r),this._closestTab=o}};e.\u0275fac=function(r){return new(r||e)(f(Dt),f(yi),f(YS,8))},e.\u0275dir=Y({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[et([{provide:uB,useExisting:e}]),Ne]});let t=e;return t})(),QS=new R("MAT_TAB_GROUP"),Qb=(()=>{let e=class e{get templateLabel(){return this._templateLabel}set templateLabel(n){this._setTemplateLabelInput(n)}get content(){return this._contentPortal}constructor(n,r){this._viewContainerRef=n,this._closestTabGroup=r,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new J,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(n){(n.hasOwnProperty("textLabel")||n.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Ji(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(n){n&&n._closestTab===this&&(this._templateLabel=n)}};e.\u0275fac=function(r){return new(r||e)(f(yi),f(QS,8))},e.\u0275cmp=X({type:e,selectors:[["mat-tab"]],contentQueries:function(r,o,s){if(r&1&&(Xe(s,hB,5),Xe(s,dB,7,Dt)),r&2){let a;te(a=ie())&&(o.templateLabel=a.first),te(a=ie())&&(o._explicitContent=a.first)}},viewQuery:function(r,o){if(r&1&&Te(Dt,7),r&2){let s;te(s=ie())&&(o._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[N.HasDecoratorInputTransform,"disabled","disabled",ye],textLabel:[N.None,"label","textLabel"],ariaLabel:[N.None,"aria-label","ariaLabel"],ariaLabelledby:[N.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[et([{provide:YS,useExisting:e}]),Qe,gt,Z],ngContentSelectors:Yb,decls:1,vars:0,template:function(r,o){r&1&&(rt(),me(0,Wj,1,0,"ng-template"))},encapsulation:2});let t=e;return t})(),Wb="mdc-tab-indicator--active",GS="mdc-tab-indicator--no-transition",Gb=class{constructor(e){this._items=e}hide(){this._items.forEach(e=>e.deactivateInkBar())}alignToElement(e){let i=this._items.find(r=>r.elementRef.nativeElement===e),n=this._currentItem;if(i!==n&&(n?.deactivateInkBar(),i)){let r=n?.elementRef.nativeElement.getBoundingClientRect?.();i.activateInkBar(r),this._currentItem=i}}},mB=(()=>{let e=class e{constructor(){this._elementRef=M(ee),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(n){this._fitToContent!==n&&(this._fitToContent=n,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(n){let r=this._elementRef.nativeElement;if(!n||!r.getBoundingClientRect||!this._inkBarContentElement){r.classList.add(Wb);return}let o=r.getBoundingClientRect(),s=n.width/o.width,a=n.left-o.left;r.classList.add(GS),this._inkBarContentElement.style.setProperty("transform",`translateX(${a}px) scaleX(${s})`),r.getBoundingClientRect(),r.classList.remove(GS),r.classList.add(Wb),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(Wb)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let n=this._elementRef.nativeElement.ownerDocument||document,r=this._inkBarElement=n.createElement("span"),o=this._inkBarContentElement=n.createElement("span");r.className="mdc-tab-indicator",o.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",r.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let n=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;n.appendChild(this._inkBarElement)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,inputs:{fitInkBarToContent:[N.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",ye]},features:[Qe]});let t=e;return t})();var XS=(()=>{let e=class e extends mB{constructor(n){super(),this.elementRef=n,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}};e.\u0275fac=function(r){return new(r||e)(f(ee))},e.\u0275dir=Y({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(r,o){r&2&&(ue("aria-disabled",!!o.disabled),oe("mat-mdc-tab-disabled",o.disabled))},inputs:{disabled:[N.HasDecoratorInputTransform,"disabled","disabled",ye]},standalone:!0,features:[Qe,Ne]});let t=e;return t})(),KS=Yi({passive:!0}),fB=650,pB=100,gB=(()=>{let e=class e{get selectedIndex(){return this._selectedIndex}set selectedIndex(n){let r=isNaN(n)?0:n;this._selectedIndex!=r&&(this._selectedIndexChanged=!0,this._selectedIndex=r,this._keyManager&&this._keyManager.updateActiveItem(r))}constructor(n,r,o,s,a,l,c){this._elementRef=n,this._changeDetectorRef=r,this._viewportRuler=o,this._dir=s,this._ngZone=a,this._platform=l,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new J,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new J,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new Q,this.indexFocused=new Q,a.runOutsideAngular(()=>{An(n.nativeElement,"mouseleave").pipe(ze(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){An(this._previousPaginator.nativeElement,"touchstart",KS).pipe(ze(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),An(this._nextPaginator.nativeElement,"touchstart",KS).pipe(ze(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let n=this._dir?this._dir.change:F("ltr"),r=this._viewportRuler.change(150),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new ya(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(at(1)).subscribe(o),Vt(n,r,this._items.changes,this._itemsResized()).pipe(ze(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return typeof ResizeObserver!="function"?Dn:this._items.changes.pipe(ht(this._items),qe(n=>new yt(r=>this._ngZone.runOutsideAngular(()=>{let o=new ResizeObserver(s=>r.next(s));return n.forEach(s=>o.observe(s.elementRef.nativeElement)),()=>{o.disconnect()}}))),Zs(1),He(n=>n.some(r=>r.contentRect.width>0&&r.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(n){if(!zr(n))switch(n.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let r=this._items.get(this.focusIndex);r&&!r.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(n))}break;default:this._keyManager.onKeydown(n)}}_onContentChanges(){let n=this._elementRef.nativeElement.textContent;n!==this._currentTextContent&&(this._currentTextContent=n||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(n){!this._isValidIndex(n)||this.focusIndex===n||!this._keyManager||this._keyManager.setActiveItem(n)}_isValidIndex(n){return this._items?!!this._items.toArray()[n]:!0}_setTabFocus(n){if(this._showPaginationControls&&this._scrollToLabel(n),this._items&&this._items.length){this._items.toArray()[n].focus();let r=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?r.scrollLeft=0:r.scrollLeft=r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let n=this.scrollDistance,r=this._getLayoutDirection()==="ltr"?-n:n;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(n){this._scrollTo(n)}_scrollHeader(n){let r=this._tabListContainer.nativeElement.offsetWidth,o=(n=="before"?-1:1)*r/3;return this._scrollTo(this._scrollDistance+o)}_handlePaginatorClick(n){this._stopInterval(),this._scrollHeader(n)}_scrollToLabel(n){if(this.disablePagination)return;let r=this._items?this._items.toArray()[n]:null;if(!r)return;let o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:a}=r.elementRef.nativeElement,l,c;this._getLayoutDirection()=="ltr"?(l=s,c=l+a):(c=this._tabListInner.nativeElement.offsetWidth-s,l=c-a);let d=this.scrollDistance,u=this.scrollDistance+o;l<d?this.scrollDistance-=d-l:c>u&&(this.scrollDistance+=Math.min(c-u,l-d))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let n=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;n||(this.scrollDistance=0),n!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=n}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let n=this._tabListInner.nativeElement.scrollWidth,r=this._tabListContainer.nativeElement.offsetWidth;return n-r||0}_alignInkBarToSelectedTab(){let n=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=n?n.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(n,r){r&&r.button!=null&&r.button!==0||(this._stopInterval(),gE(fB,pB).pipe(ze(Vt(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:o,distance:s}=this._scrollHeader(n);(s===0||s>=o)&&this._stopInterval()}))}_scrollTo(n){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,n)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Le),f(Da),f(Ht,8),f(W),f(Ae),f(oi,8))},e.\u0275dir=Y({type:e,inputs:{disablePagination:[N.HasDecoratorInputTransform,"disablePagination","disablePagination",ye],selectedIndex:[N.HasDecoratorInputTransform,"selectedIndex","selectedIndex",Mr]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[Qe]});let t=e;return t})(),_B=(()=>{let e=class e extends gB{constructor(n,r,o,s,a,l,c){super(n,r,o,s,a,l,c),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new Gb(this._items),super.ngAfterContentInit()}_itemSelected(n){n.preventDefault()}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Le),f(Da),f(Ht,8),f(W),f(Ae),f(oi,8))},e.\u0275cmp=X({type:e,selectors:[["mat-tab-header"]],contentQueries:function(r,o,s){if(r&1&&Xe(s,XS,4),r&2){let a;te(a=ie())&&(o._items=a)}},viewQuery:function(r,o){if(r&1&&(Te(Gj,7),Te(Kj,7),Te(Yj,7),Te(Qj,5),Te(Xj,5)),r&2){let s;te(s=ie())&&(o._tabListContainer=s.first),te(s=ie())&&(o._tabList=s.first),te(s=ie())&&(o._tabListInner=s.first),te(s=ie())&&(o._nextPaginator=s.first),te(s=ie())&&(o._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(r,o){r&2&&oe("mat-mdc-tab-header-pagination-controls-enabled",o._showPaginationControls)("mat-mdc-tab-header-rtl",o._getLayoutDirection()=="rtl")},inputs:{disableRipple:[N.HasDecoratorInputTransform,"disableRipple","disableRipple",ye]},standalone:!0,features:[Qe,Ne,Z],ngContentSelectors:Yb,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(r,o){if(r&1){let s=Je();rt(),p(0,"button",5,0),G("click",function(){return ae(s),le(o._handlePaginatorClick("before"))})("mousedown",function(l){return ae(s),le(o._handlePaginatorPress("before",l))})("touchend",function(){return ae(s),le(o._stopInterval())}),q(2,"div",6),g(),p(3,"div",7,1),G("keydown",function(l){return ae(s),le(o._handleKeydown(l))}),p(5,"div",8,2),G("cdkObserveContent",function(){return ae(s),le(o._onContentChanges())}),p(7,"div",9,3),ke(9),g()()(),p(10,"button",10,4),G("mousedown",function(l){return ae(s),le(o._handlePaginatorPress("after",l))})("click",function(){return ae(s),le(o._handlePaginatorClick("after"))})("touchend",function(){return ae(s),le(o._stopInterval())}),q(12,"div",6),g()}r&2&&(oe("mat-mdc-tab-header-pagination-disabled",o._disableScrollBefore),z("matRippleDisabled",o._disableScrollBefore||o.disableRipple)("disabled",o._disableScrollBefore||null),v(3),oe("_mat-animation-noopable",o._animationMode==="NoopAnimations"),v(7),oe("mat-mdc-tab-header-pagination-disabled",o._disableScrollAfter),z("matRippleDisabled",o._disableScrollAfter||o.disableRipple)("disabled",o._disableScrollAfter||null))},dependencies:[xa,mT],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2});let t=e;return t})(),bB=new R("MAT_TABS_CONFIG"),vB={translateTab:$i("translateTab",[Lt("center, void, left-origin-center, right-origin-center",Ze({transform:"none"})),Lt("left",Ze({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Lt("right",Ze({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),Zt("* => left, * => right, left => center, right => center",Xt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),Zt("void => left-origin-center",[Ze({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),Xt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),Zt("void => right-origin-center",[Ze({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),Xt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},yB=(()=>{let e=class e extends en{constructor(n,r,o,s){super(n,r,s),this._host=o,this._centeringSub=nt.EMPTY,this._leavingSub=nt.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(ht(this._host._isCenterPosition(this._host._position))).subscribe(n=>{n&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(f(ia),f(yi),f(ni(()=>ZS)),f(he))},e.\u0275dir=Y({type:e,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[Ne]});let t=e;return t})(),ZS=(()=>{let e=class e{set position(n){this._positionIndex=n,this._computePositionAnimationState()}constructor(n,r,o){this._elementRef=n,this._dir=r,this._dirChangeSubscription=nt.EMPTY,this._translateTabComplete=new J,this._onCentering=new Q,this._beforeCentering=new Q,this._afterLeavingCenter=new Q,this._onCentered=new Q(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(s=>{this._computePositionAnimationState(s),o.markForCheck()})),this._translateTabComplete.pipe(hn((s,a)=>s.fromState===a.fromState&&s.toState===a.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(n){let r=this._isCenterPosition(n.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(n){return n=="center"||n=="left-origin-center"||n=="right-origin-center"}_computePositionAnimationState(n=this._getLayoutDirection()){this._positionIndex<0?this._position=n=="ltr"?"left":"right":this._positionIndex>0?this._position=n=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(n){let r=this._getLayoutDirection();return r=="ltr"&&n<=0||r=="rtl"&&n>0?"left-origin-center":"right-origin-center"}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Ht,8),f(Le))},e.\u0275cmp=X({type:e,selectors:[["mat-tab-body"]],viewQuery:function(r,o){if(r&1&&Te(en,5),r&2){let s;te(s=ie())&&(o._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[N.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[Z],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(r,o){if(r&1){let s=Je();p(0,"div",1,0),G("@translateTab.start",function(l){return ae(s),le(o._onTranslateTabStarted(l))})("@translateTab.done",function(l){return ae(s),le(o._translateTabComplete.next(l))}),me(2,eB,0,0,"ng-template",2),g()}r&2&&z("@translateTab",Lo(3,Jj,o._position,ec(1,Zj,o.animationDuration)))},dependencies:[yB,Pb],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[vB.translateTab]}});let t=e;return t})(),wB=0,xB=!0,JS=(()=>{let e=class e{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(n){this._fitInkBarToContent=n,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(n){this._indexToSelect=isNaN(n)?null:n}get animationDuration(){return this._animationDuration}set animationDuration(n){let r=n+"";this._animationDuration=/^\d+$/.test(r)?n+"ms":r}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(n){this._contentTabIndex=isNaN(n)?null:n}get backgroundColor(){return this._backgroundColor}set backgroundColor(n){if(!xB)throw new Error("mat-tab-group background color must be set through the Sass theming API");let r=this._elementRef.nativeElement.classList;r.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),n&&r.add("mat-tabs-with-background",`mat-background-${n}`),this._backgroundColor=n}constructor(n,r,o,s){this._elementRef=n,this._changeDetectorRef=r,this._animationMode=s,this._tabs=new Rn,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=nt.EMPTY,this._tabLabelSubscription=nt.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new Q,this.focusChange=new Q,this.animationDone=new Q,this.selectedTabChange=new Q(!0),this._isServer=!M(Ae).isBrowser,this._groupId=wB++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=o&&o.disablePagination!=null?o.disablePagination:!1,this.dynamicHeight=o&&o.dynamicHeight!=null?o.dynamicHeight:!1,o?.contentTabIndex!=null&&(this.contentTabIndex=o.contentTabIndex),this.preserveContent=!!o?.preserveContent,this.fitInkBarToContent=o&&o.fitInkBarToContent!=null?o.fitInkBarToContent:!1,this.stretchTabs=o&&o.stretchTabs!=null?o.stretchTabs:!0}ngAfterContentChecked(){let n=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=n){let r=this._selectedIndex==null;if(!r){this.selectedTabChange.emit(this._createChangeEvent(n));let o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,s)=>o.isActive=s===n),r||(this.selectedIndexChange.emit(n),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,o)=>{r.position=o-n,this._selectedIndex!=null&&r.position==0&&!r.origin&&(r.origin=n-this._selectedIndex)}),this._selectedIndex!==n&&(this._selectedIndex=n,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let n=this._clampTabIndex(this._indexToSelect);if(n===this._selectedIndex){let r=this._tabs.toArray(),o;for(let s=0;s<r.length;s++)if(r[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,o=r[s];break}!o&&r[n]&&Promise.resolve().then(()=>{r[n].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(n))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(ht(this._allTabs)).subscribe(n=>{this._tabs.reset(n.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(n){let r=this._tabHeader;r&&(r.focusIndex=n)}_focusChanged(n){this._lastFocusedTabIndex=n,this.focusChange.emit(this._createChangeEvent(n))}_createChangeEvent(n){let r=new Kb;return r.index=n,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[n]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=Vt(...this._tabs.map(n=>n._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(n){return Math.min(this._tabs.length-1,Math.max(n||0,0))}_getTabLabelId(n){return`mat-tab-label-${this._groupId}-${n}`}_getTabContentId(n){return`mat-tab-content-${this._groupId}-${n}`}_setTabBodyWrapperHeight(n){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=n+"px")}_removeTabBodyWrapperHeight(){let n=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=n.clientHeight,n.style.height="",this.animationDone.emit()}_handleClick(n,r,o){r.focusIndex=o,n.disabled||(this.selectedIndex=o)}_getTabIndex(n){let r=this._lastFocusedTabIndex??this.selectedIndex;return n===r?0:-1}_tabFocusChanged(n,r){n&&n!=="mouse"&&n!=="touch"&&(this._tabHeader.focusIndex=r)}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Le),f(bB,8),f(oi,8))},e.\u0275cmp=X({type:e,selectors:[["mat-tab-group"]],contentQueries:function(r,o,s){if(r&1&&Xe(s,Qb,5),r&2){let a;te(a=ie())&&(o._allTabs=a)}},viewQuery:function(r,o){if(r&1&&(Te(tB,5),Te(iB,5)),r&2){let s;te(s=ie())&&(o._tabBodyWrapper=s.first),te(s=ie())&&(o._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(r,o){r&2&&(Ai("mat-"+(o.color||"primary")),mn("--mat-tab-animation-duration",o.animationDuration),oe("mat-mdc-tab-group-dynamic-height",o.dynamicHeight)("mat-mdc-tab-group-inverted-header",o.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",o.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[N.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",ye],stretchTabs:[N.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",ye],dynamicHeight:[N.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",ye],selectedIndex:[N.HasDecoratorInputTransform,"selectedIndex","selectedIndex",Mr],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[N.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",Mr],disablePagination:[N.HasDecoratorInputTransform,"disablePagination","disablePagination",ye],disableRipple:[N.HasDecoratorInputTransform,"disableRipple","disableRipple",ye],preserveContent:[N.HasDecoratorInputTransform,"preserveContent","preserveContent",ye],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[et([{provide:QS,useExisting:e}]),Qe,Z],ngContentSelectors:Yb,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","ngClass","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","ngClass","content","position","origin","animationDuration","preserveContent"]],template:function(r,o){if(r&1){let s=Je();rt(),p(0,"mat-tab-header",3,0),G("indexFocused",function(l){return ae(s),le(o._focusChanged(l))})("selectFocusedIndex",function(l){return ae(s),le(o.selectedIndex=l)}),At(2,sB,8,16,"div",4,ui),g(),me(4,aB,1,0),p(5,"div",5,1),At(7,lB,1,12,"mat-tab-body",6,ui),g()}r&2&&(z("selectedIndex",o.selectedIndex||0)("disableRipple",o.disableRipple)("disablePagination",o.disablePagination),v(2),kt(o._tabs),v(2),xe(4,o._isServer?4:-1),v(),oe("_mat-animation-noopable",o._animationMode==="NoopAnimations"),v(2),kt(o._tabs))},dependencies:[_B,XS,em,Pr,xa,en,ZS],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2});let t=e;return t})(),Kb=class{};var Xb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,pe]});let t=e;return t})();var Zb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe]});let t=e;return t})();var Jb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[pe,pe]});let t=e;return t})();var EB=["*"];function IB(t,e){t&1&&ke(0)}var ev=(()=>{let e=class e{constructor(n){this._elementRef=n}focus(){this._elementRef.nativeElement.focus()}};e.\u0275fac=function(r){return new(r||e)(f(ee))},e.\u0275dir=Y({type:e,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0});let t=e;return t})(),tv=(()=>{let e=class e{constructor(n){this.template=n}};e.\u0275fac=function(r){return new(r||e)(f(Dt))},e.\u0275dir=Y({type:e,selectors:[["","cdkStepLabel",""]],standalone:!0});let t=e;return t})(),TB=0;var pr={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},iv=new R("STEPPER_GLOBAL_OPTIONS"),Cm=(()=>{let e=class e{get completed(){return this._completedOverride==null?this._getDefaultCompleted():this._completedOverride}set completed(n){this._completedOverride=n}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return this._customError==null?this._getDefaultError():this._customError}set hasError(n){this._customError=n}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(n,r){this._stepper=n,this.interacted=!1,this.interactedStream=new Q,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=r||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this.interacted=!1,this._completedOverride!=null&&(this._completedOverride=!1),this._customError!=null&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError!=null}};e.\u0275fac=function(r){return new(r||e)(f(ni(()=>Em)),f(iv,8))},e.\u0275cmp=X({type:e,selectors:[["cdk-step"]],contentQueries:function(r,o,s){if(r&1&&Xe(s,tv,5),r&2){let a;te(a=ie())&&(o.stepLabel=a.first)}},viewQuery:function(r,o){if(r&1&&Te(Dt,7),r&2){let s;te(s=ie())&&(o.content=s.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[N.None,"aria-label","ariaLabel"],ariaLabelledby:[N.None,"aria-labelledby","ariaLabelledby"],state:"state",editable:[N.HasDecoratorInputTransform,"editable","editable",ye],optional:[N.HasDecoratorInputTransform,"optional","optional",ye],completed:[N.HasDecoratorInputTransform,"completed","completed",ye],hasError:[N.HasDecoratorInputTransform,"hasError","hasError",ye]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[Qe,gt,Z],ngContentSelectors:EB,decls:1,vars:0,template:function(r,o){r&1&&(rt(),me(0,IB,1,0,"ng-template"))},encapsulation:2,changeDetection:0});let t=e;return t})(),Em=(()=>{let e=class e{get selectedIndex(){return this._selectedIndex}set selectedIndex(n){this.steps&&this._steps?(this._isValidIndex(n),this.selected?._markAsInteracted(),this._selectedIndex!==n&&!this._anyControlsInvalidOrPending(n)&&(n>=this._selectedIndex||this.steps.toArray()[n].editable)&&this._updateSelectedItemIndex(n)):this._selectedIndex=n}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(n){this.selectedIndex=n&&this.steps?this.steps.toArray().indexOf(n):-1}get orientation(){return this._orientation}set orientation(n){this._orientation=n,this._keyManager&&this._keyManager.withVerticalOrientation(n==="vertical")}constructor(n,r,o){this._dir=n,this._changeDetectorRef=r,this._elementRef=o,this._destroyed=new J,this.steps=new Rn,this._sortedHeaders=new Rn,this.linear=!1,this._selectedIndex=0,this.selectionChange=new Q,this.selectedIndexChange=new Q,this._orientation="horizontal",this._groupId=TB++}ngAfterContentInit(){this._steps.changes.pipe(ht(this._steps),ze(this._destroyed)).subscribe(n=>{this.steps.reset(n.filter(r=>r._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(ht(this._stepHeader),ze(this._destroyed)).subscribe(n=>{this._sortedHeaders.reset(n.toArray().sort((r,o)=>r._elementRef.nativeElement.compareDocumentPosition(o._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new ya(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),(this._dir?this._dir.change:F()).pipe(ht(this._layoutDirection()),ze(this._destroyed)).subscribe(n=>this._keyManager.withHorizontalOrientation(n)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(n=>n.reset()),this._stateChanged()}_getStepLabelId(n){return`cdk-step-label-${this._groupId}-${n}`}_getStepContentId(n){return`cdk-step-content-${this._groupId}-${n}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(n){let r=n-this._selectedIndex;return r<0?this._layoutDirection()==="rtl"?"next":"previous":r>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getIndicatorType(n,r=pr.NUMBER){let o=this.steps.toArray()[n],s=this._isCurrentStep(n);return o._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(o,s):this._getGuidelineLogic(o,s,r)}_getDefaultIndicatorLogic(n,r){return n._showError()&&n.hasError&&!r?pr.ERROR:!n.completed||r?pr.NUMBER:n.editable?pr.EDIT:pr.DONE}_getGuidelineLogic(n,r,o=pr.NUMBER){return n._showError()&&n.hasError&&!r?pr.ERROR:n.completed&&!r?pr.DONE:n.completed&&r?o:n.editable&&r?pr.EDIT:o}_isCurrentStep(n){return this._selectedIndex===n}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(n){let r=this.steps.toArray();this.selectionChange.emit({selectedIndex:n,previouslySelectedIndex:this._selectedIndex,selectedStep:r[n],previouslySelectedStep:r[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(n):this._keyManager.updateActiveItem(n),this._selectedIndex=n,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(n){let r=zr(n),o=n.keyCode,s=this._keyManager;s.activeItemIndex!=null&&!r&&(o===32||o===13)?(this.selectedIndex=s.activeItemIndex,n.preventDefault()):s.setFocusOrigin("keyboard").onKeydown(n)}_anyControlsInvalidOrPending(n){return this.linear&&n>=0?this.steps.toArray().slice(0,n).some(r=>{let o=r.stepControl;return(o?o.invalid||o.pending||!r.interacted:!r.completed)&&!r.optional&&!r._completedOverride}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let n=this._elementRef.nativeElement,r=Rc();return n===r||n.contains(r)}_isValidIndex(n){return n>-1&&(!this.steps||n<this.steps.length)}};e.\u0275fac=function(r){return new(r||e)(f(Ht,8),f(Le),f(ee))},e.\u0275dir=Y({type:e,selectors:[["","cdkStepper",""]],contentQueries:function(r,o,s){if(r&1&&(Xe(s,Cm,5),Xe(s,ev,5)),r&2){let a;te(a=ie())&&(o._steps=a),te(a=ie())&&(o._stepHeader=a)}},inputs:{linear:[N.HasDecoratorInputTransform,"linear","linear",ye],selectedIndex:[N.HasDecoratorInputTransform,"selectedIndex","selectedIndex",Mr],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[Qe]});let t=e;return t})();var eD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[Vn]});let t=e;return t})();function SB(t,e){if(t&1&&No(0,2),t&2){let i=P();z("ngTemplateOutlet",i.iconOverrides[i.state])("ngTemplateOutletContext",i._getIconContext())}}function DB(t,e){if(t&1&&(p(0,"span",7),S(1),g()),t&2){let i=P(2);v(),Ve(i._getDefaultTextForState(i.state))}}function AB(t,e){if(t&1&&(p(0,"span",8),S(1),g()),t&2){let i=P(3);v(),Ve(i._intl.completedLabel)}}function kB(t,e){if(t&1&&(p(0,"span",8),S(1),g()),t&2){let i=P(3);v(),Ve(i._intl.editableLabel)}}function RB(t,e){if(t&1&&(me(0,AB,2,1,"span",8)(1,kB,2,1),p(2,"mat-icon",7),S(3),g()),t&2){let i=P(2);xe(0,i.state==="done"?0:i.state==="edit"?1:-1),v(3),Ve(i._getDefaultTextForState(i.state))}}function MB(t,e){if(t&1&&me(0,DB,2,1)(1,RB,4,2),t&2){let i,n=P();xe(0,(i=n.state)==="number"?0:1)}}function PB(t,e){t&1&&(p(0,"div",4),No(1,9),g()),t&2&&(v(),z("ngTemplateOutlet",e.template))}function OB(t,e){if(t&1&&(p(0,"div",4),S(1),g()),t&2){let i=P();v(),Ve(i.label)}}function FB(t,e){if(t&1&&(p(0,"div",5),S(1),g()),t&2){let i=P();v(),Ve(i._intl.optionalLabel)}}function NB(t,e){if(t&1&&(p(0,"div",6),S(1),g()),t&2){let i=P();v(),Ve(i.errorMessage)}}var iD=["*"];function VB(t,e){}function LB(t,e){if(t&1&&(ke(0),me(1,VB,0,0,"ng-template",0)),t&2){let i=P();v(),z("cdkPortalOutlet",i._portal)}}var nD=(t,e)=>({step:t,i:e}),rD=t=>({animationDuration:t}),oD=(t,e)=>({value:t,params:e});function jB(t,e){t&1&&ke(0)}function BB(t,e){t&1&&q(0,"div",6)}function zB(t,e){if(t&1&&(No(0,5),me(1,BB,1,0,"div",6)),t&2){let i=e.$implicit,n=e.$index,r=e.$index,o=e.$count;P(2);let s=Mn(4);z("ngTemplateOutlet",s)("ngTemplateOutletContext",Lo(3,nD,i,n)),v(),xe(1,r!==o-1?1:-1)}}function UB(t,e){if(t&1){let i=Je();p(0,"div",7),G("@horizontalStepTransition.done",function(r){ae(i);let o=P(2);return le(o._animationDone.next(r))}),No(1,8),g()}if(t&2){let i=e.$implicit,n=e.$index,r=P(2);oe("mat-horizontal-stepper-content-inactive",r.selectedIndex!==n),z("@horizontalStepTransition",Lo(8,oD,r._getAnimationDirection(n),ec(6,rD,r._getAnimationDuration())))("id",r._getStepContentId(n)),ue("aria-labelledby",r._getStepLabelId(n)),v(),z("ngTemplateOutlet",i.content)}}function HB(t,e){if(t&1&&(p(0,"div",1)(1,"div",2),At(2,zB,2,6,null,null,ui),g(),p(4,"div",3),At(5,UB,2,11,"div",4,ui),g()()),t&2){let i=P();v(2),kt(i.steps),v(3),kt(i.steps)}}function qB(t,e){if(t&1){let i=Je();p(0,"div",9),No(1,5),p(2,"div",10)(3,"div",11),G("@verticalStepTransition.done",function(r){ae(i);let o=P(2);return le(o._animationDone.next(r))}),p(4,"div",12),No(5,8),g()()()()}if(t&2){let i=e.$implicit,n=e.$index,r=e.$index,o=e.$count,s=P(2),a=Mn(4);v(),z("ngTemplateOutlet",a)("ngTemplateOutletContext",Lo(10,nD,i,n)),v(),oe("mat-stepper-vertical-line",r!==o-1),v(),oe("mat-vertical-stepper-content-inactive",s.selectedIndex!==n),z("@verticalStepTransition",Lo(15,oD,s._getAnimationDirection(n),ec(13,rD,s._getAnimationDuration())))("id",s._getStepContentId(n)),ue("aria-labelledby",s._getStepLabelId(n)),v(2),z("ngTemplateOutlet",i.content)}}function $B(t,e){if(t&1&&At(0,qB,6,18,"div",9,ui),t&2){let i=P();kt(i.steps)}}function WB(t,e){if(t&1){let i=Je();p(0,"mat-step-header",13),G("click",function(){let r=ae(i).step;return le(r.select())})("keydown",function(r){ae(i);let o=P();return le(o._onKeydown(r))}),g()}if(t&2){let i=e.step,n=e.i,r=P();oe("mat-horizontal-stepper-header",r.orientation==="horizontal")("mat-vertical-stepper-header",r.orientation==="vertical"),z("tabIndex",r._getFocusIndex()===n?0:-1)("id",r._getStepLabelId(n))("index",n)("state",r._getIndicatorType(n,i.state))("label",i.stepLabel||i.label)("selected",r.selectedIndex===n)("active",r._stepIsNavigable(n,i))("optional",i.optional)("errorMessage",i.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple||!r._stepIsNavigable(n,i))("color",i.color||r.color),ue("aria-posinset",n+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(n))("aria-selected",r.selectedIndex==n)("aria-label",i.ariaLabel||null)("aria-labelledby",!i.ariaLabel&&i.ariaLabelledby?i.ariaLabelledby:null)("aria-disabled",r._stepIsNavigable(n,i)?null:!0)}}var nv=(()=>{let e=class e extends tv{};e.\u0275fac=(()=>{let n;return function(o){return(n||(n=Si(e)))(o||e)}})(),e.\u0275dir=Y({type:e,selectors:[["","matStepLabel",""]],standalone:!0,features:[Ne]});let t=e;return t})(),Im=(()=>{let e=class e{constructor(){this.changes=new J,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GB(t){return t||new Im}var KB={provide:Im,deps:[[new Hi,new Js,Im]],useFactory:GB},rv=(()=>{let e=class e extends ev{constructor(n,r,o,s){super(o),this._intl=n,this._focusMonitor=r,this._intlSubscription=n.changes.subscribe(()=>s.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(n,r){n?this._focusMonitor.focusVia(this._elementRef,n,r):this._elementRef.nativeElement.focus(r)}_stringLabel(){return this.label instanceof nv?null:this.label}_templateLabel(){return this.label instanceof nv?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(n){return n=="number"?`${this.index+1}`:n=="edit"?"create":n=="error"?"warning":n}};e.\u0275fac=function(r){return new(r||e)(f(Im),f(zc),f(ee),f(Le))},e.\u0275cmp=X({type:e,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(r,o){r&2&&Ai("mat-"+(o.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[Ne,Z],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(r,o){if(r&1&&(q(0,"div",0),p(1,"div")(2,"div",1),me(3,SB,1,2,"ng-container",2)(4,MB,2,1),g()(),p(5,"div",3),me(6,PB,2,1,"div",4)(7,OB,2,1)(8,FB,2,1,"div",5)(9,NB,2,1,"div",6),g()),r&2){let s;z("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disableRipple),v(),jg("mat-step-icon-state-",o.state," mat-step-icon"),oe("mat-step-icon-selected",o.selected),v(2),xe(3,o.iconOverrides&&o.iconOverrides[o.state]?3:4),v(2),oe("mat-step-label-active",o.active)("mat-step-label-selected",o.selected)("mat-step-label-error",o.state=="error"),v(),xe(6,(s=o._templateLabel())?6:o._stringLabel()?7:-1,s),v(2),xe(8,o.optional&&o.state!="error"?8:-1),v(),xe(9,o.state==="error"?9:-1)}},dependencies:[xa,tc,BT],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color);border-radius:var(--mat-stepper-header-hover-state-layer-shape)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color);border-radius:var(--mat-stepper-header-focus-state-layer-shape)}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color)}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color);background-color:var(--mat-stepper-header-icon-background-color)}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color)}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font);font-size:var(--mat-stepper-header-label-text-size);font-weight:var(--mat-stepper-header-label-text-weight);color:var(--mat-stepper-header-label-text-color)}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color)}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color);font-size:var(--mat-stepper-header-error-state-label-text-size)}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size);font-weight:var(--mat-stepper-header-selected-state-label-text-weight)}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color);color:var(--mat-stepper-header-selected-state-icon-foreground-color)}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color);color:var(--mat-stepper-header-edit-state-icon-foreground-color)}'],encapsulation:2,changeDetection:0});let t=e;return t})(),sD="500ms",aD="225ms",tD={horizontalStepTransition:$i("horizontalStepTransition",[Lt("previous",Ze({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),Lt("current",Ze({transform:"none",visibility:"inherit"})),Lt("next",Ze({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),Zt("* => *",Hg([Xt("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),Wg("@*",$g(),{optional:!0})]),{params:{animationDuration:sD}})]),verticalStepTransition:$i("verticalStepTransition",[Lt("previous",Ze({height:"0px",visibility:"hidden"})),Lt("next",Ze({height:"0px",visibility:"hidden"})),Lt("current",Ze({height:"*",visibility:"inherit"})),Zt("* <=> current",Hg([Xt("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),Wg("@*",$g(),{optional:!0})]),{params:{animationDuration:aD}})])},YB=(()=>{let e=class e{constructor(n){this.templateRef=n}};e.\u0275fac=function(r){return new(r||e)(f(Dt))},e.\u0275dir=Y({type:e,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[N.None,"matStepperIcon","name"]},standalone:!0});let t=e;return t})(),QB=(()=>{let e=class e{constructor(n){this._template=n}};e.\u0275fac=function(r){return new(r||e)(f(Dt))},e.\u0275dir=Y({type:e,selectors:[["ng-template","matStepContent",""]],standalone:!0});let t=e;return t})(),XB=(()=>{let e=class e extends Cm{constructor(n,r,o,s){super(n,s),this._errorStateMatcher=r,this._viewContainerRef=o,this._isSelected=nt.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(qe(()=>this._stepper.selectionChange.pipe(B(n=>n.selectedStep===this),ht(this._stepper.selected===this)))).subscribe(n=>{n&&this._lazyContent&&!this._portal&&(this._portal=new Ji(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(n,r){let o=this._errorStateMatcher.isErrorState(n,r),s=!!(n&&n.invalid&&this.interacted);return o||s}};e.\u0275fac=function(r){return new(r||e)(f(ni(()=>lD)),f(wa,4),f(yi),f(iv,8))},e.\u0275cmp=X({type:e,selectors:[["mat-step"]],contentQueries:function(r,o,s){if(r&1&&(Xe(s,nv,5),Xe(s,QB,5)),r&2){let a;te(a=ie())&&(o.stepLabel=a.first),te(a=ie())&&(o._lazyContent=a.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[et([{provide:wa,useExisting:e},{provide:Cm,useExisting:e}]),Ne,Z],ngContentSelectors:iD,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(r,o){r&1&&(rt(),me(0,LB,2,1,"ng-template"))},dependencies:[en],encapsulation:2,changeDetection:0});let t=e;return t})(),lD=(()=>{let e=class e extends Em{get animationDuration(){return this._animationDuration}set animationDuration(n){this._animationDuration=/^\d+$/.test(n)?n+"ms":n}constructor(n,r,o){super(n,r,o),this._stepHeader=void 0,this._steps=void 0,this.steps=new Rn,this.animationDone=new Q,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new J,this._animationDuration="",this._isServer=!M(Ae).isBrowser;let s=o.nativeElement.nodeName.toLowerCase();this.orientation=s==="mat-vertical-stepper"?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:n,templateRef:r})=>this._iconOverrides[n]=r),this.steps.changes.pipe(ze(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(hn((n,r)=>n.fromState===r.fromState&&n.toState===r.toState),ze(this._destroyed)).subscribe(n=>{n.toState==="current"&&this.animationDone.emit()})}_stepIsNavigable(n,r){return r.completed||this.selectedIndex===n||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:this.orientation==="horizontal"?sD:aD}};e.\u0275fac=function(r){return new(r||e)(f(Ht,8),f(Le),f(ee))},e.\u0275cmp=X({type:e,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(r,o,s){if(r&1&&(Xe(s,XB,5),Xe(s,YB,5)),r&2){let a;te(a=ie())&&(o._steps=a),te(a=ie())&&(o._icons=a)}},viewQuery:function(r,o){if(r&1&&Te(rv,5),r&2){let s;te(s=ie())&&(o._stepHeader=s)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(r,o){r&2&&(ue("aria-orientation",o.orientation),oe("mat-stepper-horizontal",o.orientation==="horizontal")("mat-stepper-vertical",o.orientation==="vertical")("mat-stepper-label-position-end",o.orientation==="horizontal"&&o.labelPosition=="end")("mat-stepper-label-position-bottom",o.orientation==="horizontal"&&o.labelPosition=="bottom")("mat-stepper-header-position-bottom",o.headerPosition==="bottom"))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[et([{provide:Em,useExisting:e}]),Ne,Z],ngContentSelectors:iD,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","mat-horizontal-stepper-content-inactive"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(r,o){if(r&1&&(rt(),me(0,jB,1,0)(1,HB,7,0)(2,$B,2,0)(3,WB,1,23,"ng-template",null,0,mh)),r&2){let s;xe(0,o._isServer?0:-1),v(),xe(1,(s=o.orientation)==="horizontal"?1:s==="vertical"?2:-1)}},dependencies:[tc,rv],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font);background:var(--mat-stepper-container-color)}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color);top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[tD.horizontalStepTransition,tD.verticalStepTransition]},changeDetection:0});let t=e;return t})();var ov=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({providers:[KB,wa],imports:[pe,ki,Wr,eD,Wc,qc,lD,rv,pe]});let t=e;return t})();var JB=["mat-calendar-body",""];function ez(t,e){if(t&1&&(p(0,"tr",0)(1,"td",3),S(2),g()()),t&2){let i=P();v(),mn("padding-top",i._cellPadding)("padding-bottom",i._cellPadding),ue("colspan",i.numCols),v(),wi(" ",i.label," ")}}function tz(t,e){if(t&1&&(p(0,"td",3),S(1),g()),t&2){let i=P(2);mn("padding-top",i._cellPadding)("padding-bottom",i._cellPadding),ue("colspan",i._firstRowOffset),v(),wi(" ",i._firstRowOffset>=i.labelMinRequiredCells?i.label:""," ")}}function iz(t,e){if(t&1){let i=Je();p(0,"td",6)(1,"button",7),G("click",function(r){let o=ae(i).$implicit,s=P(2);return le(s._cellClicked(o,r))})("focus",function(r){let o=ae(i).$implicit,s=P(2);return le(s._emitActiveDateChange(o,r))}),p(2,"span",8),S(3),g(),q(4,"span",9),g()()}if(t&2){let i=e.$implicit,n=e.$index,r=P().$index,o=P();mn("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),ue("data-mat-row",r)("data-mat-col",n),v(),oe("mat-calendar-body-disabled",!i.enabled)("mat-calendar-body-active",o._isActiveCell(r,n))("mat-calendar-body-range-start",o._isRangeStart(i.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(i.compareValue))("mat-calendar-body-in-range",o._isInRange(i.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(i.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(i.compareValue,r,n))("mat-calendar-body-comparison-start",o._isComparisonStart(i.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(i.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(i.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(i.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(i.compareValue))("mat-calendar-body-in-preview",o._isInPreview(i.compareValue)),z("ngClass",i.cssClasses)("tabindex",o._isActiveCell(r,n)?0:-1),ue("aria-label",i.ariaLabel)("aria-disabled",!i.enabled||null)("aria-pressed",o._isSelected(i.compareValue))("aria-current",o.todayValue===i.compareValue?"date":null)("aria-describedby",o._getDescribedby(i.compareValue)),v(),oe("mat-calendar-body-selected",o._isSelected(i.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(i.compareValue))("mat-calendar-body-today",o.todayValue===i.compareValue),v(),wi(" ",i.displayValue," ")}}function nz(t,e){if(t&1&&(p(0,"tr",1),me(1,tz,2,6,"td",4),At(2,iz,5,48,"td",5,ui),g()),t&2){let i=e.$implicit,n=e.$index,r=P();v(),xe(1,n===0&&r._firstRowOffset?1:-1),v(),kt(i)}}function rz(t,e){if(t&1&&(p(0,"th",2)(1,"span",6),S(2),g(),p(3,"span",3),S(4),g()()),t&2){let i=e.$implicit;v(2),Ve(i.long),v(2),Ve(i.narrow)}}var oz=["*"];function sz(t,e){}function az(t,e){if(t&1){let i=Je();p(0,"mat-month-view",2),Ei("activeDateChange",function(r){ae(i);let o=P();return Ci(o.activeDate,r)||(o.activeDate=r),le(r)}),G("_userSelection",function(r){ae(i);let o=P();return le(o._dateSelected(r))})("dragStarted",function(r){ae(i);let o=P();return le(o._dragStarted(r))})("dragEnded",function(r){ae(i);let o=P();return le(o._dragEnded(r))}),g()}if(t&2){let i=P();xi("activeDate",i.activeDate),z("selected",i.selected)("dateFilter",i.dateFilter)("maxDate",i.maxDate)("minDate",i.minDate)("dateClass",i.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName)("activeDrag",i._activeDrag)}}function lz(t,e){if(t&1){let i=Je();p(0,"mat-year-view",3),Ei("activeDateChange",function(r){ae(i);let o=P();return Ci(o.activeDate,r)||(o.activeDate=r),le(r)}),G("monthSelected",function(r){ae(i);let o=P();return le(o._monthSelectedInYearView(r))})("selectedChange",function(r){ae(i);let o=P();return le(o._goToDateInView(r,"month"))}),g()}if(t&2){let i=P();xi("activeDate",i.activeDate),z("selected",i.selected)("dateFilter",i.dateFilter)("maxDate",i.maxDate)("minDate",i.minDate)("dateClass",i.dateClass)}}function cz(t,e){if(t&1){let i=Je();p(0,"mat-multi-year-view",4),Ei("activeDateChange",function(r){ae(i);let o=P();return Ci(o.activeDate,r)||(o.activeDate=r),le(r)}),G("yearSelected",function(r){ae(i);let o=P();return le(o._yearSelectedInMultiYearView(r))})("selectedChange",function(r){ae(i);let o=P();return le(o._goToDateInView(r,"year"))}),g()}if(t&2){let i=P();xi("activeDate",i.activeDate),z("selected",i.selected)("dateFilter",i.dateFilter)("maxDate",i.maxDate)("minDate",i.minDate)("dateClass",i.dateClass)}}function dz(t,e){}var uz=["button"],hz=[[["","matDatepickerToggleIcon",""]]],mz=["[matDatepickerToggleIcon]"];function fz(t,e){t&1&&(ah(),p(0,"svg",2),q(1,"path",3),g())}var od=(()=>{let e=class e{constructor(){this.changes=new J,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(n,r){return`${n} \u2013 ${r}`}formatYearRangeLabel(n,r){return`${n} to ${r}`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rd=class{constructor(e,i,n,r,o={},s=e,a){this.value=e,this.displayValue=i,this.ariaLabel=n,this.enabled=r,this.cssClasses=o,this.compareValue=s,this.rawValue=a}},pz=1,cD=Yi({passive:!1,capture:!0}),Gr=Yi({passive:!0,capture:!0}),Tm=Yi({passive:!0}),Pa=(()=>{let e=class e{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(n,r){this._elementRef=n,this._ngZone=r,this._platform=M(Ae),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new Q,this.previewChange=new Q,this.activeDateChange=new Q,this.dragStarted=new Q,this.dragEnded=new Q,this._didDragSinceMouseDown=!1,this._enterHandler=o=>{if(this._skipNextFocus&&o.type==="focus"){this._skipNextFocus=!1;return}if(o.target&&this.isRange){let s=this._getCellFromElement(o.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:o}))}},this._touchmoveHandler=o=>{if(!this.isRange)return;let s=dD(o),a=s?this._getCellFromElement(s):null;s!==o.target&&(this._didDragSinceMouseDown=!0),av(o.target)&&o.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:a?.enabled?a:null,event:o}))},this._leaveHandler=o=>{this.previewEnd!==null&&this.isRange&&(o.type!=="blur"&&(this._didDragSinceMouseDown=!0),o.target&&this._getCellFromElement(o.target)&&!(o.relatedTarget&&this._getCellFromElement(o.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:o})))},this._mousedownHandler=o=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let s=o.target&&this._getCellFromElement(o.target);!s||!this._isInRange(s.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:s.rawValue,event:o})})},this._mouseupHandler=o=>{if(!this.isRange)return;let s=av(o.target);if(!s){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:o})});return}s.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let a=this._getCellFromElement(s);this.dragEnded.emit({value:a?.rawValue??null,event:o})})},this._touchendHandler=o=>{let s=dD(o);s&&this._mouseupHandler({target:s})},this._id=`mat-calendar-body-${pz++}`,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,r.runOutsideAngular(()=>{let o=n.nativeElement;o.addEventListener("touchmove",this._touchmoveHandler,cD),o.addEventListener("mouseenter",this._enterHandler,Gr),o.addEventListener("focus",this._enterHandler,Gr),o.addEventListener("mouseleave",this._leaveHandler,Gr),o.addEventListener("blur",this._leaveHandler,Gr),o.addEventListener("mousedown",this._mousedownHandler,Tm),o.addEventListener("touchstart",this._mousedownHandler,Tm),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(n,r){this._didDragSinceMouseDown||n.enabled&&this.selectedValueChange.emit({value:n.value,event:r})}_emitActiveDateChange(n,r){n.enabled&&this.activeDateChange.emit({value:n.value,event:r})}_isSelected(n){return this.startValue===n||this.endValue===n}ngOnChanges(n){let r=n.numCols,{rows:o,numCols:s}=this;(n.rows||r)&&(this._firstRowOffset=o&&o.length&&o[0].length?s-o[0].length:0),(n.cellAspectRatio||r||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/s}%`),(r||!this._cellWidth)&&(this._cellWidth=`${100/s}%`)}ngOnDestroy(){let n=this._elementRef.nativeElement;n.removeEventListener("touchmove",this._touchmoveHandler,cD),n.removeEventListener("mouseenter",this._enterHandler,Gr),n.removeEventListener("focus",this._enterHandler,Gr),n.removeEventListener("mouseleave",this._leaveHandler,Gr),n.removeEventListener("blur",this._leaveHandler,Gr),n.removeEventListener("mousedown",this._mousedownHandler,Tm),n.removeEventListener("touchstart",this._mousedownHandler,Tm),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(n,r){let o=n*this.numCols+r;return n&&(o-=this._firstRowOffset),o==this.activeCell}_focusActiveCell(n=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(at(1)).subscribe(()=>{setTimeout(()=>{let r=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");r&&(n||(this._skipNextFocus=!0),r.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(n){return lv(n,this.startValue,this.endValue)}_isRangeEnd(n){return cv(n,this.startValue,this.endValue)}_isInRange(n){return dv(n,this.startValue,this.endValue,this.isRange)}_isComparisonStart(n){return lv(n,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(n,r,o){if(!this._isComparisonStart(n)||this._isRangeStart(n)||!this._isInRange(n))return!1;let s=this.rows[r][o-1];if(!s){let a=this.rows[r-1];s=a&&a[a.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(n,r,o){if(!this._isComparisonEnd(n)||this._isRangeEnd(n)||!this._isInRange(n))return!1;let s=this.rows[r][o+1];if(!s){let a=this.rows[r+1];s=a&&a[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(n){return cv(n,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(n){return dv(n,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(n){return this.comparisonStart===this.comparisonEnd&&n===this.comparisonStart}_isPreviewStart(n){return lv(n,this.previewStart,this.previewEnd)}_isPreviewEnd(n){return cv(n,this.previewStart,this.previewEnd)}_isInPreview(n){return dv(n,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(n){return this.isRange?this.startValue===n&&this.endValue===n?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===n?this._startDateLabelId:this.endValue===n?this._endDateLabelId:null:null}_getCellFromElement(n){let r=av(n);if(r){let o=r.getAttribute("data-mat-row"),s=r.getAttribute("data-mat-col");if(o&&s)return this.rows[parseInt(o)][parseInt(s)]}return null}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(W))},e.\u0275cmp=X({type:e,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],standalone:!0,features:[gt,Z],attrs:JB,decls:7,vars:5,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(r,o){r&1&&(me(0,ez,3,6,"tr",0),At(1,nz,4,1,"tr",1,ui),p(3,"label",2),S(4),g(),p(5,"label",2),S(6),g()),r&2&&(xe(0,o._firstRowOffset<o.labelMinRequiredCells?0:-1),v(),kt(o.rows),v(2),z("id",o._startDateLabelId),v(),wi(" ",o.startDateAccessibleName,`
`),v(),z("id",o._endDateLabelId),v(),wi(" ",o.endDateAccessibleName,`
`))},dependencies:[Pr],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color)}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size);font-weight:var(--mat-datepicker-calendar-body-label-text-weight);color:var(--mat-datepicker-calendar-body-label-text-color)}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color)}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color)}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color);border-color:var(--mat-datepicker-calendar-date-outline-color)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color)}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color)}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color);color:var(--mat-datepicker-calendar-date-selected-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color)}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color)}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color)}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color)}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color)}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}'],encapsulation:2,changeDetection:0});let t=e;return t})();function sv(t){return t?.nodeName==="TD"}function av(t){let e;return sv(t)?e=t:sv(t.parentNode)?e=t.parentNode:sv(t.parentNode?.parentNode)&&(e=t.parentNode.parentNode),e?.getAttribute("data-mat-row")!=null?e:null}function lv(t,e,i){return i!==null&&e!==i&&t<i&&t===e}function cv(t,e,i){return e!==null&&e!==i&&t>=e&&t===i}function dv(t,e,i,n){return n&&e!==null&&i!==null&&e!==i&&t>=e&&t<=i}function dD(t){let e=t.changedTouches[0];return document.elementFromPoint(e.clientX,e.clientY)}var tn=class{constructor(e,i){this.start=e,this.end=i}},Sm=(()=>{let e=class e{constructor(n,r){this.selection=n,this._adapter=r,this._selectionChanged=new J,this.selectionChanged=this._selectionChanged,this.selection=n}updateSelection(n,r){let o=this.selection;this.selection=n,this._selectionChanged.next({selection:n,source:r,oldValue:o})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(n){return this._adapter.isDateInstance(n)&&this._adapter.isValid(n)}};e.\u0275fac=function(r){Oo()},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),gz=(()=>{let e=class e extends Sm{constructor(n){super(null,n)}add(n){super.updateSelection(n,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let n=new e(this._adapter);return n.updateSelection(this.selection,this),n}};e.\u0275fac=function(r){return new(r||e)(_(Xi))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();function _z(t,e){return t||new gz(e)}var bz={provide:Sm,deps:[[new Hi,new Js,Sm],Xi],useFactory:_z};var pD=new R("MAT_DATE_RANGE_SELECTION_STRATEGY");var uv=7,uD=(()=>{let e=class e{get activeDate(){return this._activeDate}set activeDate(n){let r=this._activeDate,o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(o,this.minDate,this.maxDate),this._hasSameMonthAndYear(r,this._activeDate)||this._init()}get selected(){return this._selected}set selected(n){n instanceof tn?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}constructor(n,r,o,s,a){this._changeDetectorRef=n,this._dateFormats=r,this._dateAdapter=o,this._dir=s,this._rangeStrategy=a,this._rerenderSubscription=nt.EMPTY,this.activeDrag=null,this.selectedChange=new Q,this._userSelection=new Q,this.dragStarted=new Q,this.dragEnded=new Q,this.activeDateChange=new Q,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ht(null)).subscribe(()=>this._init())}ngOnChanges(n){let r=n.comparisonStart||n.comparisonEnd;r&&!r.firstChange&&this._setRanges(this.selected),n.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(n){let r=n.value,o=this._getDateFromDayOfMonth(r),s,a;this._selected instanceof tn?(s=this._getDateInCurrentMonth(this._selected.start),a=this._getDateInCurrentMonth(this._selected.end)):s=a=this._getDateInCurrentMonth(this._selected),(s!==r||a!==r)&&this.selectedChange.emit(o),this._userSelection.emit({value:o,event:n.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(n){let r=n.value,o=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(r),this._dateAdapter.compareDate(o,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(n){let r=this._activeDate,o=this._isRtl();switch(n.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,o?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,o?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=n.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=n.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&n.preventDefault();return;case 27:this._previewEnd!=null&&!zr(n)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:n}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:n})),n.preventDefault(),n.stopPropagation());return;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),n.preventDefault()}_handleCalendarBodyKeyup(n){(n.keyCode===32||n.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:n}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(uv+this._dateAdapter.getDayOfWeek(n)-this._dateAdapter.getFirstDayOfWeek())%uv,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(n){this._matCalendarBody._focusActiveCell(n)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:n,value:r}){if(this._rangeStrategy){let o=r?r.rawValue:null,s=this._rangeStrategy.createPreview(o,this.selected,n);if(this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this.activeDrag&&o){let a=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,o,n);a&&(this._previewStart=this._getCellCompareValue(a.start),this._previewEnd=this._getCellCompareValue(a.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(n){if(this.activeDrag)if(n.value){let r=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,n.value,n.event);this.dragEnded.emit({value:r??null,event:n.event})}else this.dragEnded.emit({value:null,event:n.event})}_getDateFromDayOfMonth(n){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n)}_initWeekdays(){let n=this._dateAdapter.getFirstDayOfWeek(),r=this._dateAdapter.getDayOfWeekNames("narrow"),s=this._dateAdapter.getDayOfWeekNames("long").map((a,l)=>({long:a,narrow:r[l]}));this._weekdays=s.slice(n).concat(s.slice(0,n))}_createWeekCells(){let n=this._dateAdapter.getNumDaysInMonth(this.activeDate),r=this._dateAdapter.getDateNames();this._weeks=[[]];for(let o=0,s=this._firstWeekOffset;o<n;o++,s++){s==uv&&(this._weeks.push([]),s=0);let a=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),o+1),l=this._shouldEnableDate(a),c=this._dateAdapter.format(a,this._dateFormats.display.dateA11yLabel),d=this.dateClass?this.dateClass(a,"month"):void 0;this._weeks[this._weeks.length-1].push(new rd(o+1,r[o],c,l,d,this._getCellCompareValue(a),a))}}_shouldEnableDate(n){return!!n&&(!this.minDate||this._dateAdapter.compareDate(n,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(n,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(n))}_getDateInCurrentMonth(n){return n&&this._hasSameMonthAndYear(n,this.activeDate)?this._dateAdapter.getDate(n):null}_hasSameMonthAndYear(n,r){return!!(n&&r&&this._dateAdapter.getMonth(n)==this._dateAdapter.getMonth(r)&&this._dateAdapter.getYear(n)==this._dateAdapter.getYear(r))}_getCellCompareValue(n){if(n){let r=this._dateAdapter.getYear(n),o=this._dateAdapter.getMonth(n),s=this._dateAdapter.getDate(n);return new Date(r,o,s).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(n){n instanceof tn?(this._rangeStart=this._getCellCompareValue(n.start),this._rangeEnd=this._getCellCompareValue(n.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(n),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(n){return!this.dateFilter||this.dateFilter(n)}_clearPreview(){this._previewStart=this._previewEnd=null}};e.\u0275fac=function(r){return new(r||e)(f(Le),f(Hc,8),f(Xi,8),f(Ht,8),f(pD,8))},e.\u0275cmp=X({type:e,selectors:[["mat-month-view"]],viewQuery:function(r,o){if(r&1&&Te(Pa,5),r&2){let s;te(s=ie())&&(o._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],standalone:!0,features:[gt,Z],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(r,o){r&1&&(p(0,"table",0)(1,"thead",1)(2,"tr"),At(3,rz,5,2,"th",2,ui),g(),p(5,"tr",3),q(6,"th",4),g()(),p(7,"tbody",5),G("selectedValueChange",function(a){return o._dateSelected(a)})("activeDateChange",function(a){return o._updateActiveDate(a)})("previewChange",function(a){return o._previewChanged(a)})("dragStarted",function(a){return o.dragStarted.emit(a)})("dragEnded",function(a){return o._dragEnded(a)})("keyup",function(a){return o._handleCalendarBodyKeyup(a)})("keydown",function(a){return o._handleCalendarBodyKeydown(a)}),g()()),r&2&&(v(3),kt(o._weekdays),v(4),z("label",o._monthLabel)("rows",o._weeks)("todayValue",o._todayDate)("startValue",o._rangeStart)("endValue",o._rangeEnd)("comparisonStart",o._comparisonRangeStart)("comparisonEnd",o._comparisonRangeEnd)("previewStart",o._previewStart)("previewEnd",o._previewEnd)("isRange",o._isRange)("labelMinRequiredCells",3)("activeCell",o._dateAdapter.getDate(o.activeDate)-1)("startDateAccessibleName",o.startDateAccessibleName)("endDateAccessibleName",o.endDateAccessibleName))},dependencies:[Pa],encapsulation:2,changeDetection:0});let t=e;return t})(),Oi=24,hv=4,hD=(()=>{let e=class e{get activeDate(){return this._activeDate}set activeDate(n){let r=this._activeDate,o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(o,this.minDate,this.maxDate),gD(this._dateAdapter,r,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(n){n instanceof tn?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n)),this._setSelectedYear(n)}get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}constructor(n,r,o){this._changeDetectorRef=n,this._dateAdapter=r,this._dir=o,this._rerenderSubscription=nt.EMPTY,this.selectedChange=new Q,this.yearSelected=new Q,this.activeDateChange=new Q,this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ht(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let r=this._dateAdapter.getYear(this._activeDate)-nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let o=0,s=[];o<Oi;o++)s.push(r+o),s.length==hv&&(this._years.push(s.map(a=>this._createCellForYear(a))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(n){let r=n.value,o=this._dateAdapter.createDate(r,0,1),s=this._getDateFromYear(r);this.yearSelected.emit(o),this.selectedChange.emit(s)}_updateActiveDate(n){let r=n.value,o=this._activeDate;this.activeDate=this._getDateFromYear(r),this._dateAdapter.compareDate(o,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(n){let r=this._activeDate,o=this._isRtl();switch(n.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,o?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,o?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-hv);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,hv);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Oi-nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?-Oi*10:-Oi);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?Oi*10:Oi);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),n.preventDefault()}_handleCalendarBodyKeyup(n){(n.keyCode===32||n.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:n}),this._selectionKeyPressed=!1)}_getActiveCell(){return nd(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(n){let r=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(n,r,1));return this._dateAdapter.createDate(n,r,Math.min(this._dateAdapter.getDate(this.activeDate),o))}_createCellForYear(n){let r=this._dateAdapter.createDate(n,0,1),o=this._dateAdapter.getYearName(r),s=this.dateClass?this.dateClass(r,"multi-year"):void 0;return new rd(n,o,o,this._shouldEnableYear(n),s)}_shouldEnableYear(n){if(n==null||this.maxDate&&n>this._dateAdapter.getYear(this.maxDate)||this.minDate&&n<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(n,0,1);for(let o=r;this._dateAdapter.getYear(o)==n;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(n){if(this._selectedYear=null,n instanceof tn){let r=n.start||n.end;r&&(this._selectedYear=this._dateAdapter.getYear(r))}else n&&(this._selectedYear=this._dateAdapter.getYear(n))}};e.\u0275fac=function(r){return new(r||e)(f(Le),f(Xi,8),f(Ht,8))},e.\u0275cmp=X({type:e,selectors:[["mat-multi-year-view"]],viewQuery:function(r,o){if(r&1&&Te(Pa,5),r&2){let s;te(s=ie())&&(o._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],standalone:!0,features:[Z],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(r,o){r&1&&(p(0,"table",0)(1,"thead",1)(2,"tr"),q(3,"th",2),g()(),p(4,"tbody",3),G("selectedValueChange",function(a){return o._yearSelected(a)})("activeDateChange",function(a){return o._updateActiveDate(a)})("keyup",function(a){return o._handleCalendarBodyKeyup(a)})("keydown",function(a){return o._handleCalendarBodyKeydown(a)}),g()()),r&2&&(v(4),z("rows",o._years)("todayValue",o._todayYear)("startValue",o._selectedYear)("endValue",o._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",o._getActiveCell()))},dependencies:[Pa],encapsulation:2,changeDetection:0});let t=e;return t})();function gD(t,e,i,n,r){let o=t.getYear(e),s=t.getYear(i),a=_D(t,n,r);return Math.floor((o-a)/Oi)===Math.floor((s-a)/Oi)}function nd(t,e,i,n){let r=t.getYear(e);return vz(r-_D(t,i,n),Oi)}function _D(t,e,i){let n=0;return i?n=t.getYear(i)-Oi+1:e&&(n=t.getYear(e)),n}function vz(t,e){return(t%e+e)%e}var mD=(()=>{let e=class e{get activeDate(){return this._activeDate}set activeDate(n){let r=this._activeDate,o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(o,this.minDate,this.maxDate),this._dateAdapter.getYear(r)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(n){n instanceof tn?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n)),this._setSelectedMonth(n)}get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}constructor(n,r,o,s){this._changeDetectorRef=n,this._dateFormats=r,this._dateAdapter=o,this._dir=s,this._rerenderSubscription=nt.EMPTY,this.selectedChange=new Q,this.monthSelected=new Q,this.activeDateChange=new Q,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(ht(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(n){let r=n.value,o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),r,1);this.monthSelected.emit(o);let s=this._getDateFromMonth(r);this.selectedChange.emit(s)}_updateActiveDate(n){let r=n.value,o=this._activeDate;this.activeDate=this._getDateFromMonth(r),this._dateAdapter.compareDate(o,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(n){let r=this._activeDate,o=this._isRtl();switch(n.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,o?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,o?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),n.preventDefault()}_handleCalendarBodyKeyup(n){(n.keyCode===32||n.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:n}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let n=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(r=>r.map(o=>this._createCellForMonth(o,n[o]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(n){return n&&this._dateAdapter.getYear(n)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(n):null}_getDateFromMonth(n){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1),o=this._dateAdapter.getNumDaysInMonth(r);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,Math.min(this._dateAdapter.getDate(this.activeDate),o))}_createCellForMonth(n,r){let o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1),s=this._dateAdapter.format(o,this._dateFormats.display.monthYearA11yLabel),a=this.dateClass?this.dateClass(o,"year"):void 0;return new rd(n,r.toLocaleUpperCase(),s,this._shouldEnableMonth(n),a)}_shouldEnableMonth(n){let r=this._dateAdapter.getYear(this.activeDate);if(n==null||this._isYearAndMonthAfterMaxDate(r,n)||this._isYearAndMonthBeforeMinDate(r,n))return!1;if(!this.dateFilter)return!0;let o=this._dateAdapter.createDate(r,n,1);for(let s=o;this._dateAdapter.getMonth(s)==n;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(n,r){if(this.maxDate){let o=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return n>o||n===o&&r>s}return!1}_isYearAndMonthBeforeMinDate(n,r){if(this.minDate){let o=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return n<o||n===o&&r<s}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(n){n instanceof tn?this._selectedMonth=this._getMonthInCurrentYear(n.start)||this._getMonthInCurrentYear(n.end):this._selectedMonth=this._getMonthInCurrentYear(n)}};e.\u0275fac=function(r){return new(r||e)(f(Le),f(Hc,8),f(Xi,8),f(Ht,8))},e.\u0275cmp=X({type:e,selectors:[["mat-year-view"]],viewQuery:function(r,o){if(r&1&&Te(Pa,5),r&2){let s;te(s=ie())&&(o._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],standalone:!0,features:[Z],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(r,o){r&1&&(p(0,"table",0)(1,"thead",1)(2,"tr"),q(3,"th",2),g()(),p(4,"tbody",3),G("selectedValueChange",function(a){return o._monthSelected(a)})("activeDateChange",function(a){return o._updateActiveDate(a)})("keyup",function(a){return o._handleCalendarBodyKeyup(a)})("keydown",function(a){return o._handleCalendarBodyKeydown(a)}),g()()),r&2&&(v(4),z("label",o._yearLabel)("rows",o._months)("todayValue",o._todayMonth)("startValue",o._selectedMonth)("endValue",o._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",o._dateAdapter.getMonth(o.activeDate)))},dependencies:[Pa],encapsulation:2,changeDetection:0});let t=e;return t})(),yz=1,bD=(()=>{let e=class e{constructor(n,r,o,s,a){this._intl=n,this.calendar=r,this._dateAdapter=o,this._dateFormats=s,this._id=`mat-calendar-header-${yz++}`,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>a.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-Oi)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:Oi)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(n,r){return this.calendar.currentView=="month"?this._dateAdapter.getYear(n)==this._dateAdapter.getYear(r)&&this._dateAdapter.getMonth(n)==this._dateAdapter.getMonth(r):this.calendar.currentView=="year"?this._dateAdapter.getYear(n)==this._dateAdapter.getYear(r):gD(this._dateAdapter,n,r,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let r=this._dateAdapter.getYear(this.calendar.activeDate)-nd(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),o=r+Oi-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1)),a=this._dateAdapter.getYearName(this._dateAdapter.createDate(o,0,1));return[s,a]}};e.\u0275fac=function(r){return new(r||e)(f(od),f(ni(()=>mv)),f(Xi,8),f(Hc,8),f(Le))},e.\u0275cmp=X({type:e,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],standalone:!0,features:[Z],ngContentSelectors:oz,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],[1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"]],template:function(r,o){r&1&&(rt(),p(0,"div",0)(1,"div",1)(2,"label",2),S(3),g(),p(4,"button",3),G("click",function(){return o.currentPeriodClicked()}),p(5,"span",4),S(6),g(),ah(),p(7,"svg",5),q(8,"polygon",6),g()(),TE(),q(9,"div",7),ke(10),p(11,"button",8),G("click",function(){return o.previousClicked()}),g(),p(12,"button",9),G("click",function(){return o.nextClicked()}),g()()()),r&2&&(v(2),z("id",o._periodButtonLabelId),v(),Ve(o.periodButtonDescription),v(),ue("aria-label",o.periodButtonLabel)("aria-describedby",o._periodButtonLabelId),v(2),Ve(o.periodButtonText),v(),oe("mat-calendar-invert",o.calendar.currentView!=="month"),v(4),z("disabled",!o.previousEnabled()),ue("aria-label",o.prevButtonLabel),v(),z("disabled",!o.nextEnabled()),ue("aria-label",o.nextButtonLabel))},dependencies:[ed,Rb],encapsulation:2,changeDetection:0});let t=e;return t})(),mv=(()=>{let e=class e{get startAt(){return this._startAt}set startAt(n){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get selected(){return this._selected}set selected(n){n instanceof tn?this._selected=n:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get minDate(){return this._minDate}set minDate(n){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get maxDate(){return this._maxDate}set maxDate(n){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(n))}get activeDate(){return this._clampedActiveDate}set activeDate(n){this._clampedActiveDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(n){let r=this._currentView!==n?n:null;this._currentView=n,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),r&&this.viewChanged.emit(r)}constructor(n,r,o,s){this._dateAdapter=r,this._dateFormats=o,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Q,this.yearSelected=new Q,this.monthSelected=new Q,this.viewChanged=new Q(!0),this._userSelection=new Q,this._userDragDrop=new Q,this._activeDrag=null,this.stateChanges=new J,this._intlChanges=n.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new $r(this.headerComponent||bD),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(n){let r=n.minDate&&!this._dateAdapter.sameDate(n.minDate.previousValue,n.minDate.currentValue)?n.minDate:void 0,o=n.maxDate&&!this._dateAdapter.sameDate(n.maxDate.previousValue,n.maxDate.currentValue)?n.maxDate:void 0,s=r||o||n.dateFilter;if(s&&!s.firstChange){let a=this._getCurrentViewComponent();a&&(this._changeDetectorRef.detectChanges(),a._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(n){let r=n.value;(this.selected instanceof tn||r&&!this._dateAdapter.sameDate(r,this.selected))&&this.selectedChange.emit(r),this._userSelection.emit(n)}_yearSelectedInMultiYearView(n){this.yearSelected.emit(n)}_monthSelectedInYearView(n){this.monthSelected.emit(n)}_goToDateInView(n,r){this.activeDate=n,this.currentView=r}_dragStarted(n){this._activeDrag=n}_dragEnded(n){this._activeDrag&&(n.value&&this._userDragDrop.emit(n),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}};e.\u0275fac=function(r){return new(r||e)(f(od),f(Xi,8),f(Hc,8),f(Le))},e.\u0275cmp=X({type:e,selectors:[["mat-calendar"]],viewQuery:function(r,o){if(r&1&&(Te(uD,5),Te(mD,5),Te(hD,5)),r&2){let s;te(s=ie())&&(o.monthView=s.first),te(s=ie())&&(o.yearView=s.first),te(s=ie())&&(o.multiYearView=s.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],standalone:!0,features:[et([bz]),gt,Z],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(r,o){if(r&1&&(me(0,sz,0,0,"ng-template",0),p(1,"div",1),me(2,az,1,11)(3,lz,1,6)(4,cz,1,6),g()),r&2){let s;z("cdkPortalOutlet",o._calendarHeaderPortal),v(2),xe(2,(s=o.currentView)==="month"?2:s==="year"?3:s==="multi-year"?4:-1)}},dependencies:[en,em,uD,mD,hD],styles:['.mat-calendar{display:block;font-family:var(--mat-datepicker-calendar-text-font);font-size:var(--mat-datepicker-calendar-text-size)}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size);font-weight:var(--mat-datepicker-calendar-period-button-text-weight);--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color)}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color)}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color)}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color);font-size:var(--mat-datepicker-calendar-header-text-size);font-weight:var(--mat-datepicker-calendar-header-text-weight)}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let t=e;return t})(),fD={transformPanel:$i("transformPanel",[Zt("void => enter-dropdown",Xt("120ms cubic-bezier(0, 0, 0.2, 1)",qg([Ze({opacity:0,transform:"scale(1, 0.8)"}),Ze({opacity:1,transform:"scale(1, 1)"})]))),Zt("void => enter-dialog",Xt("150ms cubic-bezier(0, 0, 0.2, 1)",qg([Ze({opacity:0,transform:"scale(0.7)"}),Ze({transform:"none",opacity:1})]))),Zt("* => void",Xt("100ms linear",Ze({opacity:0})))]),fadeInCalendar:$i("fadeInCalendar",[Lt("void",Ze({opacity:0})),Lt("enter",Ze({opacity:1})),Zt("void => *",Xt("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};var wz=new R("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let t=M(_n);return()=>t.scrollStrategies.reposition()}});function xz(t){return()=>t.scrollStrategies.reposition()}var Cz={provide:wz,deps:[_n],useFactory:xz},Ez=(()=>{let e=class e{constructor(n,r,o,s,a,l){this._elementRef=n,this._changeDetectorRef=r,this._globalModel=o,this._dateAdapter=s,this._rangeSelectionStrategy=a,this._subscriptions=new nt,this._animationDone=new J,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=l.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(n){let r=this._model.selection,o=n.value,s=r instanceof tn;if(s&&this._rangeSelectionStrategy){let a=this._rangeSelectionStrategy.selectionFinished(o,r,n.event);this._model.updateSelection(a,this)}else o&&(s||!this._dateAdapter.sameDate(o,r))&&this._model.add(o);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(n){this._model.updateSelection(n.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(n){this._isAnimating=n.phaseName==="start",this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(n,r){this._model=n?this._globalModel.clone():this._globalModel,this._actionsPortal=n,r&&this._changeDetectorRef.detectChanges()}};e.\u0275fac=function(r){return new(r||e)(f(ee),f(Le),f(Sm),f(Xi),f(pD,8),f(od))},e.\u0275cmp=X({type:e,selectors:[["mat-datepicker-content"]],viewQuery:function(r,o){if(r&1&&Te(mv,5),r&2){let s;te(s=ie())&&(o._calendar=s.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(r,o){r&1&&Jl("@transformPanel.start",function(a){return o._handleAnimationEvent(a)})("@transformPanel.done",function(a){return o._handleAnimationEvent(a)}),r&2&&(Zl("@transformPanel",o._animationState),Ai(o.color?"mat-"+o.color:""),oe("mat-datepicker-content-touch",o.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],standalone:!0,features:[Z],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(r,o){if(r&1&&(p(0,"div",0)(1,"mat-calendar",1),G("yearSelected",function(a){return o.datepicker._selectYear(a)})("monthSelected",function(a){return o.datepicker._selectMonth(a)})("viewChanged",function(a){return o.datepicker._viewChanged(a)})("_userSelection",function(a){return o._handleUserSelection(a)})("_userDragDrop",function(a){return o._handleUserDragDrop(a)}),g(),me(2,dz,0,0,"ng-template",2),p(3,"button",3),G("focus",function(){return o._closeButtonFocused=!0})("blur",function(){return o._closeButtonFocused=!1})("click",function(){return o.datepicker.close()}),S(4),g()()),r&2){let s;oe("mat-datepicker-content-container-with-custom-header",o.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",o._actionsPortal),ue("aria-modal",!0)("aria-labelledby",(s=o._dialogLabelId)!==null&&s!==void 0?s:void 0),v(),z("id",o.datepicker.id)("ngClass",o.datepicker.panelClass)("startAt",o.datepicker.startAt)("startView",o.datepicker.startView)("minDate",o.datepicker._getMinDate())("maxDate",o.datepicker._getMaxDate())("dateFilter",o.datepicker._getDateFilter())("headerComponent",o.datepicker.calendarHeaderComponent)("selected",o._getSelected())("dateClass",o.datepicker.dateClass)("comparisonStart",o.comparisonStart)("comparisonEnd",o.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",o.startDateAccessibleName)("endDateAccessibleName",o.endDateAccessibleName),v(),z("cdkPortalOutlet",o._actionsPortal),v(),oe("cdk-visually-hidden",!o._closeButtonFocused),z("color",o.color||"primary"),v(),Ve(o._closeButtonText)}},dependencies:[wT,mv,Pr,en,ed],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color);color:var(--mat-datepicker-calendar-container-text-color);box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-shape)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-touch-shape);position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[fD.transformPanel,fD.fadeInCalendar]},changeDetection:0});let t=e;return t})();var Iz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["","matDatepickerToggleIcon",""]],standalone:!0});let t=e;return t})(),Tz=(()=>{let e=class e{get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(n){this._disabled=n}constructor(n,r,o){this._intl=n,this._changeDetectorRef=r,this._stateChanges=nt.EMPTY;let s=Number(o);this.tabIndex=s||s===0?s:null}ngOnChanges(n){n.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(n){this.datepicker&&!this.disabled&&(this.datepicker.open(),n.stopPropagation())}_watchStateChanges(){let n=this.datepicker?this.datepicker.stateChanges:F(),r=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:F(),o=this.datepicker?Vt(this.datepicker.openedStream,this.datepicker.closedStream):F();this._stateChanges.unsubscribe(),this._stateChanges=Vt(this._intl.changes,n,r,o).subscribe(()=>this._changeDetectorRef.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(f(od),f(Le),dr("tabindex"))},e.\u0275cmp=X({type:e,selectors:[["mat-datepicker-toggle"]],contentQueries:function(r,o,s){if(r&1&&Xe(s,Iz,5),r&2){let a;te(a=ie())&&(o._customIcon=a.first)}},viewQuery:function(r,o){if(r&1&&Te(uz,5),r&2){let s;te(s=ie())&&(o._button=s.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(r,o){r&1&&G("click",function(a){return o._open(a)}),r&2&&(ue("tabindex",null)("data-mat-calendar",o.datepicker?o.datepicker.id:null),oe("mat-datepicker-toggle-active",o.datepicker&&o.datepicker.opened)("mat-accent",o.datepicker&&o.datepicker.color==="accent")("mat-warn",o.datepicker&&o.datepicker.color==="warn"))},inputs:{datepicker:[N.None,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[N.None,"aria-label","ariaLabel"],disabled:[N.HasDecoratorInputTransform,"disabled","disabled",ye],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],standalone:!0,features:[Qe,gt,Z],ngContentSelectors:mz,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(r,o){r&1&&(rt(hz),p(0,"button",1,0),me(2,fz,2,0,":svg:svg",2),ke(3),g()),r&2&&(z("disabled",o.disabled)("disableRipple",o.disableRipple),ue("aria-haspopup",o.datepicker?"dialog":null)("aria-label",o.ariaLabel||o._intl.openCalendarLabel)("tabindex",o.disabled?-1:o.tabIndex),v(2),xe(2,o._customIcon?-1:2))},dependencies:[Rb],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color)}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color)}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0});let t=e;return t})();var fv=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({providers:[od,Cz],imports:[ki,Jo,Ra,ET,Wr,pe,Ez,Tz,bD,fr]});let t=e;return t})();var Sz=[gb,_b,Wc,ZT,kb,Jo,Fb,qb,$b,Xb,Zb,Jb,ov,Ur,fv],ts=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=U({imports:[Sz,gb,_b,Wc,kb,Jo,Fb,qb,$b,Xb,Zb,Jb,ov,Ur,fv]});let t=e;return t})();var vD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X({type:e,selectors:[["app-header"]],standalone:!0,features:[Z],decls:7,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-white","z-index-3","py-3"],[1,"container"],["href","#","rel","tooltip","title","Designed and Coded by Creative Tim","data-placement","bottom",1,"navbar-brand"],[1,"navbar-brand"],[1,"fas","fa-user"]],template:function(r,o){r&1&&(p(0,"nav",0)(1,"div",1),q(2,"a",2),p(3,"span",3),S(4," Controle financeiro "),g(),p(5,"a",3),q(6,"i",4),g()()())},dependencies:[ts],styles:[".navbar[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:1000;background-color:#333;color:#fff;padding:10px 20px}"]});let t=e;return t})();var Oa=class t{constructor(e,i,n,r){this.nome=e,this.saldoInicial=i,this.renda=n,this.despesa=r}static criarApartirdaLocalStorage(e){return new t(e.nome,e.saldoInicial,e.renda,e.despesa)}mostrarSaldoinicial(){return this.saldoInicial}mostrarTotalRenda(){return this.renda.reduce((e,i)=>e+i.valor,0)}mostrarTotalDespesa(){return this.despesa.reduce((e,i)=>e+i.valor,0)}calcularSaldoAtual(){let e=this.mostrarTotalRenda(),i=this.mostrarTotalDespesa();return this.saldoInicial+e-i}adicionarRenda(e){this.renda.push(e)}adicionarDespesa(e){this.despesa.push(e)}alterarSaldoInicial(e){this.saldoInicial=e}mostrarTransacoes(){let e=[];return this.renda,this.despesa}};var Kr=(()=>{let e=class e{constructor(){this.options=JSON.parse(localStorage.getItem("projetosSelect"))}consultarProjetosLocalStorage(){return!!localStorage.getItem("projetos")}consultarOptionsLocalStorage(){return!!localStorage.getItem("projetosSelect")}criarProjetosDefault(){this.options=["Projeto 1","Projeto 2","Projeto 3"],localStorage.setItem("projetosSelect",JSON.stringify(this.options));let n=[];for(let r of this.options){let o=new Oa(r,0,[],[]);n.push(o)}return localStorage.setItem("projetos",JSON.stringify(n)),localStorage.setItem("ultimoProjeto","Projeto 1"),this.listaProjetos=n,n}criarNovosProjetos(n,r){console.log(this.listaProjetos);let o=new Oa(n,r,[],[]);this.listaProjetos.push(o),console.log(o),this.options.push(n),localStorage.setItem("ultimoProjeto",n),localStorage.setItem("projetos",JSON.stringify(this.listaProjetos)),localStorage.setItem("projetosSelect",JSON.stringify(this.options))}recuperarProjetos(){let n=localStorage.getItem("projetos"),o=JSON.parse(n).map(s=>Oa.criarApartirdaLocalStorage(s));return this.listaProjetos=o,o}buscarUltimoProjetoSelecionado(){return localStorage.getItem("ultimoProjeto")?localStorage.getItem("ultimoProjeto"):"Projeto 3"}retornarProjetoSelecionado(n,r){return n.find(o=>o.nome==r)}mostarRenda(n){return this.listaProjetos.find(o=>o.nome===n).renda}mostarDespesa(n){return this.listaProjetos.find(o=>o.nome===n).despesa}mostrarTransacoes(n){let r=[];return this.listaProjetos.find(o=>o.nome===n).despesa.forEach(o=>{r.push(o)}),this.listaProjetos.find(o=>o.nome===n).renda.forEach(o=>{r.push(o)}),r}excluirProjeto(n){if(this.listaProjetos[1]===void 0)alert("Esse \xE9 o \xFAltimo projeto. Tente edita-lo");else{let r=this.listaProjetos.findIndex(s=>s.nome===n);this.listaProjetos.splice(r,1),localStorage.setItem("projetos",JSON.stringify(this.listaProjetos));let o=this.options.findIndex(s=>s===n);this.options.splice(o,1),localStorage.setItem("projetosSelect",JSON.stringify(this.options)),localStorage.getItem("ultimoProjeto")===n&&localStorage.setItem("ultimoProjeto",this.listaProjetos[0].nome)}}atualizarProjeto(n,r,o){let s=this.listaProjetos.find(l=>l.nome===n);s.nome=r,s.saldoInicial=o;let a=this.options.findIndex(l=>l==n);this.options[a]=r,localStorage.setItem("projetosSelect",JSON.stringify(this.options)),localStorage.setItem("ultimoProjeto",r),localStorage.setItem("projetos",JSON.stringify(this.listaProjetos))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Dz=()=>["/"];function Az(t,e){if(t&1){let i=Je();p(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),G("click",function(){let r=ae(i).$index,o=P();return le(o.chamarColapso(r,!0))}),p(4,"h5",23)(5,"button",24)(6,"h6",25),S(7),g(),p(8,"p",26),S(9),g(),q(10,"i",27)(11,"i",28),g()(),p(12,"div",29)(13,"div",30)(14,"label",11),S(15,"Nomo do projeto"),g(),p(16,"input",12),Ei("ngModelChange",function(r){ae(i);let o=P();return Ci(o.novoProjeto,r)||(o.novoProjeto=r),le(r)}),g(),p(17,"label",11),S(18,"Saldo inicial"),g(),p(19,"input",13),Ei("ngModelChange",function(r){ae(i);let o=P();return Ci(o.saldoInicialProjeto,r)||(o.saldoInicialProjeto=r),le(r)}),g(),p(20,"div",14)(21,"button",31),G("click",function(){let r=ae(i).$index,o=P();return le(o.excluir(r))}),S(22,"Excluir"),g(),p(23,"button",32),G("click",function(){let r=ae(i).$index,o=P();return le(o.atualizarProjeto(r))}),S(24,"Salvar"),g()()()()()()()()}if(t&2){let i=e.$implicit,n=e.$index,r=P();v(5),ue("data-bs-target","#collapseOne"+n),v(2),Ve(i.nome),v(2),Ve(i.calcularSaldoAtual()),v(3),z("id","collapseOne"+n),v(4),xi("ngModel",r.novoProjeto),v(3),xi("ngModel",r.saldoInicialProjeto),v(2),ue("data-bs-target","#collapseOne"+n),v(2),ue("data-bs-target","#collapseOne"+n)}}var yD=(()=>{let e=class e{constructor(n,r){this.projetosSevices=n,this.formBuilder=r}ngOnInit(){this.listaProjetos=this.projetosSevices.recuperarProjetos()}selecionar(){localStorage.setItem("ultimoProjeto",this.projetoSelecionado.nome)}excluir(n){this.projetosSevices.excluirProjeto(this.listaProjetos[n].nome),this.listaProjetos=this.projetosSevices.recuperarProjetos()}criarProjeto(){console.log(this.novoProjeto,this.saldoInicialProjeto),this.saldoInicialProjeto||(this.saldoInicialProjeto=0),this.projetosSevices.criarNovosProjetos(this.novoProjeto,this.saldoInicialProjeto),this.listaProjetos=this.projetosSevices.recuperarProjetos()}chamarColapso(n,r){r?(this.novoProjeto=this.listaProjetos[n].nome,this.saldoInicialProjeto=this.listaProjetos[n].saldoInicial):(this.novoProjeto="",this.saldoInicialProjeto=0)}atualizarProjeto(n){this.saldoInicialProjeto||(this.saldoInicialProjeto=0),this.projetosSevices.atualizarProjeto(this.listaProjetos[n].nome,this.novoProjeto,this.saldoInicialProjeto),this.listaProjetos=this.projetosSevices.recuperarProjetos()}};e.\u0275fac=function(r){return new(r||e)(f(Kr),f(Sa))},e.\u0275cmp=X({type:e,selectors:[["app-editar-projetos"]],standalone:!0,features:[Z],decls:30,vars:4,consts:[[1,"col-lg-9","col-12","mx-auto"],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","z-index-3","py-3"],[1,"container"],["rel","tooltip","title","Designed and Coded by Creative Tim","data-placement","bottom",1,"navbar-brand",3,"routerLink"],[1,"fas","fa-arrow-left"],["href","#","rel","tooltip","title","Designed and Coded by Creative Tim","data-placement","bottom",1,"navbar-brand"],[1,"example-spacer"],[1,"d-flex","justify-content-center","card","card-body","mt-4"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseExample1","aria-expanded","false","aria-controls","collapseExample1",1,"btn","btn-primary",3,"click"],["id","collapseExample1",1,"collapse"],[1,"card","card-body","mt-4"],[1,"form-label"],["type","text","id","nome-projeto","onfocus","focused(this)","onfocusout","defocused(this)",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","saldo-inicial","onfocus","focused(this)","onfocusout","defocused(this)",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","mt-4"],["type","button","name","button","data-bs-toggle","collapse","data-bs-target","#collapseExample1","aria-expanded","false","aria-controls","collapseExample1",1,"btn","btn-light","m-0"],["type","submit","name","button","data-bs-toggle","collapse","data-bs-target","#collapseExample1","aria-expanded","false","aria-controls","collapseExample1",1,"btn","bg-gradient-primary","m-0","ms-2",3,"click"],[1,"card"],[1,"accordion-1"],[1,"row"],[1,"col-md-10","mx-auto"],["id","accordionRental",1,"accordion"],[1,"accordion-item","mb-3",3,"click"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","border-bottom","font-weight-bold","collapsed","botao-sanfona"],[1,"mb-0","text-xs"],[1,"text-xs","text-secondary","mb-0"],["aria-hidden","true",1,"collapse-close","fa","fa-plus","text-xs","pt-1","position-absolute","end-0","me-3"],["aria-hidden","true",1,"collapse-open","fa","fa-minus","text-xs","pt-1","position-absolute","end-0","me-3"],["aria-labelledby","headingOne","data-bs-parent","#accordionRental",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body","text-sm","opacity-8"],["type","button","name","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseOne",1,"btn","btn-light","m-0",3,"click"],["type","submit","name","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseOne",1,"btn","bg-gradient-primary","m-0","ms-2",3,"click"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),q(4,"i",4),g(),p(5,"a",5),S(6," Controle financeiro "),g(),p(7,"a",5),q(8,"span",6),g()()(),p(9,"p",7)(10,"button",8),G("click",function(){return o.chamarColapso(-1,!1)}),S(11," Novo Projeto "),g()(),p(12,"div",9)(13,"div",10)(14,"label",11),S(15,"Nomo do projeto"),g(),p(16,"input",12),Ei("ngModelChange",function(a){return Ci(o.novoProjeto,a)||(o.novoProjeto=a),a}),g(),p(17,"label",11),S(18,"Saldo inicial"),g(),p(19,"input",13),Ei("ngModelChange",function(a){return Ci(o.saldoInicialProjeto,a)||(o.saldoInicialProjeto=a),a}),g(),p(20,"div",14)(21,"button",15),S(22,"Cancelar"),g(),p(23,"button",16),G("click",function(){return o.criarProjeto()}),S(24,"Salvar"),g()()()(),p(25,"div",17)(26,"div",18)(27,"div",2),At(28,Az,25,8,"div",19,na),g()()()()),r&2&&(v(3),z("routerLink",qi(3,Dz)),v(13),xi("ngModel",o.novoProjeto),v(3),xi("ngModel",o.saldoInicialProjeto),v(9),kt(o.listaProjetos))},dependencies:[Bn,Ln,Qc,jn,Zo,qr,Nn],styles:[".botao-sanfona[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:baseline}"]});let t=e;return t})();var Yr=(()=>{let e=class e{constructor(){}consultarCategoriRendaLocalStorage(){return!!localStorage.getItem("categoriasRenda")}consultarCategoriDespesaLocalStorage(){return!!localStorage.getItem("categoriasDespesa")}buscarCategoriasRenda(){if(localStorage.getItem("categoriasRenda")){let n=JSON.parse(localStorage.getItem("categoriasRenda"));return this.categoriasRenda=n,this.categoriasRenda}else{let n=["Salario","Comiss\xE3o","Vendas"];return this.categoriasRenda=n,localStorage.setItem("categoriasRenda",JSON.stringify(this.categoriasRenda)),n}}buscarCategoriasDespesa(){if(localStorage.getItem("categoriasDespesa")){let n=JSON.parse(localStorage.getItem("categoriasDespesa"));return this.categoriasDespesa=n,this.categoriasDespesa}else{let n=["Mercado","Restaurante","Contas"];return this.categoriasDespesa=n,localStorage.setItem("categoriasDespesa",JSON.stringify(this.categoriasDespesa)),n}}editarCategorias(n,r,o){if(n==="renda"){let s=this.categoriasRenda.findIndex(a=>a===r);this.categoriasRenda[s]=o,localStorage.setItem("categoriasRenda",JSON.stringify(this.categoriasRenda))}else{let s=this.categoriasDespesa.findIndex(a=>a===r);this.categoriasDespesa[s]=o,localStorage.setItem("categoriasDespesa",JSON.stringify(this.categoriasDespesa))}}adicionarCategoria(n,r){n==="renda"?(this.categoriasRenda.push(r),localStorage.setItem("categoriasRenda",JSON.stringify(this.categoriasRenda))):(this.categoriasDespesa.push(r),localStorage.setItem("categoriasDespesa",JSON.stringify(this.categoriasDespesa)))}excluirCategoria(n,r){if(n==="renda"){let o=this.categoriasRenda.findIndex(s=>s===r);this.categoriasRenda.splice(o,1),localStorage.setItem("categoriasRenda",JSON.stringify(this.categoriasRenda))}else{let o=this.categoriasDespesa.findIndex(s=>s===r);this.categoriasDespesa.splice(o,1),localStorage.setItem("categoriasDespesa",JSON.stringify(this.categoriasDespesa))}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kz="firebase",Rz="10.10.0";hi(kz,Rz,"app");var nn=new ra("ANGULARFIRE2_VERSION");var Mz=(t,e)=>{let i=e?[e]:Ih(),n=[];return i.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{n.includes(s)||n.push(s)})}),n},gr=class{constructor(){return Mz(Pz)}},Pz="app-check";function pv(){}var km=class{zone;delegate;constructor(e,i=fE){this.zone=e,this.delegate=i}now(){return this.delegate.now()}schedule(e,i,n){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,i,n)}},gv=class{zone;task=null;constructor(e){this.zone=e}call(e,i){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pv,{},pv,pv)),i.pipe(Ke({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},is=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(i){this.ngZone=i,this.outsideAngular=i.runOutsideAngular(()=>new km(Zone.current)),this.insideAngular=i.run(()=>new km(Zone.current,$s)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||t)(_(W))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oz(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Ct(t){return Fz(Oz())(t)}function Fz(t){return function(i){return i=i.lift(new gv(t.ngZone)),i.pipe(Ws(t.outsideAngular),ko(t.insideAngular))}}var Rm=class{constructor(e){return e}},bv=class{constructor(){return Ih()}};function Nz(t){return t&&t.length===1?t[0]:new Rm(sc())}var wD=new R("angularfire2._apps"),Vz={provide:Rm,useFactory:Nz,deps:[[new Hi,wD]]},Lz={provide:bv,deps:[[new Hi,wD]]};var xD=(()=>{class t{constructor(i){hi("angularfire",nn.full,"core"),hi("angularfire",nn.full,"app"),hi("angular",fh.full,i.toString())}static \u0275fac=function(n){return new(n||t)(_(wt))};static \u0275mod=H({type:t});static \u0275inj=U({providers:[Vz,Lz]})}return t})();var jz=new Map,Bz={activated:!1,tokenObservers:[]},zz={initialized:!1,enabled:!1};function bn(t){return jz.get(t)||Object.assign({},Bz)}function DD(){return zz}var Uz="https://content-firebaseappcheck.googleapis.com/v1";var Hz="exchangeDebugToken",CD={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},c7=24*60*60*1e3;var yv=class{constructor(e,i,n,r,o){if(this.operation=e,this.retryPolicy=i,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new Ut,this.pending.promise.catch(i=>{}),yield qz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ut,this.pending.promise.catch(i=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}};function qz(t){return new Promise(e=>{setTimeout(e,t)})}var $z={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Qr=new JE("appCheck","AppCheck",$z);function AD(t){if(!bn(t).activated)throw Qr.create("use-before-activation",{appName:t.name})}function kD(n,r){return C(this,arguments,function*({url:t,body:e},i){let o={"Content-Type":"application/json"},s=i.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(t,a)}catch(m){throw Qr.create("fetch-network-error",{originalErrorMessage:m?.message})}if(l.status!==200)throw Qr.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(m){throw Qr.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Qr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let u=Number(d[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function RD(t,e){let{projectId:i,appId:n,apiKey:r}=t.options;return{url:`${Uz}/projects/${i}/apps/${n}:${Hz}?key=${r}`,body:{debug_token:e}}}var Wz="firebase-app-check-database",Gz=1,wv="firebase-app-check-store";var Mm=null;function Kz(){return Mm||(Mm=new Promise((t,e)=>{try{let i=indexedDB.open(Wz,Gz);i.onsuccess=n=>{t(n.target.result)},i.onerror=n=>{var r;e(Qr.create("storage-open",{originalErrorMessage:(r=n.target.error)===null||r===void 0?void 0:r.message}))},i.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(wv,{keyPath:"compositeKey"})}}}catch(i){e(Qr.create("storage-open",{originalErrorMessage:i?.message}))}}),Mm)}function Yz(t,e){return Qz(Xz(t),e)}function Qz(t,e){return C(this,null,function*(){let n=(yield Kz()).transaction(wv,"readwrite"),o=n.objectStore(wv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},n.onerror=l=>{var c;a(Qr.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function Xz(t){return`${t.options.appId}-${t.name}`}var xv=new Fr("@firebase/app-check");function vv(t,e){return yh()?Yz(t,e).catch(i=>{xv.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}function MD(){return DD().enabled}function PD(){return C(this,null,function*(){let t=DD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Zz={error:"UNKNOWN_ERROR"};function Jz(t){return bh.encodeString(JSON.stringify(t),!1)}function Cv(t,e=!1){return C(this,null,function*(){let i=t.app;AD(i);let n=bn(i),r=n.token,o;if(r&&!sd(r)&&(n.token=void 0,r=void 0),!r){let l=yield n.cachedTokenPromise;l&&(sd(l)?r=l:yield vv(i,void 0))}if(!e&&r&&sd(r))return{token:r.token};let s=!1;if(MD()){n.exchangeTokenPromise||(n.exchangeTokenPromise=kD(RD(i,yield PD()),t.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),s=!0);let l=yield n.exchangeTokenPromise;return yield vv(i,l),n.token=l,{token:l.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),s=!0),r=yield bn(i).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?xv.warn(l.message):xv.error(l),o=l}let a;return r?o?sd(r)?a={token:r.token,internalError:o}:a=ID(o):(a={token:r.token},n.token=r,yield vv(i,r)):a=ID(o),s&&nU(i,a),a})}function eU(t){return C(this,null,function*(){let e=t.app;AD(e);let{provider:i}=bn(e);if(MD()){let n=yield PD(),{token:r}=yield kD(RD(e,n),t.heartbeatServiceProvider);return{token:r}}else{let{token:n}=yield i.getToken();return{token:n}}})}function tU(t,e,i,n){let{app:r}=t,o=bn(r),s={next:i,error:n,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sd(o.token)){let a=o.token;Promise.resolve().then(()=>{i({token:a.token}),ED(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ED(t))}function OD(t,e){let i=bn(t),n=i.tokenObservers.filter(r=>r.next!==e);n.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),i.tokenObservers=n}function ED(t){let{app:e}=t,i=bn(e),n=i.tokenRefresher;n||(n=iU(t),i.tokenRefresher=n),!n.isRunning()&&i.isTokenAutoRefreshEnabled&&n.start()}function iU(t){let{app:e}=t;return new yv(()=>C(this,null,function*(){let i=bn(e),n;if(i.token?n=yield Cv(t,!0):n=yield Cv(t),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let i=bn(e);if(i.token){let n=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5,r=i.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,r),Math.max(0,n-Date.now())}else return 0},CD.RETRIAL_MIN_WAIT,CD.RETRIAL_MAX_WAIT)}function nU(t,e){let i=bn(t).tokenObservers;for(let n of i)try{n.type==="EXTERNAL"&&e.error!=null?n.error(e.error):n.next(e)}catch{}}function sd(t){return t.expireTimeMillis-Date.now()>0}function ID(t){return{token:Jz(Zz),error:t}}var Ev=class{constructor(e,i){this.app=e,this.heartbeatServiceProvider=i}_delete(){let{tokenObservers:e}=bn(this.app);for(let i of e)OD(this.app,i.next);return Promise.resolve()}};function rU(t,e){return new Ev(t,e)}function oU(t){return{getToken:e=>Cv(t,e),getLimitedUseToken:()=>eU(t),addTokenListener:e=>tU(t,"INTERNAL",e),removeTokenListener:e=>OD(t.app,e)}}var sU="@firebase/app-check",aU="0.8.3";var lU="app-check",TD="app-check-internal";function cU(){Bo(new Ri(lU,t=>{let e=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat");return rU(e,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider(TD).initialize()})),Bo(new Ri(TD,t=>{let e=t.getProvider("app-check").getImmediate();return oU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),hi(sU,aU)}cU();var dU=["localhost","0.0.0.0","127.0.0.1"],w7=typeof window<"u"&&dU.includes(window.location.hostname);var uU="firebase",hU="10.10.0";Bt.registerVersion(uU,hU,"app-compat");var mU=["ngOnDestroy"],ND=(t,e,i,n={})=>new Proxy(t,{get:(r,o)=>i.runOutsideAngular(()=>{if(t[o])return n?.spy?.get&&n.spy.get(o,t[o]),t[o];if(mU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>i.run(()=>c)):i.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(d=>{let u=d?.(...c);return n?.spy?.apply&&n.spy.apply(o,c,u),u})})})});var Pm=class{constructor(e){return e}},Xr=new R("angularfire2.app.options"),Zr=new R("angularfire2.app.name");function ns(t,e,i){let n=typeof i=="string"&&i||"[DEFAULT]",r=typeof i=="object"&&i||{};r.name=r.name||n;let s=Bt.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Bt.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;fU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Pm(s)}var fU=(t,...e)=>{oa()&&typeof console<"u"&&console[t](...e)},pU={provide:Pm,useFactory:ns,deps:[Xr,W,[new Hi,Zr]]},Om=(()=>{class t{static initializeApp(i,n){return{ngModule:t,providers:[{provide:Xr,useValue:i},{provide:Zr,useValue:n}]}}constructor(i){Bt.registerVersion("angularfire",nn.full,"core"),Bt.registerVersion("angularfire",nn.full,"app-compat"),Bt.registerVersion("angular",fh.full,i.toString())}static \u0275fac=function(n){return new(n||t)(_(wt))};static \u0275mod=H({type:t});static \u0275inj=U({providers:[pU]})}return t})();function Fa(t,e,i,n,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return gU(r,s)||(FD("error",`${e} was already initialized on the ${i} Firebase App with different settings.${_U?" You may need to reload as Firebase is not HMR aware.":""}`),FD("warn",{is:r,was:s})),o;{let a=n();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function gU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var _U=typeof module<"u"&&!!module.hot,FD=(t,...e)=>{oa()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ad=new R("angularfire2.auth.use-emulator"),ld=new R("angularfire2.auth.settings"),cd=new R("angularfire2.auth.tenant-id"),dd=new R("angularfire2.auth.langugage-code"),ud=new R("angularfire2.auth.use-device-language"),hd=new R("angularfire.auth.persistence"),md=(t,e,i,n,r,o,s,a)=>Fa(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(i&&l.useEmulator(...i),n&&(l.tenantId=n),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[c,d]of Object.entries(s))l.settings[c]=d;return a&&l.setPersistence(a),l},[i,n,r,o,s,a]),rs=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(i,n,r,o,s,a,l,c,d,u,h,m){let b=new J,y=F(void 0).pipe(ko(s.outsideAngular),qe(()=>o.runOutsideAngular(()=>import("./chunk-V4B23IKM.js"))),B(()=>ns(i,o,n)),B(E=>md(E,o,a,c,d,u,l,h)),Xs({bufferSize:1,refCount:!1}));if(jo(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{y.pipe(kn()).subscribe();let E=y.pipe(qe($=>$.getRedirectResult().then(be=>be,()=>null)),Ct,Xs({bufferSize:1,refCount:!1})),j=y.pipe(qe($=>new yt(be=>({unsubscribe:o.runOutsideAngular(()=>$.onAuthStateChanged(Ie=>be.next(Ie),Ie=>be.error(Ie),()=>be.complete()))})))),re=y.pipe(qe($=>new yt(be=>({unsubscribe:o.runOutsideAngular(()=>$.onIdTokenChanged(Ie=>be.next(Ie),Ie=>be.error(Ie),()=>be.complete()))}))));this.authState=E.pipe(Fg(j),Ws(s.outsideAngular),ko(s.insideAngular)),this.user=E.pipe(Fg(re),Ws(s.outsideAngular),ko(s.insideAngular)),this.idToken=this.user.pipe(qe($=>$?pt($.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(qe($=>$?pt($.getIdTokenResult()):F(null))),this.credential=Vt(E,b,this.authState.pipe(He($=>!$))).pipe(B($=>$?.user?$:null),Ws(s.outsideAngular),ko(s.insideAngular))}return ND(this,y,o,{spy:{apply:(E,j,re)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&re.then($=>b.next($))}}})}static \u0275fac=function(n){return new(n||t)(_(Xr),_(Zr,8),_(wt),_(W),_(is),_(ad,8),_(ld,8),_(cd,8),_(dd,8),_(ud,8),_(hd,8),_(gr,8))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),Fm=(()=>{class t{constructor(){Bt.registerVersion("angularfire",nn.full,"auth-compat")}static \u0275fac=function(n){return new(n||t)};static \u0275mod=H({type:t});static \u0275inj=U({providers:[rs]})}return t})();var Nm=(()=>{let e=class e{constructor(n,r){this.auth=n,this.router=r,this.userSubject=new Qt(null)}login(n,r){return C(this,null,function*(){try{let o=yield this.auth.signInWithEmailAndPassword(n,r);return this.user=o.user.multiFactor,this.setUserSubject(this.user),this.router.navigate(["/"]),o.user.multiFactor}catch(o){return this.erro=o,o}})}setUserSubject(n){sessionStorage.setItem("user",btoa(JSON.stringify(n.user.email))),sessionStorage.setItem("token",btoa(JSON.stringify(n.user.accessToken))),this.userSubject.next(n)}};e.\u0275fac=function(r){return new(r||e)(_(rs),_(Ac))},e.\u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bU=()=>["adicionar-despesa"],vU=()=>["adicionar-renda"];function yU(t,e){if(t&1&&(p(0,"option",7),S(1),g()),t&2){let i=e.$implicit;z("value",i),v(),Ve(i)}}function wU(t,e){if(t&1&&(p(0,"li",20)(1,"div",24)(2,"div",25)(3,"a",26),q(4,"i",27),g(),p(5,"span",28),S(6),g(),p(7,"span",29),S(8),g()(),p(9,"div")(10,"div",30),q(11,"div",31),g()()()()),t&2){let i=e.$implicit,n=P();v(6),Ve(i.categoria),v(2),wi("",(i.valor/n.despesa*100).toFixed(2),"%"),v(3),mn("width",i.valor/n.despesa*100,"%"),z("ngClass","w-"+i.valor/n.despesa*100)}}var Vm=(()=>{let e=class e{constructor(n,r,o){this.createPojectService=n,this.categoriasService=r,this.authService=o,this.despesaRenda="Despesa",this.detalhesPorCategoria=[],this.teste=100,this.corBotao=!0}ngOnInit(){this.carregarProjetos(this.createPojectService.consultarProjetosLocalStorage()),this.primeirosOptions=(localStorage.getItem("projetosSelect")?.slice(2,-2)).split('","'),this.opcaoSelecionada=this.createPojectService.buscarUltimoProjetoSelecionado(),this.listaCategorias=this.categoriasService.buscarCategoriasRenda(),this.mostrarResultados()}carregarProjetos(n){n===!1?this.listaProjetos=this.createPojectService.criarProjetosDefault():this.listaProjetos=this.createPojectService.recuperarProjetos()}salvarProjetoSelecionado(){localStorage.setItem("ultimoProjeto",this.opcaoSelecionada),this.mostrarResultados()}mostrarResultados(){let n=this.listaProjetos.find(r=>r.nome==this.opcaoSelecionada);this.saldoInicial=n.mostrarSaldoinicial(),this.renda=n.mostrarTotalRenda(),this.despesa=n.mostrarTotalDespesa(),this.saldoFinal=n.calcularSaldoAtual(),this.mostrarValoresPorCategoria("renda")}mostrarValoresPorCategoria(n){let r=this.listaProjetos.find(s=>s.nome==this.opcaoSelecionada),o=[];if(n==="renda"){this.corBotao=!0;let s=r.renda.reduce((a,l)=>{let{categoria:c,valor:d}=l;return a[c]||(a[c]={categoria:c,valor:0}),a[c].valor+=d,a},{});for(let a in s)o.push(s[a])}else{this.corBotao=!1;let s=r.despesa.reduce((a,l)=>{let{categoria:c,valor:d}=l;return a[c]||(a[c]={categoria:c,valor:0}),a[c].valor+=d,a},{});for(let a in s)o.push(s[a])}this.detalhesPorCategoria=o}};e.\u0275fac=function(r){return new(r||e)(f(Kr),f(Yr),f(Nm))},e.\u0275cmp=X({type:e,selectors:[["app-home"]],standalone:!0,features:[Z],decls:54,vars:13,consts:[[1,"g-sidenav-show","bg-gray-100"],[1,"main-content","position-relative","border-radius-lg"],[1,"card","card-body","mt-4"],[1,"row","mt-4"],[1,"form-group"],["for","example-search-input",1,"form-control-label"],[1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn","btn-primary",2,"height","3rem"],["id","collapseExample",1,"collapse"],[1,"row"],[1,"col-6"],["type","button","name","button",1,"btn","bg-gradient-primary","col-12",3,"routerLink"],["type","button","name","button",1,"btn","btn-light","col-12",3,"routerLink"],[1,"nav","nav-justified",2,"margin-bottom","1.5rem","background-color","#f7f9fa","border-radius","1rem","padding",".25rem"],[1,"nav-item"],[1,"nav-link","active",3,"click"],[1,"nav-link",3,"click"],["id","myTabContent",1,"tab-content"],[1,"list-group"],[1,"list-group-item","border-0","d-flex","align-items-center","px-0","mb-2"],[1,"divmaeresultado"],[1,"divResultadoTitulos"],[1,"divResultadoValor"],[1,"w-100"],[1,"d-flex","align-items-center","mb-2"],["href","javascript:;",1,"btn","btn-slack","btn-simple","mb-0","p-0"],["aria-hidden","true",1,"fab","fa-slack","fa-lg"],[1,"me-2","text-sm","font-weight-bold","text-capitalize","ms-2"],[1,"ms-auto","text-sm","font-weight-bold"],[1,"progress","progress-md"],["role","progressbar","aria-valuenow","15","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-gradient-dark",3,"ngClass"]],template:function(r,o){r&1&&(p(0,"body",0)(1,"main",1),q(2,"app-header"),p(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),S(7,"\xA0"),g(),p(8,"select",6),Ei("ngModelChange",function(a){return Ci(o.opcaoSelecionada,a)||(o.opcaoSelecionada=a),a}),G("change",function(){return o.salvarProjetoSelecionado()}),At(9,yU,2,2,"option",7,ui),g()()(),p(11,"p",3)(12,"button",8),S(13," Adicionar Tranca\xE7\xE3o "),g()(),p(14,"div",9)(15,"div",10)(16,"div",11)(17,"button",12),S(18,"Despesa"),g()(),p(19,"div",11)(20,"button",13),S(21,"Renda"),g()()()()(),p(22,"div",2)(23,"ul",14)(24,"li",15)(25,"a",16),G("click",function(){return o.mostrarValoresPorCategoria("renda")}),S(26," Renda "),g()(),p(27,"li",15)(28,"a",17),G("click",function(){return o.mostrarValoresPorCategoria("despesa")}),S(29," Despesa "),g()()(),p(30,"div",18)(31,"ul",19),At(32,wU,12,5,"li",20,na),g()()(),p(34,"div",2)(35,"div",21)(36,"div",22)(37,"div"),S(38,"Saldo inicial:"),g(),p(39,"div"),S(40,"Renda:"),g(),p(41,"div"),S(42,"Despesa:"),g(),p(43,"div"),S(44,"Saldo final:"),g()(),p(45,"div",23)(46,"div"),S(47),g(),p(48,"div"),S(49),g(),p(50,"div"),S(51),g(),p(52,"div"),S(53),g()()()()()()),r&2&&(v(8),xi("ngModel",o.opcaoSelecionada),v(),kt(o.primeirosOptions),v(8),z("routerLink",qi(11,bU)),v(3),z("routerLink",qi(12,vU)),v(5),oe("corBotao",o.corBotao),v(3),oe("corBotao",!o.corBotao),v(4),kt(o.detalhesPorCategoria),v(15),Ve(o.saldoInicial),v(2),Ve(o.renda),v(2),Ve(o.despesa),v(2),Ve(o.saldoFinal))},dependencies:[ts,Nn,Bn,bm,vm,Ta,jn,Zo,vD,ki,Pr],styles:["body[_ngcontent-%COMP%]{background-color:#82928d;margin:auto;border-radius:.5rem;height:92vh}.divmaeresultado[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:90%}.divResultadoTitulos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:end;width:47%}.divResultadoValor[_ngcontent-%COMP%]{display:flex;flex-direction:column}.corBotao[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:1rem}"]});let t=e;return t})();var xU=()=>["editar-projetos"],CU=()=>["editar-cateforias"],LD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X({type:e,selectors:[["app-configuracoes"]],standalone:!0,features:[Z],decls:21,vars:4,consts:[[1,"col-lg-9","col-12","mx-auto"],[1,"card","card-body","mt-4"],[1,"table-responsive"],[1,"table","align-items-center","mb-0"],[1,"d-flex","px-2",3,"routerLink"],[1,"my-auto"],[1,"mb-0","text-xs"]],template:function(r,o){r&1&&(p(0,"body",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"tbody")(5,"tr")(6,"td")(7,"div")(8,"a",4),q(9,"div"),p(10,"div",5)(11,"h2",6),S(12,"Editar Projetos"),g()()()()()(),p(13,"tr")(14,"td")(15,"div")(16,"a",4),q(17,"div"),p(18,"div",5)(19,"h2",6),S(20,"Editar Categorias"),g()()()()()()()()()()()),r&2&&(v(8),z("routerLink",qi(2,xU)),v(8),z("routerLink",qi(3,CU)))},dependencies:[Nn],styles:["body[_ngcontent-%COMP%]{margin:auto;border-radius:.5rem;height:92vh}"]});let t=e;return t})();var jD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X({type:e,selectors:[["app-main"]],standalone:!0,features:[Z],decls:7,vars:0,consts:[["headerPosition","below"],["label","Home"],["label","Relat\xF3rios"],["label","Op\xE7\xF5es"]],template:function(r,o){r&1&&(p(0,"mat-tab-group",0)(1,"mat-tab",1),q(2,"app-home"),g(),p(3,"mat-tab",2),q(4,"app-home"),g(),p(5,"mat-tab",3),q(6,"app-configuracoes"),g()())},dependencies:[ts,Qb,JS,Vm,LD],styles:["mat-tab-group[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;z-index:999}"]});let t=e;return t})();var EU=()=>[""];function IU(t,e){if(t&1&&(p(0,"option",8),S(1),g()),t&2){let i=e.$implicit;z("value",i),v(),Ve(i)}}var Lm=(()=>{let e=class e{constructor(n){this.formBuilder=n,this.dadosEnviados=new Q,this.titulo="",this.categorias=[]}ngOnInit(){this.transacoes=this.formBuilder.group({valor:["",[Zi.required]],categoria:["",[Zi.required]],descricao:["",[Zi.required]],data:[this.obterDataAtualFormatada(),[Zi.required]],hora:[this.obterHoraAtual(),[Zi.required]]})}obterHoraAtual(){let n=new Date,r=n.getHours(),o=n.getMinutes();return`${r}:${o}`}obterDataAtualFormatada(){let n=new Date,r=n.getFullYear(),o=this.formatarData(n.getMonth()+1),s=this.formatarData(n.getDate());return`${r}-${o}-${s}`}formatarData(n){return n<10?`0${n}`:`${n}`}subimtForm(){console.log(this.transacoes.value),this.dadosEnviados.emit(this.transacoes.value),this.transacoes.patchValue({valor:"",descricao:""})}};e.\u0275fac=function(r){return new(r||e)(f(Sa))},e.\u0275cmp=X({type:e,selectors:[["app-transacao"]],inputs:{titulo:"titulo",categorias:"categorias"},outputs:{dadosEnviados:"dadosEnviados"},standalone:!0,features:[Z],decls:27,vars:4,consts:[[1,"col-lg-9","col-12","mx-auto"],[1,"card","card-body","mt-4",3,"ngSubmit","formGroup"],[1,"mb-0"],[1,"horizontal","dark","my-3"],["type","number","id","projectName","onfocus","focused(this)","onfocusout","defocused(this)","formControlName","valor",1,"form-control"],[1,"form-group"],["for","example-search-input",1,"form-control-label"],["formControlName","categoria",1,"form-control"],[3,"value"],["type","text","id","projectName","onfocus","focused(this)","onfocusout","defocused(this)","formControlName","descricao",1,"form-control"],[1,"row"],[1,"col-6"],[1,"form-label"],["type","date","placeholder","Please select start date","data-input","","onfocus","focused(this)","onfocusout","defocused(this)","formControlName","data",1,"form-control","datetimepicker","flatpickr-input"],["type","time","placeholder","Please select end date","data-input","","onfocus","focused(this)","onfocusout","defocused(this)","formControlName","hora",1,"form-control","datetimepicker","flatpickr-input"],[1,"d-flex","justify-content-end","mt-4"],["type","button","name","button",1,"btn","btn-light","m-0",3,"routerLink"],["type","submit","name","button",1,"btn","bg-gradient-primary","m-0","ms-2"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"form",1),G("ngSubmit",function(){return o.subimtForm()}),p(2,"h1",2),S(3),g(),q(4,"hr",3)(5,"input",4),p(6,"div",5)(7,"label",6),S(8,"\xA0"),g(),p(9,"select",7),At(10,IU,2,2,"option",8,ui),g()(),q(12,"input",9),p(13,"div",10)(14,"div",11)(15,"label",12),S(16,"Data"),g(),q(17,"input",13),g(),p(18,"div",11)(19,"label",12),S(20,"Hora"),g(),q(21,"input",14),g()(),p(22,"div",15)(23,"button",16),S(24,"Cancelar"),g(),p(25,"button",17),S(26,"Salvar"),g()()()()),r&2&&(v(),z("formGroup",o.transacoes),v(2),Ve(o.titulo),v(7),kt(o.categorias),v(13),z("routerLink",qi(3,EU)))},dependencies:[Bn,_m,bm,vm,Ln,Qc,Ta,jn,mm,qr,Xc,Zc,Nn]});let t=e;return t})();var Sv=(()=>{let e=class e{constructor(n,r){this.projetosService=n,this.categorias=r,this.tituloHeader="Adicionar despesa"}ngOnInit(){this.ultimoProjeto=this.projetosService.buscarUltimoProjetoSelecionado(),this.listaProjetos=this.projetosService.recuperarProjetos(),this.listaCategorias=this.categorias.buscarCategoriasDespesa()}receberDados(n){this.listaProjetos.find(r=>r.nome==this.ultimoProjeto).adicionarDespesa(n),localStorage.setItem("projetos",JSON.stringify(this.listaProjetos))}};e.\u0275fac=function(r){return new(r||e)(f(Kr),f(Yr))},e.\u0275cmp=X({type:e,selectors:[["app-adicionar-despesa"]],standalone:!0,features:[Z],decls:1,vars:2,consts:[[3,"dadosEnviados","titulo","categorias"]],template:function(r,o){r&1&&(p(0,"app-transacao",0),G("dadosEnviados",function(a){return o.receberDados(a)}),g()),r&2&&(hh("titulo",o.tituloHeader),z("categorias",o.listaCategorias))},dependencies:[Lm]});let t=e;return t})();var BD=(()=>{let e=class e{constructor(n,r){this.projetoSevice=n,this.categorias=r,this.tituloHeader="Adicionar renda"}ngOnInit(){this.ultimoProjeto=this.projetoSevice.buscarUltimoProjetoSelecionado(),this.listaProjetos=this.projetoSevice.recuperarProjetos(),this.listaCategorias=this.categorias.buscarCategoriasRenda(),console.log(this.listaCategorias)}receberDados(n){this.listaProjetos.find(r=>r.nome==this.ultimoProjeto).adicionarRenda(n),localStorage.setItem("projetos",JSON.stringify(this.listaProjetos))}};e.\u0275fac=function(r){return new(r||e)(f(Kr),f(Yr))},e.\u0275cmp=X({type:e,selectors:[["app-adicionar-renda"]],standalone:!0,features:[Z],decls:1,vars:2,consts:[[3,"dadosEnviados","titulo","categorias"]],template:function(r,o){r&1&&(p(0,"app-transacao",0),G("dadosEnviados",function(a){return o.receberDados(a)}),g()),r&2&&(hh("titulo",o.tituloHeader),z("categorias",o.listaCategorias))},dependencies:[Lm]});let t=e;return t})();var TU=()=>["/"];function SU(t,e){if(t&1){let i=Je();p(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"h5",25)(5,"button",26),S(6),q(7,"i",27)(8,"i",28),g()(),p(9,"div",29)(10,"div",30)(11,"label",15),S(12,"Nome da categoria"),g(),p(13,"input",16),Ei("ngModelChange",function(r){ae(i);let o=P();return Ci(o.inputCategoria,r)||(o.inputCategoria=r),le(r)}),g(),p(14,"div",17)(15,"button",31),G("click",function(){let r=ae(i).$implicit,o=P();return le(o.excluirCategoria(r))}),S(16,"Excluir"),g(),p(17,"button",32),G("click",function(){let r=ae(i).$implicit,o=P();return le(o.editarCategoria(r))}),S(18,"Salvar"),g()()()()()()()()}if(t&2){let i=e.$implicit,n=e.$index,r=P();v(5),ue("data-bs-target","#collapseOne"+n),v(),wi(" ",i," "),v(3),z("id","collapseOne"+n),v(4),xi("ngModel",r.inputCategoria),v(2),ue("data-bs-target","#collapseOne"+n),v(2),ue("data-bs-target","#collapseOne"+n)}}var zD=(()=>{let e=class e{constructor(n){this.categoriasService=n,this.categoriasRenda=[],this.categoriasDespesa=[],this.listaCategorias=[],this.inputCategoria="",this.corBotao=!0}ngOnInit(){this.categoriasRenda=this.categoriasService.buscarCategoriasRenda(),this.categoriasDespesa=this.categoriasService.buscarCategoriasDespesa(),this.listaCategorias=this.categoriasRenda,this.rendaDespesa="renda",console.log(this.categoriasDespesa,this.categoriasRenda)}excluirCategoria(n){this.categoriasService.excluirCategoria(this.rendaDespesa,n)}editarCategoria(n){this.categoriasService.editarCategorias(this.rendaDespesa,n,this.inputCategoria),this.inputCategoria=""}criarCategoria(){this.categoriasService.adicionarCategoria(this.rendaDespesa,this.inputCategoria),this.inputCategoria=""}mudarRendaDespesa(n){this.rendaDespesa=n,n==="renda"?(this.listaCategorias=this.categoriasRenda,this.corBotao=!0):(this.listaCategorias=this.categoriasDespesa,this.corBotao=!1)}};e.\u0275fac=function(r){return new(r||e)(f(Yr))},e.\u0275cmp=X({type:e,selectors:[["app-editar-categorias"]],standalone:!0,features:[Z],decls:34,vars:7,consts:[[1,"col-lg-9","col-12","mx-auto"],[1,"navbar","navbar-expand-lg","navbar-light","bg-white","z-index-3","py-3"],[1,"container"],["rel","tooltip","title","Designed and Coded by Creative Tim","data-placement","bottom",1,"navbar-brand",3,"routerLink"],[1,"fas","fa-arrow-left"],["href","#","rel","tooltip","title","Designed and Coded by Creative Tim","data-placement","bottom",1,"navbar-brand"],[1,"example-spacer"],[1,"d-flex","justify-content-center","card","card-body","mt-4"],[1,"nav","nav-justified",2,"margin-bottom","1.5rem","background-color","#f7f9fa","border-radius","1rem","padding",".25rem"],[1,"nav-item"],[1,"nav-link","active",3,"click"],[1,"nav-link",3,"click"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseExample1","aria-expanded","false","aria-controls","collapseExample1",1,"btn","btn-primary"],["id","collapseExample1",1,"collapse"],[1,"card","card-body","mt-4"],[1,"form-label"],["type","text","id","nome-projeto","onfocus","focused(this)","onfocusout","defocused(this)",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-end","mt-4"],["type","button","name","button","data-bs-toggle","collapse","data-bs-target","#collapseExample1","aria-expanded","false","aria-controls","collapseExample1",1,"btn","btn-light","m-0"],["type","submit","name","button","data-bs-toggle","collapse","data-bs-target","#collapseExample1","aria-expanded","false","aria-controls","collapseExample1",1,"btn","bg-gradient-primary","m-0","ms-2",3,"click"],[1,"accordion-1"],[1,"row"],[1,"col-md-10","mx-auto"],["id","accordionRental",1,"accordion"],[1,"accordion-item","mb-3"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseOne",1,"accordion-button","border-bottom","font-weight-bold","collapsed"],["aria-hidden","true",1,"collapse-close","fa","fa-plus","text-xs","pt-1","position-absolute","end-0","me-3"],["aria-hidden","true",1,"collapse-open","fa","fa-minus","text-xs","pt-1","position-absolute","end-0","me-3"],["aria-labelledby","headingOne","data-bs-parent","#accordionRental",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body","text-sm","opacity-8"],["type","button","name","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseOne",1,"btn","btn-light","m-0",3,"click"],["type","submit","name","button","data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseOne",1,"btn","bg-gradient-primary","m-0","ms-2",3,"click"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),q(4,"i",4),g(),p(5,"a",5),S(6," Controle financeiro "),g(),p(7,"a",5),q(8,"span",6),g()()(),p(9,"div",7)(10,"ul",8)(11,"li",9)(12,"a",10),G("click",function(){return o.mudarRendaDespesa("renda")}),S(13," Renda "),g()(),p(14,"li",9)(15,"a",11),G("click",function(){return o.mudarRendaDespesa("despesa")}),S(16," Despesa "),g()()(),p(17,"button",12),S(18," Nova Categoria "),g()(),p(19,"div",13)(20,"div",14)(21,"label",15),S(22,"Nome da categoria"),g(),p(23,"input",16),Ei("ngModelChange",function(a){return Ci(o.inputCategoria,a)||(o.inputCategoria=a),a}),g(),p(24,"div",17)(25,"button",18),S(26,"Cancelar"),g(),p(27,"button",19),G("click",function(){return o.criarCategoria()}),S(28,"Salvar"),g()()()(),p(29,"div",14)(30,"div",20)(31,"div",2),At(32,SU,19,6,"div",21,na),g()()()()),r&2&&(v(3),z("routerLink",qi(6,TU)),v(9),oe("corBotao",o.corBotao),v(3),oe("corBotao",!o.corBotao),v(8),xi("ngModel",o.inputCategoria),v(9),kt(o.listaCategorias))},dependencies:[Nn,Bn,Ln,jn,Zo,qr],styles:[".corBotao[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:1rem}"]});let t=e;return t})();function DU(t,e){t&1&&(p(0,"span"),S(1," Entrar "),g())}function AU(t,e){t&1&&(p(0,"span"),q(1,"span",32),S(2," Loading... "),g())}var UD=(()=>{let e=class e{constructor(n,r){this.formBuilder=n,this.authService=r,this.initRequest=!1}ngOnInit(){this.inicializarFormulario()}inicializarFormulario(){this.loginUsuario=this.formBuilder.group({email:["",[Zi.required,Zi.email]],senha:["",[Zi.required]]})}submitForm(){this.initRequest=!0,this.authService.login(this.loginUsuario.value.email,this.loginUsuario.value.senha).then(n=>{console.log(n),this.initRequest=!1})}};e.\u0275fac=function(r){return new(r||e)(f(Sa),f(Nm))},e.\u0275cmp=X({type:e,selectors:[["app-login"]],standalone:!0,features:[Z],decls:47,vars:4,consts:[["confirmacao","ngForm"],[1,"main-content","mt-0","ps"],[1,"page-header","align-items-start","min-vh-50","pt-7","pb-9","m-3","border-radius-lg",2,"background-image","url('./assets/img/finance.jpeg')"],[1,"mask","bg-gradient-dark","opacity-6"],[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-5","text-center","mx-auto"],[1,"text-white","mb-2","mt-5"],[1,"text-lead","text-white"],[1,"row","mt-lg-n10","mt-md-n11","mt-n10","justify-content-center"],[1,"col-xl-4","col-lg-5","col-md-7","mx-auto"],[1,"card","mt-5"],[1,"card-header","pb-0","text-start"],[1,"font-weight-bolder"],[1,"mb-0"],[1,"card-body"],["role","form",1,"text-start",3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","placeholder","Email ou Matr\xEDcula","aria-label","Email ou Matr\xEDcula","formControlName","email",1,"form-control"],["type","password","placeholder","Senha","aria-label","Senha","formControlName","senha",1,"form-control"],[1,"form-check","form-switch"],["type","checkbox","id","rememberMe","checked","",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],[1,"text-center"],["type","submit",1,"btn","btn-lg","btn-primary","btn-lg","w-100","mt-4","mb-0",3,"disabled"],[1,"card-footer","text-center","pt-0","px-lg-2","px-1"],[1,"mb-4","text-sm","mx-auto"],["href","javascript:;",1,"text-primary","font-weight-bold"],[1,"ps__rail-x",2,"left","0px","bottom","0px"],["tabindex","0",1,"ps__thumb-x",2,"left","0px","width","0px"],[1,"ps__rail-y",2,"top","0px","right","0px"],["tabindex","0",1,"ps__thumb-y",2,"top","0px","height","0px"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,o){if(r&1){let s=Je();p(0,"main",1)(1,"div",2),q(2,"span",3),p(3,"div",4)(4,"div",5)(5,"div",6)(6,"h1",7),S(7,"Bem-vindo!"),g(),p(8,"p",8),S(9,"Controle Financeiro."),g()()()()(),p(10,"div",4)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"h3",13),S(16,"Informa\xE7\xF5es de login"),g(),p(17,"p",14),S(18,"Informe suas credenciais para acessar."),g()(),p(19,"div",15)(20,"form",16,0),G("ngSubmit",function(){return ae(s),le(o.submitForm())}),p(22,"label"),S(23,"Email"),g(),p(24,"div",17),q(25,"input",18),g(),p(26,"label"),S(27,"Senha"),g(),p(28,"div",17),q(29,"input",19),g(),p(30,"div",20),q(31,"input",21),p(32,"label",22),S(33,"Lembrar-me"),g()(),p(34,"div",23)(35,"button",24),me(36,DU,2,0,"span")(37,AU,3,0,"span"),g()()()(),p(38,"div",25)(39,"p",26),S(40," N\xE3o tem conta? "),p(41,"a",27),S(42,"Cadastre-se"),g()()()()()()(),p(43,"div",28),q(44,"div",29),g(),p(45,"div",30),q(46,"div",31),g()()}r&2&&(v(20),z("formGroup",o.loginUsuario),v(15),z("disabled",o.initRequest),v(),xe(36,o.initRequest?-1:36),v(),xe(37,o.initRequest?37:-1))},dependencies:[Bn,_m,Ln,jn,mm,qr,Xc,Zc,xD,Fm,Om]});let t=e;return t})();var HD=[{path:"login",component:UD},{path:"",component:jD,children:[{path:"",component:Vm},{path:"",component:Sv}]},{path:"adicionar-despesa",component:Sv},{path:"adicionar-renda",component:BD},{path:"editar-cateforias",component:zD},{path:"editar-projetos",component:yD}];var kU="@",RU=(()=>{let e=class e{constructor(n,r,o,s,a){this.doc=n,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=M(VE,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-JUI5AU5C.js")).catch(r=>{throw new Ye(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(n,r){let o=this.delegate.createRenderer(n,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new Dv(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(n,r);s.use(l)}).catch(a=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Oo()},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),Dv=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,n,r){this.delegate.insertBefore(e,i,n,r)}removeChild(e,i,n){this.delegate.removeChild(e,i,n)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,n,r){this.delegate.setAttribute(e,i,n,r)}removeAttribute(e,i,n){this.delegate.removeAttribute(e,i,n)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,n,r){this.delegate.setStyle(e,i,n,r)}removeStyle(e,i,n){this.delegate.removeStyle(e,i,n)}setProperty(e,i,n){this.shouldReplay(i)&&this.replay.push(r=>r.setProperty(e,i,n)),this.delegate.setProperty(e,i,n)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,n){return this.shouldReplay(i)&&this.replay.push(r=>r.listen(e,i,n)),this.delegate.listen(e,i,n)}shouldReplay(e){return this.replay!==null&&e.startsWith(kU)}};function Av(t="animations"){return uh("NgAsyncAnimations"),cr([{provide:dh,useFactory:(e,i,n)=>new RU(e,i,n,t),deps:[he,Ah,W]},{provide:oi,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var qD={firebaseConfig:{apiKey:"AIzaSyBCd4iTj0n0BU93lqZDPuEHMh8mWgkEGRw",authDomain:"gestao-financeira-36985.firebaseapp.com",projectId:"gestao-financeira-36985",storageBucket:"gestao-financeira-36985.appspot.com",messagingSenderId:"1032977955413",appId:"1:1032977955413:web:aa43ef115ec71e576872dc",measurementId:"G-NVL2HJXQ8B"}};var $D="@firebase/database",WD="1.0.4";var zy="";function Uy(t){zy=t}var Vv=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Rt(i))}get(e){let i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:wh(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Lv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return Wi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var CA=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Vv(e)}}catch{}return new Lv},ss=CA("localStorage"),jv=CA("sessionStorage");var ja=new Fr("@firebase/database"),EA=function(){let t=1;return function(){return t++}}(),IA=function(t){let e=rI(t),i=new nI;i.update(e);let n=i.digest();return bh.encodeByteArray(n)},Vd=function(...t){let e="";for(let i=0;i<t.length;i++){let n=t[i];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Vd.apply(null,n):typeof n=="object"?e+=Rt(n):e+=n,e+=" "}return e},as=null,GD=!0,TA=function(t,e){k(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ja.logLevel=Gi.VERBOSE,as=ja.log.bind(ja),e&&jv.set("logging_enabled",!0)):typeof t=="function"?as=t:(as=null,jv.remove("logging_enabled"))},qt=function(...t){if(GD===!0&&(GD=!1,as===null&&jv.get("logging_enabled")===!0&&TA(!0)),as){let e=Vd.apply(null,t);as(e)}},Ld=function(t){return function(...e){qt(t,...e)}},Bv=function(...t){let e="FIREBASE INTERNAL ERROR: "+Vd(...t);ja.error(e)},$n=function(...t){let e=`FIREBASE FATAL ERROR: ${Vd(...t)}`;throw ja.error(e),new Error(e)},si=function(...t){let e="FIREBASE WARNING: "+Vd(...t);ja.warn(e)},PU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&si("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},mf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},OU=function(t){if(Pn()||document.readyState==="complete")t();else{let e=!1,i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},io="[MIN_NAME]",_r="[MAX_NAME]",cs=function(t,e){if(t===e)return 0;if(t===io||e===_r)return-1;if(e===io||t===_r)return 1;{let i=KD(t),n=KD(e);return i!==null?n!==null?i-n===0?t.length-e.length:i-n:-1:n!==null?1:t<e?-1:1}},FU=function(t,e){return t===e?0:t<e?-1:1},fd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Rt(e))},Hy=function(t){if(typeof t!="object"||t===null)return Rt(t);let e=[];for(let n in t)e.push(n);e.sort();let i="{";for(let n=0;n<e.length;n++)n!==0&&(i+=","),i+=Rt(e[n]),i+=":",i+=Hy(t[e[n]]);return i+="}",i},SA=function(t,e){let i=t.length;if(i<=e)return[t];let n=[];for(let r=0;r<i;r+=e)r+e>i?n.push(t.substring(r,i)):n.push(t.substring(r,r+e));return n};function $t(t,e){for(let i in t)t.hasOwnProperty(i)&&e(i,t[i])}var DA=function(t){k(!mf(t),"Invalid JSON number");let e=11,i=52,n=(1<<e-1)-1,r,o,s,a,l;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=a+n,s=Math.round(t*Math.pow(2,i-a)-Math.pow(2,i))):(o=0,s=Math.round(t/Math.pow(2,1-n-i))));let c=[];for(l=i;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();let d=c.join(""),u="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},NU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function LU(t,e){let i="Unknown Error";t==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?i="Client doesn't have permission to access the desired data.":t==="unavailable"&&(i="The service is unavailable");let n=new Error(t+" at "+e._path.toString()+": "+i);return n.code=t.toUpperCase(),n}var jU=new RegExp("^-?(0*)\\d{1,10}$"),BU=-2147483648,zU=2147483647,KD=function(t){if(jU.test(t)){let e=Number(t);if(e>=BU&&e<=zU)return e}return null},Ka=function(t){try{t()}catch(e){setTimeout(()=>{let i=e.stack||"";throw si("Exception was thrown by user callback.",i),e},Math.floor(0))}},UU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bd=function(t,e){let i=setTimeout(t,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};var zv=class{constructor(e,i){this.appName_=e,this.appCheckProvider=i,this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((i,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){si(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Uv=class{constructor(e,i,n){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',si(e)}},vd=(()=>{class t{constructor(i){this.accessToken=i}getToken(i){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(i){i(this.accessToken)}removeTokenChangeListener(i){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Bm="5",AA="v",kA="s",RA="r",MA="f",PA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,OA="ls",FA="p",Hv="ac",NA="websocket",VA="long_polling";var zm=class{constructor(e,i,n,r,o=!1,s="",a=!1,l=!1){this.secure=i,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}};function HU(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function LA(t,e,i){k(typeof e=="string","typeof type must == string"),k(typeof i=="object","typeof params must == object");let n;if(e===NA)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===VA)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);HU(t)&&(i.ns=t.namespace);let r=[];return $t(i,(o,s)=>{r.push(o+"="+s)}),n+r.join("&")}var qv=class{constructor(){this.counters_={}}incrementCounter(e,i=1){Wi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return QE(this.counters_)}};var kv={},Rv={};function qy(t){let e=t.toString();return kv[e]||(kv[e]=new qv),kv[e]}function qU(t,e){let i=t.toString();return Rv[i]||(Rv[i]=e()),Rv[i]}var $v=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Ka(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var YD="start",$U="close",WU="pLPCommand",GU="pRTLPCB",jA="id",BA="pw",zA="ser",KU="cb",YU="seg",QU="ts",XU="d",ZU="dframe",UA=1870,HA=30,JU=UA-HA,e4=25e3,t4=3e4,Cd=class t{constructor(e,i,n,r,o,s,a){this.connId=e,this.repoInfo=i,this.applicationId=n,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ld(e),this.stats_=qy(i),this.urlFn=l=>(this.appCheckToken&&(l[Hv]=this.appCheckToken),LA(i,VA,l))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new $v(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t4)),OU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wv((...o)=>{let[s,a,l,c,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===YD)this.id=a,this.password=l;else if(s===$U)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let n={};n[YD]="t",n[zA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[KU]=this.scriptTagHolder.uniqueCallbackIdentifier),n[AA]=Bm,this.transportSessionId&&(n[kA]=this.transportSessionId),this.lastSessionId&&(n[OA]=this.lastSessionId),this.applicationId&&(n[FA]=this.applicationId),this.appCheckToken&&(n[Hv]=this.appCheckToken),typeof location<"u"&&location.hostname&&PA.test(location.hostname)&&(n[RA]=MA);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Pn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!NU()&&!VU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let i=Rt(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let n=YE(i),r=SA(n,JU);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,i){if(Pn())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[ZU]="t",n[jA]=e,n[BA]=i,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let i=Rt(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}},Wv=class t{constructor(e,i,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Pn())this.commandCB=e,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=EA(),window[WU+this.uniqueCallbackIdentifier]=e,window[GU+this.uniqueCallbackIdentifier]=i,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){qt("frame writing exception"),a.stack&&qt(a.stack),qt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||qt("No IE domain setting required")}catch{let n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[jA]=this.myID,e[BA]=this.myPW,e[zA]=this.currentSerial;let i=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+HA+n.length<=UA;){let s=this.pendingSegs.shift();n=n+"&"+YU+r+"="+s.seg+"&"+QU+r+"="+s.ts+"&"+XU+r+"="+s.d,r++}return i=i+n,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,n){this.pendingSegs.push({seg:e,ts:i,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);let n=()=>{this.outstandingRequests.delete(i),this.newRequest_()},r=setTimeout(n,Math.floor(e4)),o=()=>{clearTimeout(r),n()};this.addTag(e,o)}addTag(e,i){Pn()?this.doNodeLongPoll(e,i):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=()=>{qt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var i4=16384,n4=45e3,Um=null;typeof MozWebSocket<"u"?Um=MozWebSocket:typeof WebSocket<"u"&&(Um=WebSocket);var Va=(()=>{class t{constructor(i,n,r,o,s,a,l){this.connId=i,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ld(this.connId),this.stats_=qy(n),this.connURL=t.connectionURL_(n,a,l,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(i,n,r,o,s){let a={};return a[AA]=Bm,!Pn()&&typeof location<"u"&&location.hostname&&PA.test(location.hostname)&&(a[RA]=MA),n&&(a[kA]=n),r&&(a[OA]=r),o&&(a[Hv]=o),s&&(a[FA]=s),LA(i,NA,a)}open(i,n){this.onDisconnect=n,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let r;if(Pn()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Bm}/${zy}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Um(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let i=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(i=!0)}return!i&&Um!==null&&!t.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(i){if(this.frames.push(i),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=wh(n);this.onMessage(r)}}handleNewFrameCount_(i){this.totalFrames=i,this.frames=[]}extractFrameCount_(i){if(k(this.frames===null,"We already have a frame buffer"),i.length<=6){let n=Number(i);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),i}handleIncomingFrame(i){if(this.mySock===null)return;let n=i.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(i){this.resetKeepAlive();let n=Rt(i);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=SA(n,i4);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(n4))}sendString_(i){try{this.mySock.send(i)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),qA=(()=>{class t{constructor(i){this.initTransports_(i)}static get ALL_TRANSPORTS(){return[Cd,Va]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(i){let n=Va&&Va.isAvailable(),r=n&&!Va.previouslyFailed();if(i.webSocketOnly&&(n||si("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Va];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),r4=6e4,o4=5e3,s4=10*1024,a4=100*1024,Mv="t",QD="d",l4="s",XD="r",c4="e",ZD="o",JD="a",eA="n",tA="p",d4="h",Gv=class{constructor(e,i,n,r,o,s,a,l,c,d){this.id=e,this.repoInfo_=i,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ld("c:"+this.id+":"),this.transportManager_=new qA(i),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let i=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,n)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=bd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>s4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){let i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Mv in e){let i=e[Mv];i===JD?this.upgradeIfSecondaryHealthy_():i===XD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===ZD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let i=fd("t",e),n=fd("d",e);if(i==="c")this.onSecondaryControl_(n);else if(i==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:JD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let i=fd("t",e),n=fd("d",e);i==="c"?this.onControl_(n):i==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let i=fd(Mv,e);if(QD in e){let n=e[QD];if(i===d4){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(i===eA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===l4?this.onConnectionShutdown_(n):i===XD?this.onReset_(n):i===c4?Bv("Server Error: "+n):i===ZD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bv("Unknown control packet command: "+i)}}onHandshake_(e){let i=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Bm!==n&&si("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let i=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,n),bd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(r4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(o4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tA,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Hm=class{put(e,i,n,r){}merge(e,i,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,n){}onDisconnectMerge(e,i,n){}onDisconnectCancel(e,i){}reportStats(e){}};var qm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,i)}}on(e,i,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:n});let r=this.getInitialEvent(e);r&&i.apply(n,r)}off(e,i,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===i&&(!n||n===r[o].context)){r.splice(o,1);return}}validateEventType_(e){k(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}};var $m=class t extends qm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var iA=32,nA=768,Be=class{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}};function je(){return new Be("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function no(t){return t.pieces_.length-t.pieceNum_}function tt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Be(t.pieces_,e)}function $y(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function u4(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function Ed(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $A(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new Be(e,0)}function dt(t,e){let i=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)i.push(t.pieces_[n]);if(e instanceof Be)for(let n=e.pieceNum_;n<e.pieces_.length;n++)i.push(e.pieces_[n]);else{let n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&i.push(n[r])}return new Be(i,0)}function Ee(t){return t.pieceNum_>=t.pieces_.length}function mi(t,e){let i=Ce(t),n=Ce(e);if(i===null)return e;if(i===n)return mi(tt(t),tt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function h4(t,e){let i=Ed(t,0),n=Ed(e,0);for(let r=0;r<i.length&&r<n.length;r++){let o=cs(i[r],n[r]);if(o!==0)return o}return i.length===n.length?0:i.length<n.length?-1:1}function Wy(t,e){if(no(t)!==no(e))return!1;for(let i=t.pieceNum_,n=e.pieceNum_;i<=t.pieces_.length;i++,n++)if(t.pieces_[i]!==e.pieces_[n])return!1;return!0}function rn(t,e){let i=t.pieceNum_,n=e.pieceNum_;if(no(t)>no(e))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==e.pieces_[n])return!1;++i,++n}return!0}var Kv=class{constructor(e,i){this.errorPrefix_=i,this.parts_=Ed(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=oc(this.parts_[n]);WA(this)}};function m4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=oc(e),WA(t)}function f4(t){let e=t.parts_.pop();t.byteLength_-=oc(e),t.parts_.length>0&&(t.byteLength_-=1)}function WA(t){if(t.byteLength_>nA)throw new Error(t.errorPrefix_+"has a key path longer than "+nA+" bytes ("+t.byteLength_+").");if(t.parts_.length>iA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iA+") or object contains a cycle "+os(t))}function os(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Yv=class t extends qm{constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{let n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new t}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}};var pd=1e3,p4=60*5*1e3,rA=30*1e3,g4=1.3,_4=3e4,b4="server_kill",oA=3,Gy=(()=>{class t extends Hm{constructor(i,n,r,o,s,a,l,c){if(super(),this.repoInfo_=i,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Ld("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pd,this.maxReconnectDelay_=p4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Pn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yv.getInstance().on("visible",this.onVisible_,this),i.host.indexOf("fblocal")===-1&&$m.getInstance().on("online",this.onOnline_,this)}sendRequest(i,n,r){let o=++this.requestNumber_,s={r:o,a:i,b:n};this.log_(Rt(s)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(i){this.initConnection_();let n=new Ut,o={action:"g",request:{p:i._path.toString(),q:i._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(i,n,r,o){this.initConnection_();let s=i._queryIdentifier,a=i._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),k(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:n,query:i,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(i){let n=this.outstandingGets_[i];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[i],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(i){let n=i.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";i.tag&&(s.q=n._queryObject,s.t=i.tag),s.h=i.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,d=l.s;t.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(o))===i&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,o),i.onComplete&&i.onComplete(d,c))})}static warnOnListenWarnings_(i,n){if(i&&typeof i=="object"&&Wi(i,"w")){let r=Or(i,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();si(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(i)}reduceReconnectDelayIfAdminCredential_(i){(i&&i.length===40||tI(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=rA)}refreshAppCheckToken(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let i=this.authToken_,n=eI(i)?"auth":"gauth",r={cred:i};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===i&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},i=>{let n=i.s,r=i.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(i,n){let r=i._path.toString(),o=i._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),k(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,i._queryObject,n)}sendUnlisten_(i,n,r,o){this.log_("Unlisten on "+i+" for "+n);let s={p:i},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(i,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,n,r):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:n,onComplete:r})}onDisconnectMerge(i,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,n,r):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:n,onComplete:r})}onDisconnectCancel(i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,n):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(i,n,r,o){let s={p:n,d:r};this.log_("onDisconnect "+i,s),this.sendRequest(i,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(i,n,r,o){this.putInternal("p",i,n,r,o)}merge(i,n,r,o){this.putInternal("m",i,n,r,o)}putInternal(i,n,r,o,s){this.initConnection_();let a={p:n,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:i,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(i){let n=this.outstandingPuts_[i].action,r=this.outstandingPuts_[i].request,o=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[i],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(i){if(this.connected_){let n={c:i};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(i){if("r"in i){this.log_("from server: "+Rt(i));let n=i.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}}onDataPush_(i,n){this.log_("handleServerMessage",i,n),i==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):i==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):i==="c"?this.onListenRevoked_(n.p,n.q):i==="ac"?this.onAuthRevoked_(n.s,n.d):i==="apc"?this.onAppCheckRevoked_(n.s,n.d):i==="sd"?this.onSecurityDebugPacket_(n):Bv("Unrecognized action received from server: "+Rt(i)+`
Are you using the latest client?`)}onReady_(i,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(i),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(i){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(i))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pd,this.realtime_||this.scheduleConnect_(0)),this.visible_=i}onOnline_(i){i?(this.log_("Browser went online."),this.reconnectDelay_=pd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_4&&(this.reconnectDelay_=pd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let i=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-i);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*g4)}this.onConnectStatus_(!1)}establishConnection_(){return C(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let i=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},d=function(h){k(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,m]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?qt("getToken() completed but was canceled"):(qt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=m&&m.token,l=new Gv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,i,n,r,b=>{si(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(b4)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&si(h),c())}}})}interrupt(i){qt("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(i){qt("Resuming connection for reason: "+i),delete this.interruptReasons_[i],xh(this.interruptReasons_)&&(this.reconnectDelay_=pd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(i){let n=i-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){let n=this.outstandingPuts_[i];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(i,n){let r;n?r=n.map(s=>Hy(s)).join("$"):r="default";let o=this.removeListen_(i,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(i,n){let r=new Be(i).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(i,n){qt("Auth token revoked: "+i+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(i==="invalid_token"||i==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=oA&&(this.reconnectDelay_=rA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(i,n){qt("App check token revoked: "+i+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(i==="invalid_token"||i==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=oA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let i of this.listens.values())for(let n of i.values())this.sendListen_(n);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){let i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){let i={},n="js";Pn()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),i["sdk."+n+"."+zy.replace(/\./g,"-")]=1,Gg()?i["framework.cordova"]=1:XE()&&(i["framework.reactnative"]=1),this.reportStats(i)}shouldReconnect_(){let i=$m.getInstance().currentlyOnline();return xh(this.interruptReasons_)&&i}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Se=class t{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new t(e,i)}};var Ba=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){let n=new Se(io,e),r=new Se(io,i);return this.compare(n,r)!==0}minPost(){return Se.MIN}};var jm,Wm=class extends Ba{static get __EMPTY_NODE(){return jm}static set __EMPTY_NODE(e){jm=e}compare(e,i){return cs(e.name,i.name)}isDefinedOn(e){throw la("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return Se.MIN}maxPost(){return new Se(_r,jm)}makePost(e,i){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new Se(e,jm)}toString(){return".key"}},qn=new Wm;var La=class{constructor(e,i,n,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=i?n(e.key,i):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},vn=(()=>{class t{constructor(i,n,r,o,s){this.key=i,this.value=n,this.color=r??t.RED,this.left=o??on.EMPTY_NODE,this.right=s??on.EMPTY_NODE}copy(i,n,r,o,s){return new t(i??this.key,n??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,n,r){let o=this,s=r(i,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(i,n,r),null):s===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(i,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return on.EMPTY_NODE;let i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.removeMin_(),null),i.fixUp_()}remove(i,n){let r,o;if(r=this,n(i,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(i,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(i,r.key)===0){if(r.right.isEmpty())return on.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(i,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i}moveRedLeft_(){let i=this.colorFlip_();return i.right.left.isRed_()&&(i=i.copy(null,null,null,null,i.right.rotateRight_()),i=i.rotateLeft_(),i=i.colorFlip_()),i}moveRedRight_(){let i=this.colorFlip_();return i.left.left.isRed_()&&(i=i.rotateRight_(),i=i.colorFlip_()),i}rotateLeft_(){let i=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight_(){let i=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip_(){let i=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,n)}checkMaxDepth_(){let i=this.check_();return Math.pow(2,i)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Qv=class{copy(e,i,n,r,o){return this}insert(e,i,n){return new vn(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},on=class t{constructor(e,i=t.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new t(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,vn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vn.BLACK,null,null))}get(e){let i,n=this.root_;for(;!n.isEmpty();){if(i=this.comparator_(e,n.key),i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}getPredecessorKey(e){let i,n=this.root_,r=null;for(;!n.isEmpty();)if(i=this.comparator_(e,n.key),i===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else i<0?n=n.left:i>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new La(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new La(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new La(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new La(this.root_,null,this.comparator_,!0,e)}};on.EMPTY_NODE=new Qv;function v4(t,e){return cs(t.name,e.name)}function Ky(t,e){return cs(t,e)}var Xv;function y4(t){Xv=t}var GA=function(t){return typeof t=="number"?"number:"+DA(t):"string:"+t},KA=function(t){if(t.isLeafNode()){let e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wi(e,".sv"),"Priority must be a string or number.")}else k(t===Xv||t.isEmpty(),"priority of unexpected type.");k(t===Xv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var sA,za=(()=>{class t{constructor(i,n=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=i,this.priorityNode_=n,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),KA(this.priorityNode_)}static set __childrenNodeConstructor(i){sA=i}static get __childrenNodeConstructor(){return sA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(i){return new t(this.value_,i)}getImmediateChild(i){return i===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(i){return Ee(i)?this:Ce(i)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(i,n){return null}updateImmediateChild(i,n){return i===".priority"?this.updatePriority(n):n.isEmpty()&&i!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,n).updatePriority(this.priorityNode_)}updateChild(i,n){let r=Ce(i);return r===null?n:n.isEmpty()&&r!==".priority"?this:(k(r!==".priority"||no(i)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(tt(i),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(i,n){return!1}val(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let i="";this.priorityNode_.isEmpty()||(i+="priority:"+GA(this.priorityNode_.val())+":");let n=typeof this.value_;i+=n+":",n==="number"?i+=DA(this.value_):i+=this.value_,this.lazyHash_=IA(i)}return this.lazyHash_}getValue(){return this.value_}compareTo(i){return i===t.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof t.__childrenNodeConstructor?-1:(k(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))}compareToLeafNode_(i){let n=typeof i.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return k(o>=0,"Unknown leaf type: "+n),k(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(i){if(i===this)return!0;if(i.isLeafNode()){let n=i;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),YA,QA;function w4(t){YA=t}function x4(t){QA=t}var Zv=class extends Ba{compare(e,i){let n=e.node.getPriority(),r=i.node.getPriority(),o=n.compareTo(r);return o===0?cs(e.name,i.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return Se.MIN}maxPost(){return new Se(_r,new za("[PRIORITY-POST]",QA))}makePost(e,i){let n=YA(e);return new Se(i,new za("[PRIORITY-POST]",n))}toString(){return".priority"}},ot=new Zv;var C4=Math.log(2),Jv=class{constructor(e){let i=o=>parseInt(Math.log(o)/C4,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;let r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Gm=function(t,e,i,n){t.sort(e);let r=function(l,c){let d=c-l,u,h;if(d===0)return null;if(d===1)return u=t[l],h=i?i(u):u,new vn(h,u.node,vn.BLACK,null,null);{let m=parseInt(d/2,10)+l,b=r(l,m),y=r(m+1,c);return u=t[m],h=i?i(u):u,new vn(h,u.node,vn.BLACK,b,y)}},o=function(l){let c=null,d=null,u=t.length,h=function(b,y){let E=u-b,j=u;u-=b;let re=r(E+1,j),$=t[E],be=i?i($):$;m(new vn(be,$.node,y,null,re))},m=function(b){c?(c.left=b,c=b):(d=b,c=b)};for(let b=0;b<l.count;++b){let y=l.nextBitIsOne(),E=Math.pow(2,l.count-(b+1));y?h(E,vn.BLACK):(h(E,vn.BLACK),h(E,vn.RED))}return d},s=new Jv(t.length),a=o(s);return new on(n||e,a)};var Pv,Na={},Ua=class t{constructor(e,i){this.indexes_=e,this.indexSet_=i}static get Default(){return k(Na&&ot,"ChildrenNode.ts has not been loaded"),Pv=Pv||new t({".priority":Na},{".priority":ot}),Pv}get(e){let i=Or(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof on?i:null}hasIndex(e){return Wi(this.indexSet_,e.toString())}addIndex(e,i){k(e!==qn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,o=i.getIterator(Se.Wrap),s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=o.getNext();let a;r?a=Gm(n,e.getCompare()):a=Na;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new t(d,c)}addToIndexes(e,i){let n=rc(this.indexes_,(r,o)=>{let s=Or(this.indexSet_,o);if(k(s,"Missing index implementation for "+o),r===Na)if(s.isDefinedOn(e.node)){let a=[],l=i.getIterator(Se.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Gm(a,s.getCompare())}else return Na;else{let a=i.get(e.name),l=r;return a&&(l=l.remove(new Se(e.name,a))),l.insert(e,e.node)}});return new t(n,this.indexSet_)}removeFromIndexes(e,i){let n=rc(this.indexes_,r=>{if(r===Na)return r;{let o=i.get(e.name);return o?r.remove(new Se(e.name,o)):r}});return new t(n,this.indexSet_)}};var gd,ge=(()=>{class t{constructor(i,n,r){this.children_=i,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&KA(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gd||(gd=new t(new on(Ky),null,Ua.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gd}updatePriority(i){return this.children_.isEmpty()?this:new t(this.children_,i,this.indexMap_)}getImmediateChild(i){if(i===".priority")return this.getPriority();{let n=this.children_.get(i);return n===null?gd:n}}getChild(i){let n=Ce(i);return n===null?this:this.getImmediateChild(n).getChild(tt(i))}hasChild(i){return this.children_.get(i)!==null}updateImmediateChild(i,n){if(k(n,"We should always be passing snapshot nodes"),i===".priority")return this.updatePriority(n);{let r=new Se(i,n),o,s;n.isEmpty()?(o=this.children_.remove(i),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(i,n),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?gd:this.priorityNode_;return new t(o,a,s)}}updateChild(i,n){let r=Ce(i);if(r===null)return n;{k(Ce(i)!==".priority"||no(i)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(tt(i),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(i){if(this.isEmpty())return null;let n={},r=0,o=0,s=!0;if(this.forEachChild(ot,(a,l)=>{n[a]=l.val(i),r++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!i&&s&&o<2*r){let a=[];for(let l in n)a[l]=n[l];return a}else return i&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let i="";this.getPriority().isEmpty()||(i+="priority:"+GA(this.getPriority().val())+":"),this.forEachChild(ot,(n,r)=>{let o=r.hash();o!==""&&(i+=":"+n+":"+o)}),this.lazyHash_=i===""?"":IA(i)}return this.lazyHash_}getPredecessorChildName(i,n,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new Se(i,n));return s?s.name:null}else return this.children_.getPredecessorKey(i)}getFirstChildName(i){let n=this.resolveIndex_(i);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(i){let n=this.getFirstChildName(i);return n?new Se(n,this.children_.get(n)):null}getLastChildName(i){let n=this.resolveIndex_(i);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(i){let n=this.getLastChildName(i);return n?new Se(n,this.children_.get(n)):null}forEachChild(i,n){let r=this.resolveIndex_(i);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(i){return this.getIteratorFrom(i.minPost(),i)}getIteratorFrom(i,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(i,o=>o);{let o=this.children_.getIteratorFrom(i.name,Se.Wrap),s=o.peek();for(;s!=null&&n.compare(s,i)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(i){return this.getReverseIteratorFrom(i.maxPost(),i)}getReverseIteratorFrom(i,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(i,o=>o);{let o=this.children_.getReverseIteratorFrom(i.name,Se.Wrap),s=o.peek();for(;s!=null&&n.compare(s,i)>0;)o.getNext(),s=o.peek();return o}}compareTo(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===jd?-1:0}withIndex(i){if(i===qn||this.indexMap_.hasIndex(i))return this;{let n=this.indexMap_.addIndex(i,this.children_);return new t(this.children_,this.priorityNode_,n)}}isIndexed(i){return i===qn||this.indexMap_.hasIndex(i)}equals(i){if(i===this)return!0;if(i.isLeafNode())return!1;{let n=i;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(ot),o=n.getIterator(ot),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(i){return i===qn?null:this.indexMap_.get(i.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),ey=class extends ge{constructor(){super(new on(Ky),ge.EMPTY_NODE,Ua.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ge.EMPTY_NODE}isEmpty(){return!1}},jd=new ey;Object.defineProperties(Se,{MIN:{value:new Se(io,ge.EMPTY_NODE)},MAX:{value:new Se(_r,jd)}});Wm.__EMPTY_NODE=ge.EMPTY_NODE;za.__childrenNodeConstructor=ge;y4(jd);x4(jd);var E4=!0;function mt(t,e=null){if(t===null)return ge.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let i=t;return new za(i,mt(e))}if(!(t instanceof Array)&&E4){let i=[],n=!1;if($t(t,(s,a)=>{if(s.substring(0,1)!=="."){let l=mt(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),i.push(new Se(s,l)))}}),i.length===0)return ge.EMPTY_NODE;let o=Gm(i,v4,s=>s.name,Ky);if(n){let s=Gm(i,ot.getCompare());return new ge(o,mt(e),new Ua({".priority":s},{".priority":ot}))}else return new ge(o,mt(e),Ua.Default)}else{let i=ge.EMPTY_NODE;return $t(t,(n,r)=>{if(Wi(t,n)&&n.substring(0,1)!=="."){let o=mt(r);(o.isLeafNode()||!o.isEmpty())&&(i=i.updateImmediateChild(n,o))}}),i.updatePriority(mt(e))}}w4(mt);var Id=class extends Ba{constructor(e){super(),this.indexPath_=e,k(!Ee(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){let n=this.extractChild(e.node),r=this.extractChild(i.node),o=n.compareTo(r);return o===0?cs(e.name,i.name):o}makePost(e,i){let n=mt(e),r=ge.EMPTY_NODE.updateChild(this.indexPath_,n);return new Se(i,r)}maxPost(){let e=ge.EMPTY_NODE.updateChild(this.indexPath_,jd);return new Se(_r,e)}toString(){return Ed(this.indexPath_,0).join("/")}};var ty=class extends Ba{compare(e,i){let n=e.node.compareTo(i.node);return n===0?cs(e.name,i.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return Se.MIN}maxPost(){return Se.MAX}makePost(e,i){let n=mt(e);return new Se(i,n)}toString(){return".value"}},Yy=new ty;function XA(t){return{type:"value",snapshotNode:t}}function Ha(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Td(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Sd(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function I4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Dd=class{constructor(e){this.index_=e}updateChild(e,i,n,r,o,s){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(i);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()||(s!=null&&(n.isEmpty()?e.hasChild(i)?s.trackChildChange(Td(i,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ha(i,n)):s.trackChildChange(Sd(i,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(i,n).withIndex(this.index_)}updateFullNode(e,i,n){return n!=null&&(e.isLeafNode()||e.forEachChild(ot,(r,o)=>{i.hasChild(r)||n.trackChildChange(Td(r,o))}),i.isLeafNode()||i.forEachChild(ot,(r,o)=>{if(e.hasChild(r)){let s=e.getImmediateChild(r);s.equals(o)||n.trackChildChange(Sd(r,o,s))}else n.trackChildChange(Ha(r,o))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?ge.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Km=class t{constructor(e){this.indexedFilter_=new Dd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return i&&n}updateChild(e,i,n,r,o,s){return this.matches(new Se(i,n))||(n=ge.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,n,r,o,s)}updateFullNode(e,i,n){i.isLeafNode()&&(i=ge.EMPTY_NODE);let r=i.withIndex(this.index_);r=r.updatePriority(ge.EMPTY_NODE);let o=this;return i.forEachChild(ot,(s,a)=>{o.matches(new Se(s,a))||(r=r.updateImmediateChild(s,ge.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}else return e.getIndex().maxPost()}};var iy=class{constructor(e){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{let n=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=i=>{let n=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Km(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,i,n,r,o,s){return this.rangedFilter_.matches(new Se(i,n))||(n=ge.EMPTY_NODE),e.getImmediateChild(i).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,n,r,o,s):this.fullLimitUpdateChild_(e,i,n,o,s)}updateFullNode(e,i,n){let r;if(i.isLeafNode()||i.isEmpty())r=ge.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){r=ge.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{r=i.withIndex(this.index_),r=r.updatePriority(ge.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:r=r.updateImmediateChild(a.name,ge.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,n,r,o){let s;if(this.reverse_){let u=this.index_.getCompare();s=(h,m)=>u(m,h)}else s=this.index_.getCompare();let a=e;k(a.numChildren()===this.limit_,"");let l=new Se(i,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(i)){let u=a.getImmediateChild(i),h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===i||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let m=h==null?1:s(h,l);if(d&&!n.isEmpty()&&m>=0)return o?.trackChildChange(Sd(i,n,u)),a.updateImmediateChild(i,n);{o?.trackChildChange(Td(i,u));let y=a.updateImmediateChild(i,ge.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(Ha(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return n.isEmpty()?e:d&&s(c,l)>=0?(o!=null&&(o.trackChildChange(Td(c.name,c.node)),o.trackChildChange(Ha(i,n))),a.updateImmediateChild(i,n).updateImmediateChild(c.name,ge.EMPTY_NODE)):e}};var Ad=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ot}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:io}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_r}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ot}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function T4(t){return t.loadsAllData()?new Dd(t.getIndex()):t.hasLimit()?new iy(t):new Km(t)}function S4(t,e){let i=t.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="l",i}function D4(t,e){let i=t.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="r",i}function ny(t,e,i){let n=t.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,i!=null?(n.startNameSet_=!0,n.indexStartName_=i):(n.startNameSet_=!1,n.indexStartName_=""),n}function A4(t,e,i){let n;return t.index_===qn||i?n=ny(t,e,i):n=ny(t,e,_r),n.startAfterSet_=!0,n}function ry(t,e,i){let n=t.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,i!==void 0?(n.endNameSet_=!0,n.indexEndName_=i):(n.endNameSet_=!1,n.indexEndName_=""),n}function k4(t,e,i){let n;return t.index_===qn||i?n=ry(t,e,i):n=ry(t,e,io),n.endBeforeSet_=!0,n}function ff(t,e){let i=t.copy();return i.index_=e,i}function aA(t){let e={};if(t.isDefault())return e;let i;if(t.index_===ot?i="$priority":t.index_===Yy?i="$value":t.index_===qn?i="$key":(k(t.index_ instanceof Id,"Unrecognized index type!"),i=t.index_.toString()),e.orderBy=Rt(i),t.startSet_){let n=t.startAfterSet_?"startAfter":"startAt";e[n]=Rt(t.indexStartValue_),t.startNameSet_&&(e[n]+=","+Rt(t.indexStartName_))}if(t.endSet_){let n=t.endBeforeSet_?"endBefore":"endAt";e[n]=Rt(t.indexEndValue_),t.endNameSet_&&(e[n]+=","+Rt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function lA(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),e.vf=i}return t.index_!==ot&&(e.i=t.index_.toString()),e}var oy=class t extends Hm{constructor(e,i,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ld("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,i,n,r){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,n),a={};this.listens_[s]=a;let l=aA(e._queryParams);this.restRequest_(o+".json",l,(c,d)=>{let u=d;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(o,u,!1,n),Or(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(e,i){let n=t.getListenId_(e,i);delete this.listens_[n]}get(e){let i=aA(e._queryParams),n=e._path.toString(),r=new Ut;return this.restRequest_(n+".json",i,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(n,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,i={},n){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(i.auth=r.accessToken),o&&o.token&&(i.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+iI(i);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=wh(a.responseText)}catch{si("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&si("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}};var sy=class{constructor(){this.rootNode_=ge.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}};function Ym(){return{value:null,children:new Map}}function Ya(t,e,i){if(Ee(e))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,i);else{let n=Ce(e);t.children.has(n)||t.children.set(n,Ym());let r=t.children.get(n);e=tt(e),Ya(r,e,i)}}function ay(t,e){if(Ee(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let i=t.value;return t.value=null,i.forEachChild(ot,(n,r)=>{Ya(t,new Be(n),r)}),ay(t,e)}}else if(t.children.size>0){let i=Ce(e);return e=tt(e),t.children.has(i)&&ay(t.children.get(i),e)&&t.children.delete(i),t.children.size===0}else return!0}function ly(t,e,i){t.value!==null?i(e,t.value):R4(t,(n,r)=>{let o=new Be(e.toString()+"/"+n);ly(r,o,i)})}function R4(t,e){t.children.forEach((i,n)=>{e(n,i)})}var cy=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),i=Object.assign({},e);return this.last_&&$t(this.last_,(n,r)=>{i[n]=i[n]-r}),this.last_=e,i}};var cA=10*1e3,M4=30*1e3,P4=5*60*1e3,dy=class{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new cy(e);let n=cA+(M4-cA)*Math.random();bd(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),i={},n=!1;$t(e,(r,o)=>{o>0&&Wi(this.statsToReport_,r)&&(i[r]=o,n=!0)}),n&&this.server_.reportStats(i),bd(this.reportStats_.bind(this),Math.floor(Math.random()*2*P4))}};var Hn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Hn||{});function Qy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zy(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var uy=class t{constructor(e,i,n){this.path=e,this.affectedTree=i,this.revert=n,this.type=Hn.ACK_USER_WRITE,this.source=Qy()}operationForChild(e){if(Ee(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let i=this.affectedTree.subtree(new Be(e));return new t(je(),i,this.revert)}}else return k(Ce(this.path)===e,"operationForChild called for unrelated child."),new t(tt(this.path),this.affectedTree,this.revert)}};var Qm=class t{constructor(e,i){this.source=e,this.path=i,this.type=Hn.LISTEN_COMPLETE}operationForChild(e){return Ee(this.path)?new t(this.source,je()):new t(this.source,tt(this.path))}};var qa=class t{constructor(e,i,n){this.source=e,this.path=i,this.snap=n,this.type=Hn.OVERWRITE}operationForChild(e){return Ee(this.path)?new t(this.source,je(),this.snap.getImmediateChild(e)):new t(this.source,tt(this.path),this.snap)}};var kd=class t{constructor(e,i,n){this.source=e,this.path=i,this.children=n,this.type=Hn.MERGE}operationForChild(e){if(Ee(this.path)){let i=this.children.subtree(new Be(e));return i.isEmpty()?null:i.value?new qa(this.source,je(),i.value):new t(this.source,je(),i)}else return k(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,tt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Wn=class{constructor(e,i,n){this.node_=e,this.fullyInitialized_=i,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ee(e))return this.isFullyInitialized()&&!this.filtered_;let i=Ce(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var hy=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function O4(t,e,i,n){let r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(I4(s.childName,s.snapshotNode))}),_d(t,r,"child_removed",e,n,i),_d(t,r,"child_added",e,n,i),_d(t,r,"child_moved",o,n,i),_d(t,r,"child_changed",e,n,i),_d(t,r,"value",e,n,i),r}function _d(t,e,i,n,r,o){let s=n.filter(a=>a.type===i);s.sort((a,l)=>N4(t,a,l)),s.forEach(a=>{let l=F4(t,a,o);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function F4(t,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function N4(t,e,i){if(e.childName==null||i.childName==null)throw la("Should only compare child_ events.");let n=new Se(e.childName,e.snapshotNode),r=new Se(i.childName,i.snapshotNode);return t.index_.compare(n,r)}function pf(t,e){return{eventCache:t,serverCache:e}}function yd(t,e,i,n){return pf(new Wn(e,i,n),t.serverCache)}function ZA(t,e,i,n){return pf(t.eventCache,new Wn(e,i,n))}function Xm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ls(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ov,V4=()=>(Ov||(Ov=new on(FU)),Ov),fi=class t{constructor(e,i=V4()){this.value=e,this.children=i}static fromObject(e){let i=new t(null);return $t(e,(n,r)=>{i=i.set(new Be(n),r)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:je(),value:this.value};if(Ee(e))return null;{let n=Ce(e),r=this.children.get(n);if(r!==null){let o=r.findRootMostMatchingPathAndValue(tt(e),i);return o!=null?{path:dt(new Be(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ee(e))return this;{let i=Ce(e),n=this.children.get(i);return n!==null?n.subtree(tt(e)):new t(null)}}set(e,i){if(Ee(e))return new t(i,this.children);{let n=Ce(e),o=(this.children.get(n)||new t(null)).set(tt(e),i),s=this.children.insert(n,o);return new t(this.value,s)}}remove(e){if(Ee(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let i=Ce(e),n=this.children.get(i);if(n){let r=n.remove(tt(e)),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(Ee(e))return this.value;{let i=Ce(e),n=this.children.get(i);return n?n.get(tt(e)):null}}setTree(e,i){if(Ee(e))return i;{let n=Ce(e),o=(this.children.get(n)||new t(null)).setTree(tt(e),i),s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),new t(this.value,s)}}fold(e){return this.fold_(je(),e)}fold_(e,i){let n={};return this.children.inorderTraversal((r,o)=>{n[r]=o.fold_(dt(e,r),i)}),i(e,this.value,n)}findOnPath(e,i){return this.findOnPath_(e,je(),i)}findOnPath_(e,i,n){let r=this.value?n(i,this.value):!1;if(r)return r;if(Ee(e))return null;{let o=Ce(e),s=this.children.get(o);return s?s.findOnPath_(tt(e),dt(i,o),n):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,je(),i)}foreachOnPath_(e,i,n){if(Ee(e))return this;{this.value&&n(i,this.value);let r=Ce(e),o=this.children.get(r);return o?o.foreachOnPath_(tt(e),dt(i,r),n):new t(null)}}foreach(e){this.foreach_(je(),e)}foreach_(e,i){this.children.inorderTraversal((n,r)=>{r.foreach_(dt(e,n),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,n)=>{n.value&&e(i,n.value)})}};var yn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new fi(null))}};function wd(t,e,i){if(Ee(e))return new yn(new fi(i));{let n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){let r=n.path,o=n.value,s=mi(r,e);return o=o.updateChild(s,i),new yn(t.writeTree_.set(r,o))}else{let r=new fi(i),o=t.writeTree_.setTree(e,r);return new yn(o)}}}function my(t,e,i){let n=t;return $t(i,(r,o)=>{n=wd(n,dt(e,r),o)}),n}function dA(t,e){if(Ee(e))return yn.empty();{let i=t.writeTree_.setTree(e,new fi(null));return new yn(i)}}function fy(t,e){return ds(t,e)!=null}function ds(t,e){let i=t.writeTree_.findRootMostValueAndPath(e);return i!=null?t.writeTree_.get(i.path).getChild(mi(i.path,e)):null}function uA(t){let e=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(ot,(n,r)=>{e.push(new Se(n,r))}):t.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new Se(n,r.value))}),e}function eo(t,e){if(Ee(e))return t;{let i=ds(t,e);return i!=null?new yn(new fi(i)):new yn(t.writeTree_.subtree(e))}}function py(t){return t.writeTree_.isEmpty()}function $a(t,e){return JA(je(),t.writeTree_,e)}function JA(t,e,i){if(e.value!=null)return i.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(k(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):i=JA(dt(t,r),o,i)}),!i.getChild(t).isEmpty()&&n!==null&&(i=i.updateChild(dt(t,".priority"),n)),i}}function gf(t,e){return nk(e,t)}function L4(t,e,i,n,r){k(n>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:i,writeId:n,visible:r}),r&&(t.visibleWrites=wd(t.visibleWrites,e,i)),t.lastWriteId=n}function j4(t,e,i,n){k(n>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:i,writeId:n,visible:!0}),t.visibleWrites=my(t.visibleWrites,e,i),t.lastWriteId=n}function B4(t,e){for(let i=0;i<t.allWrites.length;i++){let n=t.allWrites[i];if(n.writeId===e)return n}return null}function z4(t,e){let i=t.allWrites.findIndex(a=>a.writeId===e);k(i>=0,"removeWrite called with nonexistent writeId.");let n=t.allWrites[i];t.allWrites.splice(i,1);let r=n.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=i&&U4(a,n.path)?r=!1:rn(n.path,a.path)&&(o=!0)),s--}if(r){if(o)return H4(t),!0;if(n.snap)t.visibleWrites=dA(t.visibleWrites,n.path);else{let a=n.children;$t(a,l=>{t.visibleWrites=dA(t.visibleWrites,dt(n.path,l))})}return!0}else return!1}function U4(t,e){if(t.snap)return rn(t.path,e);for(let i in t.children)if(t.children.hasOwnProperty(i)&&rn(dt(t.path,i),e))return!0;return!1}function H4(t){t.visibleWrites=ek(t.allWrites,q4,je()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function q4(t){return t.visible}function ek(t,e,i){let n=yn.empty();for(let r=0;r<t.length;++r){let o=t[r];if(e(o)){let s=o.path,a;if(o.snap)rn(i,s)?(a=mi(i,s),n=wd(n,a,o.snap)):rn(s,i)&&(a=mi(s,i),n=wd(n,je(),o.snap.getChild(a)));else if(o.children){if(rn(i,s))a=mi(i,s),n=my(n,a,o.children);else if(rn(s,i))if(a=mi(s,i),Ee(a))n=my(n,je(),o.children);else{let l=Or(o.children,Ce(a));if(l){let c=l.getChild(tt(a));n=wd(n,je(),c)}}}else throw la("WriteRecord should have .snap or .children")}}return n}function tk(t,e,i,n,r){if(!n&&!r){let o=ds(t.visibleWrites,e);if(o!=null)return o;{let s=eo(t.visibleWrites,e);if(py(s))return i;if(i==null&&!fy(s,je()))return null;{let a=i||ge.EMPTY_NODE;return $a(s,a)}}}else{let o=eo(t.visibleWrites,e);if(!r&&py(o))return i;if(!r&&i==null&&!fy(o,je()))return null;{let s=function(c){return(c.visible||r)&&(!n||!~n.indexOf(c.writeId))&&(rn(c.path,e)||rn(e,c.path))},a=ek(t.allWrites,s,e),l=i||ge.EMPTY_NODE;return $a(a,l)}}}function $4(t,e,i){let n=ge.EMPTY_NODE,r=ds(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ot,(o,s)=>{n=n.updateImmediateChild(o,s)}),n;if(i){let o=eo(t.visibleWrites,e);return i.forEachChild(ot,(s,a)=>{let l=$a(eo(o,new Be(s)),a);n=n.updateImmediateChild(s,l)}),uA(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}else{let o=eo(t.visibleWrites,e);return uA(o).forEach(s=>{n=n.updateImmediateChild(s.name,s.node)}),n}}function W4(t,e,i,n,r){k(n||r,"Either existingEventSnap or existingServerSnap must exist");let o=dt(e,i);if(fy(t.visibleWrites,o))return null;{let s=eo(t.visibleWrites,o);return py(s)?r.getChild(i):$a(s,r.getChild(i))}}function G4(t,e,i,n){let r=dt(e,i),o=ds(t.visibleWrites,r);if(o!=null)return o;if(n.isCompleteForChild(i)){let s=eo(t.visibleWrites,r);return $a(s,n.getNode().getImmediateChild(i))}else return null}function K4(t,e){return ds(t.visibleWrites,e)}function Y4(t,e,i,n,r,o,s){let a,l=eo(t.visibleWrites,e),c=ds(l,je());if(c!=null)a=c;else if(i!=null)a=$a(l,i);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=s.getCompare(),h=o?a.getReverseIteratorFrom(n,s):a.getIteratorFrom(n,s),m=h.getNext();for(;m&&d.length<r;)u(m,n)!==0&&d.push(m),m=h.getNext();return d}else return[]}function Q4(){return{visibleWrites:yn.empty(),allWrites:[],lastWriteId:-1}}function Zm(t,e,i,n){return tk(t.writeTree,t.treePath,e,i,n)}function Jy(t,e){return $4(t.writeTree,t.treePath,e)}function hA(t,e,i,n){return W4(t.writeTree,t.treePath,e,i,n)}function Jm(t,e){return K4(t.writeTree,dt(t.treePath,e))}function X4(t,e,i,n,r,o){return Y4(t.writeTree,t.treePath,e,i,n,r,o)}function e0(t,e,i){return G4(t.writeTree,t.treePath,e,i)}function ik(t,e){return nk(dt(t.treePath,e),t.writeTree)}function nk(t,e){return{treePath:t,writeTree:e}}var gy=class{constructor(){this.changeMap=new Map}trackChildChange(e){let i=e.type,n=e.childName;k(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),k(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let o=r.type;if(i==="child_added"&&o==="child_removed")this.changeMap.set(n,Sd(n,e.snapshotNode,r.snapshotNode));else if(i==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(i==="child_removed"&&o==="child_changed")this.changeMap.set(n,Td(n,r.oldSnap));else if(i==="child_changed"&&o==="child_added")this.changeMap.set(n,Ha(n,e.snapshotNode));else if(i==="child_changed"&&o==="child_changed")this.changeMap.set(n,Sd(n,e.snapshotNode,r.oldSnap));else throw la("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}};var _y=class{getCompleteChild(e){return null}getChildAfterChild(e,i,n){return null}},rk=new _y,Rd=class{constructor(e,i,n=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=n}getCompleteChild(e){let i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{let n=this.optCompleteServerCache_!=null?new Wn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return e0(this.writes_,e,n)}}getChildAfterChild(e,i,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ls(this.viewCache_),o=X4(this.writes_,r,i,1,n,e);return o.length===0?null:o[0]}};function Z4(t){return{filter:t}}function J4(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function e5(t,e,i,n,r){let o=new gy,s,a;if(i.type===Hn.OVERWRITE){let c=i;c.source.fromUser?s=by(t,e,c.path,c.snap,n,r,o):(k(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ee(c.path),s=ef(t,e,c.path,c.snap,n,r,a,o))}else if(i.type===Hn.MERGE){let c=i;c.source.fromUser?s=i5(t,e,c.path,c.children,n,r,o):(k(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=vy(t,e,c.path,c.children,n,r,a,o))}else if(i.type===Hn.ACK_USER_WRITE){let c=i;c.revert?s=o5(t,e,c.path,n,r,o):s=n5(t,e,c.path,c.affectedTree,n,r,o)}else if(i.type===Hn.LISTEN_COMPLETE)s=r5(t,e,i.path,n,o);else throw la("Unknown operation type: "+i.type);let l=o.getChanges();return t5(e,s,l),{viewCache:s,changes:l}}function t5(t,e,i){let n=e.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=Xm(t);(i.length>0||!t.eventCache.isFullyInitialized()||r&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&i.push(XA(Xm(e)))}}function ok(t,e,i,n,r,o){let s=e.eventCache;if(Jm(n,i)!=null)return e;{let a,l;if(Ee(i))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=ls(e),d=c instanceof ge?c:ge.EMPTY_NODE,u=Jy(n,d);a=t.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let c=Zm(n,ls(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{let c=Ce(i);if(c===".priority"){k(no(i)===1,"Can't have a priority with additional path components");let d=s.getNode();l=e.serverCache.getNode();let u=hA(n,i,d,l);u!=null?a=t.filter.updatePriority(d,u):a=s.getNode()}else{let d=tt(i),u;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();let h=hA(n,i,s.getNode(),l);h!=null?u=s.getNode().getImmediateChild(c).updateChild(d,h):u=s.getNode().getImmediateChild(c)}else u=e0(n,c,e.serverCache);u!=null?a=t.filter.updateChild(s.getNode(),c,u,d,r,o):a=s.getNode()}}return yd(e,a,s.isFullyInitialized()||Ee(i),t.filter.filtersNodes())}}function ef(t,e,i,n,r,o,s,a){let l=e.serverCache,c,d=s?t.filter:t.filter.getIndexedFilter();if(Ee(i))c=d.updateFullNode(l.getNode(),n,null);else if(d.filtersNodes()&&!l.isFiltered()){let m=l.getNode().updateChild(i,n);c=d.updateFullNode(l.getNode(),m,null)}else{let m=Ce(i);if(!l.isCompleteForPath(i)&&no(i)>1)return e;let b=tt(i),E=l.getNode().getImmediateChild(m).updateChild(b,n);m===".priority"?c=d.updatePriority(l.getNode(),E):c=d.updateChild(l.getNode(),m,E,b,rk,null)}let u=ZA(e,c,l.isFullyInitialized()||Ee(i),d.filtersNodes()),h=new Rd(r,u,o);return ok(t,u,i,r,h,a)}function by(t,e,i,n,r,o,s){let a=e.eventCache,l,c,d=new Rd(r,e,o);if(Ee(i))c=t.filter.updateFullNode(e.eventCache.getNode(),n,s),l=yd(e,c,!0,t.filter.filtersNodes());else{let u=Ce(i);if(u===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),n),l=yd(e,c,a.isFullyInitialized(),a.isFiltered());else{let h=tt(i),m=a.getNode().getImmediateChild(u),b;if(Ee(h))b=n;else{let y=d.getCompleteChild(u);y!=null?$y(h)===".priority"&&y.getChild($A(h)).isEmpty()?b=y:b=y.updateChild(h,n):b=ge.EMPTY_NODE}if(m.equals(b))l=e;else{let y=t.filter.updateChild(a.getNode(),u,b,h,d,s);l=yd(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function mA(t,e){return t.eventCache.isCompleteForChild(e)}function i5(t,e,i,n,r,o,s){let a=e;return n.foreach((l,c)=>{let d=dt(i,l);mA(e,Ce(d))&&(a=by(t,a,d,c,r,o,s))}),n.foreach((l,c)=>{let d=dt(i,l);mA(e,Ce(d))||(a=by(t,a,d,c,r,o,s))}),a}function fA(t,e,i){return i.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function vy(t,e,i,n,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ee(i)?c=n:c=new fi(null).setTree(i,n);let d=e.serverCache.getNode();return c.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let m=e.serverCache.getNode().getImmediateChild(u),b=fA(t,m,h);l=ef(t,l,new Be(u),b,r,o,s,a)}}),c.children.inorderTraversal((u,h)=>{let m=!e.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!m){let b=e.serverCache.getNode().getImmediateChild(u),y=fA(t,b,h);l=ef(t,l,new Be(u),y,r,o,s,a)}}),l}function n5(t,e,i,n,r,o,s){if(Jm(r,i)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(Ee(i)&&l.isFullyInitialized()||l.isCompleteForPath(i))return ef(t,e,i,l.getNode().getChild(i),r,o,a,s);if(Ee(i)){let c=new fi(null);return l.getNode().forEachChild(qn,(d,u)=>{c=c.set(new Be(d),u)}),vy(t,e,i,c,r,o,a,s)}else return e}else{let c=new fi(null);return n.foreach((d,u)=>{let h=dt(i,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),vy(t,e,i,c,r,o,a,s)}}function r5(t,e,i,n,r){let o=e.serverCache,s=ZA(e,o.getNode(),o.isFullyInitialized()||Ee(i),o.isFiltered());return ok(t,s,i,n,rk,r)}function o5(t,e,i,n,r,o){let s;if(Jm(n,i)!=null)return e;{let a=new Rd(n,e,r),l=e.eventCache.getNode(),c;if(Ee(i)||Ce(i)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Zm(n,ls(e));else{let u=e.serverCache.getNode();k(u instanceof ge,"serverChildren would be complete if leaf node"),d=Jy(n,u)}d=d,c=t.filter.updateFullNode(l,d,o)}else{let d=Ce(i),u=e0(n,d,e.serverCache);u==null&&e.serverCache.isCompleteForChild(d)&&(u=l.getImmediateChild(d)),u!=null?c=t.filter.updateChild(l,d,u,tt(i),a,o):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,ge.EMPTY_NODE,tt(i),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Zm(n,ls(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Jm(n,je())!=null,yd(e,c,s,t.filter.filtersNodes())}}var yy=class{constructor(e,i){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new Dd(n.getIndex()),o=T4(n);this.processor_=Z4(o);let s=i.serverCache,a=i.eventCache,l=r.updateFullNode(ge.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ge.EMPTY_NODE,a.getNode(),null),d=new Wn(l,s.isFullyInitialized(),r.filtersNodes()),u=new Wn(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=pf(u,d),this.eventGenerator_=new hy(this.query_)}get query(){return this.query_}};function s5(t){return t.viewCache_.serverCache.getNode()}function a5(t){return Xm(t.viewCache_)}function l5(t,e){let i=ls(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!Ee(e)&&!i.getImmediateChild(Ce(e)).isEmpty())?i.getChild(e):null}function pA(t){return t.eventRegistrations_.length===0}function c5(t,e){t.eventRegistrations_.push(e)}function gA(t,e,i){let n=[];if(i){k(e==null,"A cancel should cancel all event registrations.");let r=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(i,r);s&&n.push(s)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))r.push(s);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return n}function _A(t,e,i,n){e.type===Hn.MERGE&&e.source.queryId!==null&&(k(ls(t.viewCache_),"We should always have a full cache before handling merges"),k(Xm(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,o=e5(t.processor_,r,e,i,n);return J4(t.processor_,o.viewCache),k(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,sk(t,o.changes,o.viewCache.eventCache.getNode(),null)}function d5(t,e){let i=t.viewCache_.eventCache,n=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(ot,(o,s)=>{n.push(Ha(o,s))}),i.isFullyInitialized()&&n.push(XA(i.getNode())),sk(t,n,i.getNode(),e)}function sk(t,e,i,n){let r=n?[n]:t.eventRegistrations_;return O4(t.eventGenerator_,e,i,r)}var tf,nf=class{constructor(){this.views=new Map}};function u5(t){k(!tf,"__referenceConstructor has already been defined"),tf=t}function h5(){return k(tf,"Reference.ts has not been loaded"),tf}function m5(t){return t.views.size===0}function t0(t,e,i,n){let r=e.source.queryId;if(r!==null){let o=t.views.get(r);return k(o!=null,"SyncTree gave us an op for an invalid query."),_A(o,e,i,n)}else{let o=[];for(let s of t.views.values())o=o.concat(_A(s,e,i,n));return o}}function ak(t,e,i,n,r){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Zm(i,r?n:null),l=!1;a?l=!0:n instanceof ge?(a=Jy(i,n),l=!1):(a=ge.EMPTY_NODE,l=!1);let c=pf(new Wn(a,l,!1),new Wn(n,r,!1));return new yy(e,c)}return s}function f5(t,e,i,n,r,o){let s=ak(t,e,n,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),c5(s,i),d5(s,i)}function p5(t,e,i,n){let r=e._queryIdentifier,o=[],s=[],a=ro(t);if(r==="default")for(let[l,c]of t.views.entries())s=s.concat(gA(c,i,n)),pA(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{let l=t.views.get(r);l&&(s=s.concat(gA(l,i,n)),pA(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!ro(t)&&o.push(new(h5())(e._repo,e._path)),{removed:o,events:s}}function lk(t){let e=[];for(let i of t.views.values())i.query._queryParams.loadsAllData()||e.push(i);return e}function to(t,e){let i=null;for(let n of t.views.values())i=i||l5(n,e);return i}function ck(t,e){if(e._queryParams.loadsAllData())return _f(t);{let n=e._queryIdentifier;return t.views.get(n)}}function dk(t,e){return ck(t,e)!=null}function ro(t){return _f(t)!=null}function _f(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var rf;function g5(t){k(!rf,"__referenceConstructor has already been defined"),rf=t}function _5(){return k(rf,"Reference.ts has not been loaded"),rf}var b5=1,of=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fi(null),this.pendingWriteTree_=Q4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function i0(t,e,i,n,r){return L4(t.pendingWriteTree_,e,i,n,r),r?Qa(t,new qa(Qy(),e,i)):[]}function v5(t,e,i,n){j4(t.pendingWriteTree_,e,i,n);let r=fi.fromObject(i);return Qa(t,new kd(Qy(),e,r))}function Jr(t,e,i=!1){let n=B4(t.pendingWriteTree_,e);if(z4(t.pendingWriteTree_,e)){let o=new fi(null);return n.snap!=null?o=o.set(je(),!0):$t(n.children,s=>{o=o.set(new Be(s),!0)}),Qa(t,new uy(n.path,o,i))}else return[]}function Bd(t,e,i){return Qa(t,new qa(Xy(),e,i))}function y5(t,e,i){let n=fi.fromObject(i);return Qa(t,new kd(Xy(),e,n))}function w5(t,e){return Qa(t,new Qm(Xy(),e))}function x5(t,e,i){let n=n0(t,i);if(n){let r=r0(n),o=r.path,s=r.queryId,a=mi(o,e),l=new Qm(Zy(s),a);return o0(t,o,l)}else return[]}function sf(t,e,i,n,r=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||dk(s,e))){let l=p5(s,e,i,n);m5(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let c=l.removed;if(a=l.events,!r){let d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(o,(h,m)=>ro(m));if(d&&!u){let h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){let m=I5(h);for(let b=0;b<m.length;++b){let y=m[b],E=y.query,j=fk(t,y);t.listenProvider_.startListening(xd(E),Md(t,E),j.hashFn,j.onComplete)}}}!u&&c.length>0&&!n&&(d?t.listenProvider_.stopListening(xd(e),null):c.forEach(h=>{let m=t.queryToTagMap.get(vf(h));t.listenProvider_.stopListening(xd(h),m)}))}T5(t,c)}return a}function uk(t,e,i,n){let r=n0(t,n);if(r!=null){let o=r0(r),s=o.path,a=o.queryId,l=mi(s,e),c=new qa(Zy(a),l,i);return o0(t,s,c)}else return[]}function C5(t,e,i,n){let r=n0(t,n);if(r){let o=r0(r),s=o.path,a=o.queryId,l=mi(s,e),c=fi.fromObject(i),d=new kd(Zy(a),l,c);return o0(t,s,d)}else return[]}function wy(t,e,i,n=!1){let r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(h,m)=>{let b=mi(h,r);o=o||to(m,b),s=s||ro(m)});let a=t.syncPointTree_.get(r);a?(s=s||ro(a),o=o||to(a,je())):(a=new nf,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;o!=null?l=!0:(l=!1,o=ge.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((m,b)=>{let y=to(b,je());y&&(o=o.updateImmediateChild(m,y))}));let c=dk(a,e);if(!c&&!e._queryParams.loadsAllData()){let h=vf(e);k(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let m=S5();t.queryToTagMap.set(h,m),t.tagToQueryMap.set(m,h)}let d=gf(t.pendingWriteTree_,r),u=f5(a,e,i,d,o,l);if(!c&&!s&&!n){let h=ck(a,e);u=u.concat(D5(t,e,h))}return u}function bf(t,e,i){let r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let l=mi(s,e),c=to(a,l);if(c)return c});return tk(r,e,o,i,!0)}function E5(t,e){let i=e._path,n=null;t.syncPointTree_.foreachOnPath(i,(c,d)=>{let u=mi(c,i);n=n||to(d,u)});let r=t.syncPointTree_.get(i);r?n=n||to(r,je()):(r=new nf,t.syncPointTree_=t.syncPointTree_.set(i,r));let o=n!=null,s=o?new Wn(n,!0,!1):null,a=gf(t.pendingWriteTree_,e._path),l=ak(r,e,a,o?s.getNode():ge.EMPTY_NODE,o);return a5(l)}function Qa(t,e){return hk(e,t.syncPointTree_,null,gf(t.pendingWriteTree_,je()))}function hk(t,e,i,n){if(Ee(t.path))return mk(t,e,i,n);{let r=e.get(je());i==null&&r!=null&&(i=to(r,je()));let o=[],s=Ce(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){let c=i?i.getImmediateChild(s):null,d=ik(n,s);o=o.concat(hk(a,l,c,d))}return r&&(o=o.concat(t0(r,t,n,i))),o}}function mk(t,e,i,n){let r=e.get(je());i==null&&r!=null&&(i=to(r,je()));let o=[];return e.children.inorderTraversal((s,a)=>{let l=i?i.getImmediateChild(s):null,c=ik(n,s),d=t.operationForChild(s);d&&(o=o.concat(mk(d,a,l,c)))}),r&&(o=o.concat(t0(r,t,n,i))),o}function fk(t,e){let i=e.query,n=Md(t,i);return{hashFn:()=>(s5(e)||ge.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return n?x5(t,i._path,n):w5(t,i._path);{let o=LU(r,i);return sf(t,i,null,o)}}}}function Md(t,e){let i=vf(e);return t.queryToTagMap.get(i)}function vf(t){return t._path.toString()+"$"+t._queryIdentifier}function n0(t,e){return t.tagToQueryMap.get(e)}function r0(t){let e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Be(t.substr(0,e))}}function o0(t,e,i){let n=t.syncPointTree_.get(e);k(n,"Missing sync point for query tag that we're tracking");let r=gf(t.pendingWriteTree_,e);return t0(n,i,r,null)}function I5(t){return t.fold((e,i,n)=>{if(i&&ro(i))return[_f(i)];{let r=[];return i&&(r=lk(i)),$t(n,(o,s)=>{r=r.concat(s)}),r}})}function xd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(_5())(t._repo,t._path):t}function T5(t,e){for(let i=0;i<e.length;++i){let n=e[i];if(!n._queryParams.loadsAllData()){let r=vf(n),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function S5(){return b5++}function D5(t,e,i){let n=e._path,r=Md(t,e),o=fk(t,i),s=t.listenProvider_.startListening(xd(e),r,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(n);if(r)k(!ro(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,u)=>{if(!Ee(c)&&d&&ro(d))return[_f(d).query];{let h=[];return d&&(h=h.concat(lk(d).map(m=>m.query))),$t(u,(m,b)=>{h=h.concat(b)}),h}});for(let c=0;c<l.length;++c){let d=l[c];t.listenProvider_.stopListening(xd(d),Md(t,d))}}return s}var xy=class t{constructor(e){this.node_=e}getImmediateChild(e){let i=this.node_.getImmediateChild(e);return new t(i)}node(){return this.node_}},Cy=class t{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){let i=dt(this.path_,e);return new t(this.syncTree_,i)}node(){return bf(this.syncTree_,this.path_)}},A5=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},bA=function(t,e,i){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return k5(t[".sv"],e,i);if(typeof t[".sv"]=="object")return R5(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},k5=function(t,e,i){switch(t){case"timestamp":return i.timestamp;default:k(!1,"Unexpected server value: "+t)}},R5=function(t,e,i){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let n=t.increment;typeof n!="number"&&k(!1,"Unexpected increment value: "+n);let r=e.node();if(k(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let s=r.getValue();return typeof s!="number"?n:s+n},pk=function(t,e,i,n){return a0(e,new Cy(i,t),n)},s0=function(t,e,i){return a0(t,new xy(e),i)};function a0(t,e,i){let n=t.getPriority().val(),r=bA(n,e.getImmediateChild(".priority"),i),o;if(t.isLeafNode()){let s=t,a=bA(s.getValue(),e,i);return a!==s.getValue()||r!==s.getPriority().val()?new za(a,mt(r)):t}else{let s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new za(r))),s.forEachChild(ot,(a,l)=>{let c=a0(l,e.getImmediateChild(a),i);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var Pd=class{constructor(e="",i=null,n={children:{},childCount:0}){this.name=e,this.parent=i,this.node=n}};function yf(t,e){let i=e instanceof Be?e:new Be(e),n=t,r=Ce(i);for(;r!==null;){let o=Or(n.node.children,r)||{children:{},childCount:0};n=new Pd(r,n,o),i=tt(i),r=Ce(i)}return n}function us(t){return t.node.value}function l0(t,e){t.node.value=e,Ey(t)}function gk(t){return t.node.childCount>0}function M5(t){return us(t)===void 0&&!gk(t)}function wf(t,e){$t(t.node.children,(i,n)=>{e(new Pd(i,t,n))})}function _k(t,e,i,n){i&&!n&&e(t),wf(t,r=>{_k(r,e,!0,n)}),i&&n&&e(t)}function P5(t,e,i){let n=i?t:t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function zd(t){return new Be(t.parent===null?t.name:zd(t.parent)+"/"+t.name)}function Ey(t){t.parent!==null&&O5(t.parent,t.name,t)}function O5(t,e,i){let n=M5(i),r=Wi(t.node.children,e);n&&r?(delete t.node.children[e],t.node.childCount--,Ey(t)):!n&&!r&&(t.node.children[e]=i.node,t.node.childCount++,Ey(t))}var F5=/[\[\].#$\/\u0000-\u001F\u007F]/,N5=/[\[\].#$\u0000-\u001F\u007F]/,Fv=10*1024*1024,xf=function(t){return typeof t=="string"&&t.length!==0&&!F5.test(t)},bk=function(t){return typeof t=="string"&&t.length!==0&&!N5.test(t)},V5=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bk(t)},Od=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!mf(t)||t&&typeof t=="object"&&Wi(t,".sv")},Gn=function(t,e,i,n){n&&e===void 0||Ud(Ii(t,"value"),e,i)},Ud=function(t,e,i){let n=i instanceof Be?new Kv(i,t):i;if(e===void 0)throw new Error(t+"contains undefined "+os(n));if(typeof e=="function")throw new Error(t+"contains a function "+os(n)+" with contents = "+e.toString());if(mf(e))throw new Error(t+"contains "+e.toString()+" "+os(n));if(typeof e=="string"&&e.length>Fv/3&&oc(e)>Fv)throw new Error(t+"contains a string greater than "+Fv+" utf8 bytes "+os(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if($t(e,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!xf(s)))throw new Error(t+" contains an invalid key ("+s+") "+os(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);m4(n,s),Ud(t,a,n),f4(n)}),r&&o)throw new Error(t+' contains ".value" child '+os(n)+" in addition to actual children.")}},L5=function(t,e){let i,n;for(i=0;i<e.length;i++){n=e[i];let o=Ed(n);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!xf(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(h4);let r=null;for(i=0;i<e.length;i++){if(n=e[i],r!==null&&rn(r,n))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}},vk=function(t,e,i,n){if(n&&e===void 0)return;let r=Ii(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");let o=[];$t(e,(s,a)=>{let l=new Be(s);if(Ud(r,a,dt(i,l)),$y(l)===".priority"&&!Od(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),L5(r,o)},c0=function(t,e,i){if(!(i&&e===void 0)){if(mf(e))throw new Error(Ii(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Od(e))throw new Error(Ii(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Hd=function(t,e,i,n){if(!(n&&i===void 0)&&!xf(i))throw new Error(Ii(t,e)+'was an invalid key = "'+i+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Xa=function(t,e,i,n){if(!(n&&i===void 0)&&!bk(i))throw new Error(Ii(t,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},j5=function(t,e,i,n){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Xa(t,e,i,n)},Fi=function(t,e){if(Ce(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yk=function(t,e){let i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xf(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!V5(i))throw new Error(Ii(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Iy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Cf(t,e){let i=null;for(let n=0;n<e.length;n++){let r=e[n],o=r.getPath();i!==null&&!Wy(o,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:o}),i.events.push(r)}i&&t.eventLists_.push(i)}function wk(t,e,i){Cf(t,i),xk(t,n=>Wy(n,e))}function Ni(t,e,i){Cf(t,i),xk(t,n=>rn(n,e)||rn(e,n))}function xk(t,e){t.recursionDepth_++;let i=!0;for(let n=0;n<t.eventLists_.length;n++){let r=t.eventLists_[n];if(r){let o=r.path;e(o)?(B5(t.eventLists_[n]),t.eventLists_[n]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function B5(t){for(let e=0;e<t.events.length;e++){let i=t.events[e];if(i!==null){t.events[e]=null;let n=i.getEventRunner();as&&qt("event: "+i.toString()),Ka(n)}}}var Ck="repo_interrupt",z5=25,Ty=class{constructor(e,i,n,r){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Iy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ym(),this.transactionQueueTree_=new Pd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function U5(t,e,i){if(t.stats_=qy(t.repoInfo_),t.forceRestClient_||UU())t.server_=new oy(t.repoInfo_,(n,r,o,s)=>{vA(t,n,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yA(t,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Rt(i)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new Gy(t.repoInfo_,e,(n,r,o,s)=>{vA(t,n,r,o,s)},n=>{yA(t,n)},n=>{H5(t,n)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=qU(t.repoInfo_,()=>new dy(t.stats_,t.server_)),t.infoData_=new sy,t.infoSyncTree_=new of({startListening:(n,r,o,s)=>{let a=[],l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=Bd(t.infoSyncTree_,n._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),d0(t,"connected",!1),t.serverSyncTree_=new of({startListening:(n,r,o,s)=>(t.server_.listen(n,o,r,(a,l)=>{let c=s(a,l);Ni(t.eventQueue_,n._path,c)}),[]),stopListening:(n,r)=>{t.server_.unlisten(n,r)}})}function Ek(t){let i=t.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function qd(t){return A5({timestamp:Ek(t)})}function vA(t,e,i,n,r){t.dataUpdateCount++;let o=new Be(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let s=[];if(r)if(n){let l=rc(i,c=>mt(c));s=C5(t.serverSyncTree_,o,l,r)}else{let l=mt(i);s=uk(t.serverSyncTree_,o,l,r)}else if(n){let l=rc(i,c=>mt(c));s=y5(t.serverSyncTree_,o,l)}else{let l=mt(i);s=Bd(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Wa(t,o)),Ni(t.eventQueue_,a,s)}function yA(t,e){d0(t,"connected",e),e===!1&&W5(t)}function H5(t,e){$t(e,(i,n)=>{d0(t,i,n)})}function d0(t,e,i){let n=new Be("/.info/"+e),r=mt(i);t.infoData_.updateSnapshot(n,r);let o=Bd(t.infoSyncTree_,n,r);Ni(t.eventQueue_,n,o)}function Ef(t){return t.nextWriteId_++}function q5(t,e,i){let n=E5(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(r=>{let o=mt(r).withIndex(e._queryParams.getIndex());wy(t.serverSyncTree_,e,i,!0);let s;if(e._queryParams.loadsAllData())s=Bd(t.serverSyncTree_,e._path,o);else{let a=Md(t.serverSyncTree_,e);s=uk(t.serverSyncTree_,e._path,o,a)}return Ni(t.eventQueue_,e._path,s),sf(t.serverSyncTree_,e,i,null,!0),o},r=>(Za(t,"get for query "+Rt(e)+" failed: "+r),Promise.reject(new Error(r))))}function u0(t,e,i,n,r){Za(t,"set",{path:e.toString(),value:i,priority:n});let o=qd(t),s=mt(i,n),a=bf(t.serverSyncTree_,e),l=s0(s,a,o),c=Ef(t),d=i0(t.serverSyncTree_,e,l,c,!0);Cf(t.eventQueue_,d),t.server_.put(e.toString(),s.val(!0),(h,m)=>{let b=h==="ok";b||si("set at "+e+" failed: "+h);let y=Jr(t.serverSyncTree_,c,!b);Ni(t.eventQueue_,e,y),oo(t,r,h,m)});let u=m0(t,e);Wa(t,u),Ni(t.eventQueue_,u,[])}function $5(t,e,i,n){Za(t,"update",{path:e.toString(),value:i});let r=!0,o=qd(t),s={};if($t(i,(a,l)=>{r=!1,s[a]=pk(dt(e,a),mt(l),t.serverSyncTree_,o)}),r)qt("update() called with empty data.  Don't do anything."),oo(t,n,"ok",void 0);else{let a=Ef(t),l=v5(t.serverSyncTree_,e,s,a);Cf(t.eventQueue_,l),t.server_.merge(e.toString(),i,(c,d)=>{let u=c==="ok";u||si("update at "+e+" failed: "+c);let h=Jr(t.serverSyncTree_,a,!u),m=h.length>0?Wa(t,e):e;Ni(t.eventQueue_,m,h),oo(t,n,c,d)}),$t(i,c=>{let d=m0(t,dt(e,c));Wa(t,d)}),Ni(t.eventQueue_,e,[])}}function W5(t){Za(t,"onDisconnectEvents");let e=qd(t),i=Ym();ly(t.onDisconnect_,je(),(r,o)=>{let s=pk(r,o,t.serverSyncTree_,e);Ya(i,r,s)});let n=[];ly(i,je(),(r,o)=>{n=n.concat(Bd(t.serverSyncTree_,r,o));let s=m0(t,r);Wa(t,s)}),t.onDisconnect_=Ym(),Ni(t.eventQueue_,je(),n)}function G5(t,e,i){t.server_.onDisconnectCancel(e.toString(),(n,r)=>{n==="ok"&&ay(t.onDisconnect_,e),oo(t,i,n,r)})}function wA(t,e,i,n){let r=mt(i);t.server_.onDisconnectPut(e.toString(),r.val(!0),(o,s)=>{o==="ok"&&Ya(t.onDisconnect_,e,r),oo(t,n,o,s)})}function K5(t,e,i,n,r){let o=mt(i,n);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&Ya(t.onDisconnect_,e,o),oo(t,r,s,a)})}function Y5(t,e,i,n){if(xh(i)){qt("onDisconnect().update() called with empty data.  Don't do anything."),oo(t,n,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),i,(r,o)=>{r==="ok"&&$t(i,(s,a)=>{let l=mt(a);Ya(t.onDisconnect_,dt(e,s),l)}),oo(t,n,r,o)})}function Q5(t,e,i){let n;Ce(e._path)===".info"?n=wy(t.infoSyncTree_,e,i):n=wy(t.serverSyncTree_,e,i),wk(t.eventQueue_,e._path,n)}function Sy(t,e,i){let n;Ce(e._path)===".info"?n=sf(t.infoSyncTree_,e,i):n=sf(t.serverSyncTree_,e,i),wk(t.eventQueue_,e._path,n)}function Ik(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Ck)}function X5(t){t.persistentConnection_&&t.persistentConnection_.resume(Ck)}function Za(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),qt(i,...e)}function oo(t,e,i,n){e&&Ka(()=>{if(i==="ok")e(null);else{let r=(i||"error").toUpperCase(),o=r;n&&(o+=": "+n);let s=new Error(o);s.code=r,e(s)}})}function Z5(t,e,i,n,r,o){Za(t,"transaction on "+e);let s={path:e,update:i,onComplete:n,status:null,order:EA(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=h0(t,e,void 0);s.currentInputSnapshot=a;let l=s.update(a.val());if(l===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Ud("transaction failed: Data returned ",l,s.path),s.status=0;let c=yf(t.transactionQueueTree_,e),d=us(c)||[];d.push(s),l0(c,d);let u;typeof l=="object"&&l!==null&&Wi(l,".priority")?(u=Or(l,".priority"),k(Od(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(bf(t.serverSyncTree_,e)||ge.EMPTY_NODE).getPriority().val();let h=qd(t),m=mt(l,u),b=s0(m,a,h);s.currentOutputSnapshotRaw=m,s.currentOutputSnapshotResolved=b,s.currentWriteId=Ef(t);let y=i0(t.serverSyncTree_,e,b,s.currentWriteId,s.applyLocally);Ni(t.eventQueue_,e,y),If(t,t.transactionQueueTree_)}}function h0(t,e,i){return bf(t.serverSyncTree_,e,i)||ge.EMPTY_NODE}function If(t,e=t.transactionQueueTree_){if(e||Tf(t,e),us(e)){let i=Sk(t,e);k(i.length>0,"Sending zero length transaction queue"),i.every(r=>r.status===0)&&J5(t,zd(e),i)}else gk(e)&&wf(e,i=>{If(t,i)})}function J5(t,e,i){let n=i.map(c=>c.currentWriteId),r=h0(t,e,n),o=r,s=r.hash();for(let c=0;c<i.length;c++){let d=i[c];k(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=mi(e,d.path);o=o.updateChild(u,d.currentOutputSnapshotRaw)}let a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Za(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let u=[];for(let h=0;h<i.length;h++)i[h].status=2,d=d.concat(Jr(t.serverSyncTree_,i[h].currentWriteId)),i[h].onComplete&&u.push(()=>i[h].onComplete(null,!0,i[h].currentOutputSnapshotResolved)),i[h].unwatcher();Tf(t,yf(t.transactionQueueTree_,e)),If(t,t.transactionQueueTree_),Ni(t.eventQueue_,e,d);for(let h=0;h<u.length;h++)Ka(u[h])}else{if(c==="datastale")for(let u=0;u<i.length;u++)i[u].status===3?i[u].status=4:i[u].status=0;else{si("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<i.length;u++)i[u].status=4,i[u].abortReason=c}Wa(t,e)}},s)}function Wa(t,e){let i=Tk(t,e),n=zd(i),r=Sk(t,i);return e3(t,r,n),n}function e3(t,e,i){if(e.length===0)return;let n=[],r=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=mi(i,l.path),d=!1,u;if(k(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,u=l.abortReason,r=r.concat(Jr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=z5)d=!0,u="maxretry",r=r.concat(Jr(t.serverSyncTree_,l.currentWriteId,!0));else{let h=h0(t,l.path,s);l.currentInputSnapshot=h;let m=e[a].update(h.val());if(m!==void 0){Ud("transaction failed: Data returned ",m,l.path);let b=mt(m);typeof m=="object"&&m!=null&&Wi(m,".priority")||(b=b.updatePriority(h.getPriority()));let E=l.currentWriteId,j=qd(t),re=s0(b,h,j);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=re,l.currentWriteId=Ef(t),s.splice(s.indexOf(E),1),r=r.concat(i0(t.serverSyncTree_,l.path,re,l.currentWriteId,l.applyLocally)),r=r.concat(Jr(t.serverSyncTree_,E,!0))}else d=!0,u="nodata",r=r.concat(Jr(t.serverSyncTree_,l.currentWriteId,!0))}Ni(t.eventQueue_,i,r),r=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(u),!1,null))))}Tf(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Ka(n[a]);If(t,t.transactionQueueTree_)}function Tk(t,e){let i,n=t.transactionQueueTree_;for(i=Ce(e);i!==null&&us(n)===void 0;)n=yf(n,i),e=tt(e),i=Ce(e);return n}function Sk(t,e){let i=[];return Dk(t,e,i),i.sort((n,r)=>n.order-r.order),i}function Dk(t,e,i){let n=us(e);if(n)for(let r=0;r<n.length;r++)i.push(n[r]);wf(e,r=>{Dk(t,r,i)})}function Tf(t,e){let i=us(e);if(i){let n=0;for(let r=0;r<i.length;r++)i[r].status!==2&&(i[n]=i[r],n++);i.length=n,l0(e,i.length>0?i:void 0)}wf(e,n=>{Tf(t,n)})}function m0(t,e){let i=zd(Tk(t,e)),n=yf(t.transactionQueueTree_,e);return P5(n,r=>{Nv(t,r)}),Nv(t,n),_k(n,r=>{Nv(t,r)}),i}function Nv(t,e){let i=us(e);if(i){let n=[],r=[],o=-1;for(let s=0;s<i.length;s++)i[s].status===3||(i[s].status===1?(k(o===s-1,"All SENT items should be at beginning of queue."),o=s,i[s].status=3,i[s].abortReason="set"):(k(i[s].status===0,"Unexpected transaction status in abort"),i[s].unwatcher(),r=r.concat(Jr(t.serverSyncTree_,i[s].currentWriteId,!0)),i[s].onComplete&&n.push(i[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?l0(e,void 0):i.length=o+1,Ni(t.eventQueue_,zd(e),r);for(let s=0;s<n.length;s++)Ka(n[s])}}function t3(t){let e="",i=t.split("/");for(let n=0;n<i.length;n++)if(i[n].length>0){let r=i[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function i3(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let i of t.split("&")){if(i.length===0)continue;let n=i.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):si(`Invalid query segment '${i}' in query '${t}'`)}return e}var Dy=function(t,e){let i=n3(t),n=i.namespace;i.domain==="firebase.com"&&$n(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&i.domain!=="localhost"&&$n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||PU();let r=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new zm(i.host,i.secure,n,r,e,"",n!==i.subdomain),path:new Be(i.pathString)}},n3=function(t){let e="",i="",n="",r="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),e=t.substring(0,Math.min(d,u)),d<u&&(r=t3(t.substring(d,u)));let h=i3(t.substring(Math.min(t.length,u)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let m=e.slice(0,c);if(m.toLowerCase()==="localhost")i="localhost";else if(m.split(".").length<=2)i=m;else{let b=e.indexOf(".");n=e.substring(0,b).toLowerCase(),i=e.substring(b+1),o=n}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:i,subdomain:n,secure:s,scheme:a,pathString:r,namespace:o}};var xA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r3=function(){let t=0,e=[];return function(i){let n=i===t;t=i;let r,o=new Array(8);for(r=7;r>=0;r--)o[r]=xA.charAt(i%64),i=Math.floor(i/64);k(i===0,"Cannot push at time == 0");let s=o.join("");if(n){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)s+=xA.charAt(e[r]);return k(s.length===20,"nextPushId: Length should be 20."),s}}();var af=class{constructor(e,i,n,r){this.eventType=e,this.eventRegistration=i,this.snapshot=n,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Rt(this.snapshot.exportVal())}},lf=class{constructor(e,i,n){this.eventRegistration=e,this.error=i,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Fd=class{constructor(e,i){this.snapshotCallback=e,this.cancelCallback=i}onValue(e,i){this.snapshotCallback.call(null,e,i)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var cf=class{constructor(e,i){this._repo=e,this._path=i}cancel(){let e=new Ut;return G5(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fi("OnDisconnect.remove",this._path);let e=new Ut;return wA(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fi("OnDisconnect.set",this._path),Gn("OnDisconnect.set",e,this._path,!1);let i=new Ut;return wA(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}setWithPriority(e,i){Fi("OnDisconnect.setWithPriority",this._path),Gn("OnDisconnect.setWithPriority",e,this._path,!1),c0("OnDisconnect.setWithPriority",i,!1);let n=new Ut;return K5(this._repo,this._path,e,i,n.wrapCallback(()=>{})),n.promise}update(e){Fi("OnDisconnect.update",this._path),vk("OnDisconnect.update",e,this._path,!1);let i=new Ut;return Y5(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}};var pi=class t{constructor(e,i,n,r){this._repo=e,this._path=i,this._queryParams=n,this._orderByCalled=r}get key(){return Ee(this._path)?null:$y(this._path)}get ref(){return new Vi(this._repo,this._path)}get _queryIdentifier(){let e=lA(this._queryParams),i=Hy(e);return i==="{}"?"default":i}get _queryObject(){return lA(this._queryParams)}isEqual(e){if(e=De(e),!(e instanceof t))return!1;let i=this._repo===e._repo,n=Wy(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return i&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+u4(this._path)}};function Sf(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ao(t){let e=null,i=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(i=t.getIndexEndValue()),t.getIndex()===qn){let n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==io)throw new Error(n);if(typeof e!="string")throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==_r)throw new Error(n);if(typeof i!="string")throw new Error(r)}}else if(t.getIndex()===ot){if(e!=null&&!Od(e)||i!=null&&!Od(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(k(t.getIndex()instanceof Id||t.getIndex()===Yy,"unknown index type."),e!=null&&typeof e=="object"||i!=null&&typeof i=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Df(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Vi=class t extends pi{constructor(e,i){super(e,i,new Ad,!1)}get parent(){let e=$A(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ga=class t{constructor(e,i,n){this._node=e,this.ref=i,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let i=new Be(e),n=so(this.ref,e);return new t(this._node.getChild(i),n,ot)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>e(new t(r,so(this.ref,n),ot)))}hasChild(e){let i=new Be(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function f0(t,e){return t=De(t),t._checkNotDeleted("ref"),e!==void 0?so(t._root,e):t._root}function p0(t,e){t=De(t),t._checkNotDeleted("refFromURL");let i=Dy(e,t._repo.repoInfo_.nodeAdmin);yk("refFromURL",i);let n=i.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&n.host!==t._repo.repoInfo_.host&&$n("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+t._repo.repoInfo_.host+")"),f0(t,i.path.toString())}function so(t,e){return t=De(t),Ce(t._path)===null?j5("child","path",e,!1):Xa("child","path",e,!1),new Vi(t._repo,dt(t._path,e))}function Ak(t,e){t=De(t),Fi("push",t._path),Gn("push",e,t._path,!0);let i=Ek(t._repo),n=r3(i),r=so(t,n),o=so(t,n),s;return e!=null?s=Af(o,e).then(()=>o):s=Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}function kk(t){return Fi("remove",t._path),Af(t,null)}function Af(t,e){t=De(t),Fi("set",t._path),Gn("set",e,t._path,!1);let i=new Ut;return u0(t._repo,t._path,e,null,i.wrapCallback(()=>{})),i.promise}function Rk(t,e){t=De(t),Fi("setPriority",t._path),c0("setPriority",e,!1);let i=new Ut;return u0(t._repo,dt(t._path,".priority"),e,null,i.wrapCallback(()=>{})),i.promise}function Mk(t,e,i){if(Fi("setWithPriority",t._path),Gn("setWithPriority",e,t._path,!1),c0("setWithPriority",i,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let n=new Ut;return u0(t._repo,t._path,e,i,n.wrapCallback(()=>{})),n.promise}function Pk(t,e){vk("update",e,t._path,!1);let i=new Ut;return $5(t._repo,t._path,e,i.wrapCallback(()=>{})),i.promise}function Ok(t){t=De(t);let e=new Fd(()=>{}),i=new Nd(e);return q5(t._repo,t,i).then(n=>new Ga(n,new Vi(t._repo,t._path),t._queryParams.getIndex()))}var Nd=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,i){let n=i._queryParams.getIndex();return new af("value",this,new Ga(e.snapshotNode,new Vi(i._repo,i._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new lf(this,e,i):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},df=class t{constructor(e,i){this.eventType=e,this.callbackContext=i}respondsTo(e){let i=e==="children_added"?"child_added":e;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new lf(this,e,i):null}createEvent(e,i){k(e.childName!=null,"Child events should have a childName.");let n=so(new Vi(i._repo,i._path),e.childName),r=i._queryParams.getIndex();return new af(e.type,this,new Ga(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function $d(t,e,i,n,r){let o;if(typeof n=="object"&&(o=void 0,r=n),typeof n=="function"&&(o=n),r&&r.onlyOnce){let l=i,c=(d,u)=>{Sy(t._repo,t,a),l(d,u)};c.userCallback=i.userCallback,c.context=i.context,i=c}let s=new Fd(i,o||void 0),a=e==="value"?new Nd(s):new df(e,s);return Q5(t._repo,t,a),()=>Sy(t._repo,t,a)}function kf(t,e,i,n){return $d(t,"value",e,i,n)}function g0(t,e,i,n){return $d(t,"child_added",e,i,n)}function _0(t,e,i,n){return $d(t,"child_changed",e,i,n)}function b0(t,e,i,n){return $d(t,"child_moved",e,i,n)}function v0(t,e,i,n){return $d(t,"child_removed",e,i,n)}function y0(t,e,i){let n=null,r=i?new Fd(i):null;e==="value"?n=new Nd(r):e&&(n=new df(e,r)),Sy(t._repo,t,n)}var Li=class{},uf=class extends Li{constructor(e,i){super(),this._value=e,this._key=i,this.type="endAt"}_apply(e){Gn("endAt",this._value,e._path,!0);let i=ry(e._queryParams,this._value,this._key);if(Df(i),ao(i),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pi(e._repo,e._path,i,e._orderByCalled)}};function Fk(t,e){return Hd("endAt","key",e,!0),new uf(t,e)}var Ay=class extends Li{constructor(e,i){super(),this._value=e,this._key=i,this.type="endBefore"}_apply(e){Gn("endBefore",this._value,e._path,!1);let i=k4(e._queryParams,this._value,this._key);if(Df(i),ao(i),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new pi(e._repo,e._path,i,e._orderByCalled)}};function Nk(t,e){return Hd("endBefore","key",e,!0),new Ay(t,e)}var hf=class extends Li{constructor(e,i){super(),this._value=e,this._key=i,this.type="startAt"}_apply(e){Gn("startAt",this._value,e._path,!0);let i=ny(e._queryParams,this._value,this._key);if(Df(i),ao(i),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new pi(e._repo,e._path,i,e._orderByCalled)}};function Vk(t=null,e){return Hd("startAt","key",e,!0),new hf(t,e)}var ky=class extends Li{constructor(e,i){super(),this._value=e,this._key=i,this.type="startAfter"}_apply(e){Gn("startAfter",this._value,e._path,!1);let i=A4(e._queryParams,this._value,this._key);if(Df(i),ao(i),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new pi(e._repo,e._path,i,e._orderByCalled)}};function Lk(t,e){return Hd("startAfter","key",e,!0),new ky(t,e)}var Ry=class extends Li{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new pi(e._repo,e._path,S4(e._queryParams,this._limit),e._orderByCalled)}};function jk(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ry(t)}var My=class extends Li{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new pi(e._repo,e._path,D4(e._queryParams,this._limit),e._orderByCalled)}};function Bk(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new My(t)}var Py=class extends Li{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Sf(e,"orderByChild");let i=new Be(this._path);if(Ee(i))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new Id(i),r=ff(e._queryParams,n);return ao(r),new pi(e._repo,e._path,r,!0)}};function zk(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xa("orderByChild","path",t,!1),new Py(t)}var Oy=class extends Li{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Sf(e,"orderByKey");let i=ff(e._queryParams,qn);return ao(i),new pi(e._repo,e._path,i,!0)}};function Uk(){return new Oy}var Fy=class extends Li{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Sf(e,"orderByPriority");let i=ff(e._queryParams,ot);return ao(i),new pi(e._repo,e._path,i,!0)}};function Hk(){return new Fy}var Ny=class extends Li{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Sf(e,"orderByValue");let i=ff(e._queryParams,Yy);return ao(i),new pi(e._repo,e._path,i,!0)}};function qk(){return new Ny}var Vy=class extends Li{constructor(e,i){super(),this._value=e,this._key=i,this.type="equalTo"}_apply(e){if(Gn("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uf(this._value,this._key)._apply(new hf(this._value,this._key)._apply(e))}};function $k(t,e){return Hd("equalTo","key",e,!0),new Vy(t,e)}function sn(t,...e){let i=De(t);for(let n of e)i=n._apply(i);return i}u5(Vi);g5(Vi);var o3="FIREBASE_DATABASE_EMULATOR_HOST",Ly={},s3=!1;function a3(t,e,i,n){t.repoInfo_=new zm(`${e}:${i}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function w0(t,e,i,n,r){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||$n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qt("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Dy(o,r),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[o3]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=Dy(o,r),a=s.repoInfo):l=!s.repoInfo.secure;let d=r&&l?new vd(vd.OWNER):new Uv(t.name,t.options,e);yk("Invalid Firebase Database URL",s),Ee(s.path)||$n("Database URL must point to the root of a Firebase Database (not including a child path).");let u=c3(a,t,d,new zv(t.name,i));return new jy(u,t)}function l3(t,e){let i=Ly[e];(!i||i[t.key]!==t)&&$n(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Ik(t),delete i[t.key]}function c3(t,e,i,n){let r=Ly[e.name];r||(r={},Ly[e.name]=r);let o=r[t.toURLString()];return o&&$n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ty(t,s3,i,n),r[t.toURLString()]=o,o}var jy=class{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(U5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vi(this._repo,je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(l3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$n("Cannot call "+e+" on a deleted database.")}};function Wk(){qA.IS_TRANSPORT_INITIALIZED&&si("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gk(){Wk(),Cd.forceDisallow()}function Kk(){Wk(),Va.forceDisallow(),Cd.forceAllow()}function Yk(t,e,i,n={}){t=De(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&$n("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,o;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&$n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new vd(vd.OWNER);else if(n.mockUserToken){let s=typeof n.mockUserToken=="string"?n.mockUserToken:vh(n.mockUserToken,t.app.options.projectId);o=new vd(s)}a3(r,e,i,o)}function Qk(t){t=De(t),t._checkNotDeleted("goOffline"),Ik(t._repo)}function Xk(t){t=De(t),t._checkNotDeleted("goOnline"),X5(t._repo)}function Zk(t,e){TA(t,e)}function d3(t){Uy(Eh),Bo(new Ri("database",(e,{instanceIdentifier:i})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return w0(n,r,o,i)},"PUBLIC").setMultipleInstances(!0)),hi($D,WD,t),hi($D,WD,"esm2017")}var u3={".sv":"timestamp"};function Jk(){return u3}function e1(t){return{".sv":{increment:t}}}var By=class{constructor(e,i){this.committed=e,this.snapshot=i}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function t1(t,e,i){var n;if(t=De(t),Fi("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let r=(n=i?.applyLocally)!==null&&n!==void 0?n:!0,o=new Ut,s=(l,c,d)=>{let u=null;l?o.reject(l):(u=new Ga(d,new Vi(t._repo,t._path),ot),o.resolve(new By(c,u)))},a=kf(t,()=>{});return Z5(t._repo,t._path,e,s,a,r),o.promise}Gy.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Gy.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};d3();var h3="@firebase/database-compat",m3="1.0.4";var f3=new Fr("@firebase/database-compat"),i1=function(t){let e="FIREBASE WARNING: "+t;f3.warn(e)};var p3=function(t,e,i,n){if(!(n&&i===void 0)&&typeof i!="boolean")throw new Error(Ii(t,e)+"must be a boolean.")},g3=function(t,e,i){if(!(i&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ii(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var x0=class{constructor(e){this._delegate=e}cancel(e){de("OnDisconnect.cancel",0,1,arguments.length),jt("OnDisconnect.cancel","onComplete",e,!0);let i=this._delegate.cancel();return e&&i.then(()=>e(null),n=>e(n)),i}remove(e){de("OnDisconnect.remove",0,1,arguments.length),jt("OnDisconnect.remove","onComplete",e,!0);let i=this._delegate.remove();return e&&i.then(()=>e(null),n=>e(n)),i}set(e,i){de("OnDisconnect.set",1,2,arguments.length),jt("OnDisconnect.set","onComplete",i,!0);let n=this._delegate.set(e);return i&&n.then(()=>i(null),r=>i(r)),n}setWithPriority(e,i,n){de("OnDisconnect.setWithPriority",2,3,arguments.length),jt("OnDisconnect.setWithPriority","onComplete",n,!0);let r=this._delegate.setWithPriority(e,i);return n&&r.then(()=>n(null),o=>n(o)),r}update(e,i){if(de("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,i1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}jt("OnDisconnect.update","onComplete",i,!0);let n=this._delegate.update(e);return i&&n.then(()=>i(null),r=>i(r)),n}};var C0=class{constructor(e,i){this.committed=e,this.snapshot=i}toJSON(){return de("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var hs=class t{constructor(e,i){this._database=e,this._delegate=i}val(){return de("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return de("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return de("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return de("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return de("DataSnapshot.child",0,1,arguments.length),e=String(e),Xa("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return de("DataSnapshot.hasChild",1,1,arguments.length),Xa("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return de("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return de("DataSnapshot.forEach",1,1,arguments.length),jt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(i=>e(new t(this._database,i)))}hasChildren(){return de("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return de("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return de("DataSnapshot.ref",0,0,arguments.length),new br(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Rf=class t{constructor(e,i){this.database=e,this._delegate=i}on(e,i,n,r){var o;de("Query.on",2,4,arguments.length),jt("Query.on","callback",i,!1);let s=t.getCancelAndContextArgs_("Query.on",n,r),a=(c,d)=>{i.call(s.context,new hs(this.database,c),d)};a.userCallback=i,a.context=s.context;let l=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return kf(this._delegate,a,l),i;case"child_added":return g0(this._delegate,a,l),i;case"child_removed":return v0(this._delegate,a,l),i;case"child_changed":return _0(this._delegate,a,l),i;case"child_moved":return b0(this._delegate,a,l),i;default:throw new Error(Ii("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,i,n){if(de("Query.off",0,3,arguments.length),g3("Query.off",e,!0),jt("Query.off","callback",i,!0),Qg("Query.off","context",n,!0),i){let r=()=>{};r.userCallback=i,r.context=n,y0(this._delegate,e,r)}else y0(this._delegate,e)}get(){return Ok(this._delegate).then(e=>new hs(this.database,e))}once(e,i,n,r){de("Query.once",1,4,arguments.length),jt("Query.once","callback",i,!0);let o=t.getCancelAndContextArgs_("Query.once",n,r),s=new Ut,a=(c,d)=>{let u=new hs(this.database,c);i&&i.call(o.context,u,d),s.resolve(u)};a.userCallback=i,a.context=o.context;let l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(e){case"value":kf(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":g0(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":v0(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":_0(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":b0(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Ii("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return de("Query.limitToFirst",1,1,arguments.length),new t(this.database,sn(this._delegate,jk(e)))}limitToLast(e){return de("Query.limitToLast",1,1,arguments.length),new t(this.database,sn(this._delegate,Bk(e)))}orderByChild(e){return de("Query.orderByChild",1,1,arguments.length),new t(this.database,sn(this._delegate,zk(e)))}orderByKey(){return de("Query.orderByKey",0,0,arguments.length),new t(this.database,sn(this._delegate,Uk()))}orderByPriority(){return de("Query.orderByPriority",0,0,arguments.length),new t(this.database,sn(this._delegate,Hk()))}orderByValue(){return de("Query.orderByValue",0,0,arguments.length),new t(this.database,sn(this._delegate,qk()))}startAt(e=null,i){return de("Query.startAt",0,2,arguments.length),new t(this.database,sn(this._delegate,Vk(e,i)))}startAfter(e=null,i){return de("Query.startAfter",0,2,arguments.length),new t(this.database,sn(this._delegate,Lk(e,i)))}endAt(e=null,i){return de("Query.endAt",0,2,arguments.length),new t(this.database,sn(this._delegate,Fk(e,i)))}endBefore(e=null,i){return de("Query.endBefore",0,2,arguments.length),new t(this.database,sn(this._delegate,Nk(e,i)))}equalTo(e,i){return de("Query.equalTo",1,2,arguments.length),new t(this.database,sn(this._delegate,$k(e,i)))}toString(){return de("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return de("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(de("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let i="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(i)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,i,n){let r={cancel:void 0,context:void 0};if(i&&n)r.cancel=i,jt(e,"cancel",r.cancel,!0),r.context=n,Qg(e,"context",r.context,!0);else if(i)if(typeof i=="object"&&i!==null)r.context=i;else if(typeof i=="function")r.cancel=i;else throw new Error(Ii(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new br(this.database,new Vi(this._delegate._repo,this._delegate._path))}},br=class t extends Rf{constructor(e,i){super(e,new pi(i._repo,i._path,new Ad,!1)),this.database=e,this._delegate=i}getKey(){return de("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return de("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,so(this._delegate,e))}getParent(){de("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return de("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,i){de("Reference.set",1,2,arguments.length),jt("Reference.set","onComplete",i,!0);let n=Af(this._delegate,e);return i&&n.then(()=>i(null),r=>i(r)),n}update(e,i){if(de("Reference.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,i1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fi("Reference.update",this._delegate._path),jt("Reference.update","onComplete",i,!0);let n=Pk(this._delegate,e);return i&&n.then(()=>i(null),r=>i(r)),n}setWithPriority(e,i,n){de("Reference.setWithPriority",2,3,arguments.length),jt("Reference.setWithPriority","onComplete",n,!0);let r=Mk(this._delegate,e,i);return n&&r.then(()=>n(null),o=>n(o)),r}remove(e){de("Reference.remove",0,1,arguments.length),jt("Reference.remove","onComplete",e,!0);let i=kk(this._delegate);return e&&i.then(()=>e(null),n=>e(n)),i}transaction(e,i,n){de("Reference.transaction",1,3,arguments.length),jt("Reference.transaction","transactionUpdate",e,!1),jt("Reference.transaction","onComplete",i,!0),p3("Reference.transaction","applyLocally",n,!0);let r=t1(this._delegate,e,{applyLocally:n}).then(o=>new C0(o.committed,new hs(this.database,o.snapshot)));return i&&r.then(o=>i(null,o.committed,o.snapshot),o=>i(o,!1,null)),r}setPriority(e,i){de("Reference.setPriority",1,2,arguments.length),jt("Reference.setPriority","onComplete",i,!0);let n=Rk(this._delegate,e);return i&&n.then(()=>i(null),r=>i(r)),n}push(e,i){de("Reference.push",0,2,arguments.length),jt("Reference.push","onComplete",i,!0);let n=Ak(this._delegate,e),r=n.then(s=>new t(this.database,s));i&&r.then(()=>i(null),s=>i(s));let o=new t(this.database,n);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Fi("Reference.onDisconnect",this._delegate._path),new x0(new cf(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var ms=class{constructor(e,i){this._delegate=e,this.app=i,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gk,forceLongPolling:Kk}}useEmulator(e,i,n={}){Yk(this._delegate,e,i,n)}ref(e){if(de("database.ref",0,1,arguments.length),e instanceof br){let i=p0(this._delegate,e.toString());return new br(this,i)}else{let i=f0(this._delegate,e);return new br(this,i)}}refFromURL(e){de("database.refFromURL",1,1,arguments.length);let n=p0(this._delegate,e);return new br(this,n)}goOffline(){return de("database.goOffline",0,0,arguments.length),Qk(this._delegate)}goOnline(){return de("database.goOnline",0,0,arguments.length),Xk(this._delegate)}};ms.ServerValue={TIMESTAMP:Jk(),increment:t=>e1(t)};function _3({app:t,url:e,version:i,customAuthImpl:n,customAppCheckImpl:r,namespace:o,nodeAdmin:s=!1}){Uy(i);let a=new Xg("database-standalone"),l=new Ch("auth-internal",a);l.setComponent(new Ri("auth-internal",()=>n,"PRIVATE"));let c;return r&&(c=new Ch("app-check-internal",a),c.setComponent(new Ri("app-check-internal",()=>r,"PRIVATE"))),{instance:new ms(w0(t,l,c,e,s),t),namespace:o}}var b3=Object.freeze({__proto__:null,initStandalone:_3});var v3=ms.ServerValue;function y3(t){t.INTERNAL.registerComponent(new Ri("database-compat",(e,{instanceIdentifier:i})=>{let n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:i});return new ms(r,n)},"PUBLIC").setServiceProps({Reference:br,Query:Rf,Database:ms,DataSnapshot:hs,enableLogging:Zk,INTERNAL:b3,ServerValue:v3}).setMultipleInstances(!0)),t.registerVersion(h3,m3)}y3(Bt);function Wd(t,e,i="on",n=$s){return new yt(r=>{let o=null;return o=t[i](e,(s,a)=>{n.schedule(()=>{r.next({snapshot:s,prevKey:a})}),i==="once"&&n.schedule(()=>r.complete())},s=>{n.schedule(()=>r.error(s))}),i==="on"?{unsubscribe(){o!=null&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(B(r=>{let{snapshot:o,prevKey:s}=r,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),sh())}function w3(t){return typeof t=="string"}function x3(t){return typeof t.exportVal=="function"}function a1(t){return t==null}function l1(t){return typeof t.set=="function"}function n1(t,e){return l1(e)?e:t.ref(e)}function c1(t,e){if(w3(t))return e.stringCase();if(l1(t))return e.firebaseCase();if(x3(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function d1(t){return(a1(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function u1(t,e,i){e=d1(e);let n=e.map(r=>Wd(t,r,"on",i));return Vt(...n)}function C3(t,e,i){let n=u1(t,e).pipe(lr((r,o)=>[...r,o],[]));return I3(t,n,i)}function E3(t,e){return Wd(t,"value","on",e).pipe(B(i=>{let n;return i.payload.forEach(r=>(n=r.key,!1)),{data:i,lastKeyToLoad:n}}))}function I3(t,e,i){return E3(t,i).pipe(xE(e),B(([r,o])=>{let s=r.lastKeyToLoad,a=o.map(l=>l.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),wE(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),B(r=>r.actions))}function r1(t,e){return function(n,r){return c1(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function T3(t){return function(i){return i?c1(i,{stringCase:()=>t.child(i).remove(),firebaseCase:()=>i.remove(),snapshotCase:()=>i.ref.remove()}):t.remove()}}function S3(t,e,i){return Wd(t,"value","once",i).pipe(qe(n=>{let r=[F(n)];return e.forEach(o=>r.push(Wd(t,o,"on",i))),Vt(...r).pipe(lr(A3,[]))}),hn())}function h1(t,e){let i=t.length;for(let n=0;n<i;n++)if(t[n].payload.key===e)return n;return-1}function D3(t,e){if(a1(e))return 0;{let i=h1(t,e);return i===-1?t.length:i+1}}function A3(t,e){let{payload:i,prevKey:n,key:r}=e,o=h1(t,r),s=D3(t,n);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,t=[...t,c],!1})}return t;case"child_added":if(o>-1)(t[o-1]?.key||null)!==n&&(t=t.filter(l=>l.payload.key!==i.key),t.splice(s,0,e));else{if(n==null)return[e,...t];t=t.slice(),t.splice(s,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==i.key);case"child_changed":return t.map(a=>a.payload.key===r?e:a);case"child_moved":if(o>-1){let a=t.splice(o,1)[0];return t=t.slice(),t.splice(s,0,a),t}return t;default:return t}}function o1(t,e,i){return e=d1(e),S3(t,e,i)}function k3(t,e){let i=e.schedulers.outsideAngular,n=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:r1(n,"update"),set:r1(n,"set"),push:r=>n.push(r),remove:T3(n),snapshotChanges(r){return o1(t,r,i).pipe(Ct)},stateChanges(r){return u1(t,r,i).pipe(Ct)},auditTrail(r){return C3(t,r,i).pipe(Ct)},valueChanges(r,o){return o1(t,r,i).pipe(B(a=>a.map(l=>o&&o.idField?Ue(D({},l.payload.val()),{[o.idField]:l.key}):l.payload.val())),Ct)}}}function s1(t,e){return function(){return Wd(t,"value","on",e)}}function R3(t,e){return{query:t,snapshotChanges(){return s1(t,e.schedulers.outsideAngular)().pipe(Ct)},update(i){return t.ref.update(i)},set(i){return t.ref.set(i)},remove(){return t.ref.remove()},valueChanges(){return s1(t,e.schedulers.outsideAngular)().pipe(Ct,B(n=>n.payload.exists()?n.payload.val():null))}}}var M3=new R("angularfire2.realtimeDatabaseURL"),P3=new R("angularfire2.database.use-emulator"),O3=(()=>{class t{schedulers;database;constructor(i,n,r,o,s,a,l,c,d,u,h,m,b,y,E){this.schedulers=a;let j=l,re=ns(i,s,n);c&&md(re,s,d,h,m,b,u,y),this.database=Fa(`${re.name}.database.${r}`,"AngularFireDatabase",re.name,()=>{let $=s.runOutsideAngular(()=>re.database(r||void 0));return j&&$.useEmulator(...j),$},[j])}list(i,n){let r=this.schedulers.ngZone.runOutsideAngular(()=>n1(this.database,i)),o=r;return n&&(o=n(r)),k3(o,this)}object(i){let n=this.schedulers.ngZone.runOutsideAngular(()=>n1(this.database,i));return R3(n,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(n){return new(n||t)(_(Xr),_(Zr,8),_(M3,8),_(wt),_(W),_(is),_(P3,8),_(rs,8),_(ad,8),_(ld,8),_(cd,8),_(dd,8),_(ud,8),_(hd,8),_(gr,8))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),m1=(()=>{class t{constructor(){Bt.registerVersion("angularfire",nn.full,"rtdb-compat")}static \u0275fac=function(n){return new(n||t)};static \u0275mod=H({type:t});static \u0275inj=U({providers:[O3]})}return t})();var F3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn={},L,$0=$0||{},fe=F3||self;function $f(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function su(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function N3(t){return Object.prototype.hasOwnProperty.call(t,E0)&&t[E0]||(t[E0]=++V3)}var E0="closure_uid_"+(1e9*Math.random()>>>0),V3=0;function L3(t,e,i){return t.call.apply(t.bind,arguments)}function j3(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function ai(t,e,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ai=L3:ai=j3,ai.apply(null,arguments)}function Mf(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function Gt(t,e){function i(){}i.prototype=e.prototype,t.$=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.ac=function(n,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[r].apply(n,s)}}function lo(){this.s=this.s,this.o=this.o}var B3=0;lo.prototype.s=!1;lo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),B3!=0)&&N3(this)};lo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var T1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function W0(t){let e=t.length;if(0<e){let i=Array(e);for(let n=0;n<e;n++)i[n]=t[n];return i}return[]}function f1(t,e){for(let i=1;i<arguments.length;i++){let n=arguments[i];if($f(n)){let r=t.length||0,o=n.length||0;t.length=r+o;for(let s=0;s<o;s++)t[r+s]=n[s]}else t.push(n)}}function li(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}li.prototype.h=function(){this.defaultPrevented=!0};var z3=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let i=()=>{};fe.addEventListener("test",i,e),fe.removeEventListener("test",i,e)}catch{}return t}();function Zd(t){return/^[\s\xa0]*$/.test(t)}function Wf(){var t=fe.navigator;return t&&(t=t.userAgent)?t:""}function Kn(t){return Wf().indexOf(t)!=-1}function G0(t){return G0[" "](t),t}G0[" "]=function(){};function U3(t,e){var i=kH;return Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)}var H3=Kn("Opera"),il=Kn("Trident")||Kn("MSIE"),S1=Kn("Edge"),A0=S1||il,D1=Kn("Gecko")&&!(Wf().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge"))&&!(Kn("Trident")||Kn("MSIE"))&&!Kn("Edge"),q3=Wf().toLowerCase().indexOf("webkit")!=-1&&!Kn("Edge");function A1(){var t=fe.document;return t?t.documentMode:void 0}var k0;e:{if(Pf="",Of=function(){var t=Wf();if(D1)return/rv:([^\);]+)(\)|;)/.exec(t);if(S1)return/Edge\/([\d\.]+)/.exec(t);if(il)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(q3)return/WebKit\/(\S+)/.exec(t);if(H3)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Of&&(Pf=Of?Of[1]:""),il&&(Ff=A1(),Ff!=null&&Ff>parseFloat(Pf))){k0=String(Ff);break e}k0=Pf}var Pf,Of,Ff,R0;fe.document&&il?(I0=A1(),R0=I0||parseInt(k0,10)||void 0):R0=void 0;var I0,$3=R0;function Jd(t,e){if(li.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(D1){e:{try{G0(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else i=="mouseover"?e=t.fromElement:i=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:W3[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Jd.$.h.call(this)}}Gt(Jd,li);var W3={2:"touch",3:"pen",4:"mouse"};Jd.prototype.h=function(){Jd.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var au="closure_listenable_"+(1e6*Math.random()|0),G3=0;function K3(t,e,i,n,r){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.la=r,this.key=++G3,this.fa=this.ia=!1}function Gf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function K0(t,e,i){for(let n in t)e.call(i,t[n],n,t)}function Y3(t,e){for(let i in t)e.call(void 0,t[i],i,t)}function k1(t){let e={};for(let i in t)e[i]=t[i];return e}var p1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R1(t,e){let i,n;for(let r=1;r<arguments.length;r++){n=arguments[r];for(i in n)t[i]=n[i];for(let o=0;o<p1.length;o++)i=p1[o],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}function Kf(t){this.src=t,this.g={},this.h=0}Kf.prototype.add=function(t,e,i,n,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=P0(t,e,n,r);return-1<s?(e=t[s],i||(e.ia=!1)):(e=new K3(e,this.src,o,!!n,r),e.ia=i,t.push(e)),e};function M0(t,e){var i=e.type;if(i in t.g){var n=t.g[i],r=T1(n,e),o;(o=0<=r)&&Array.prototype.splice.call(n,r,1),o&&(Gf(e),t.g[i].length==0&&(delete t.g[i],t.h--))}}function P0(t,e,i,n){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!i&&o.la==n)return r}return-1}var Y0="closure_lm_"+(1e6*Math.random()|0),T0={};function M1(t,e,i,n,r){if(n&&n.once)return O1(t,e,i,n,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)M1(t,e[o],i,n,r);return null}return i=Z0(i),t&&t[au]?t.O(e,i,su(n)?!!n.capture:!!n,r):P1(t,e,i,!1,n,r)}function P1(t,e,i,n,r,o){if(!e)throw Error("Invalid event type");var s=su(r)?!!r.capture:!!r,a=X0(t);if(a||(t[Y0]=a=new Kf(t)),i=a.add(e,i,n,s,o),i.proxy)return i;if(n=Q3(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)z3||(r=s),r===void 0&&(r=!1),t.addEventListener(e.toString(),n,r);else if(t.attachEvent)t.attachEvent(N1(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return i}function Q3(){function t(i){return e.call(t.src,t.listener,i)}let e=X3;return t}function O1(t,e,i,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)O1(t,e[o],i,n,r);return null}return i=Z0(i),t&&t[au]?t.P(e,i,su(n)?!!n.capture:!!n,r):P1(t,e,i,!0,n,r)}function F1(t,e,i,n,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)F1(t,e[o],i,n,r);else n=su(n)?!!n.capture:!!n,i=Z0(i),t&&t[au]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],i=P0(o,i,n,r),-1<i&&(Gf(o[i]),Array.prototype.splice.call(o,i,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=X0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=P0(e,i,n,r)),(i=-1<t?e[t]:null)&&Q0(i))}function Q0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[au])M0(e.i,t);else{var i=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(N1(i),n):e.addListener&&e.removeListener&&e.removeListener(n),(i=X0(e))?(M0(i,t),i.h==0&&(i.src=null,e[Y0]=null)):Gf(t)}}}function N1(t){return t in T0?T0[t]:T0[t]="on"+t}function X3(t,e){if(t.fa)t=!0;else{e=new Jd(e,this);var i=t.listener,n=t.la||t.src;t.ia&&Q0(t),t=i.call(n,e)}return t}function X0(t){return t=t[Y0],t instanceof Kf?t:null}var S0="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z0(t){return typeof t=="function"?t:(t[S0]||(t[S0]=function(e){return t.handleEvent(e)}),t[S0])}function Wt(){lo.call(this),this.i=new Kf(this),this.S=this,this.J=null}Gt(Wt,lo);Wt.prototype[au]=!0;Wt.prototype.removeEventListener=function(t,e,i,n){F1(this,t,e,i,n)};function ti(t,e){var i,n=t.J;if(n)for(i=[];n;n=n.J)i.push(n);if(t=t.S,n=e.type||e,typeof e=="string")e=new li(e,t);else if(e instanceof li)e.target=e.target||t;else{var r=e;e=new li(n,t),R1(e,r)}if(r=!0,i)for(var o=i.length-1;0<=o;o--){var s=e.g=i[o];r=Nf(s,n,!0,e)&&r}if(s=e.g=t,r=Nf(s,n,!0,e)&&r,r=Nf(s,n,!1,e)&&r,i)for(o=0;o<i.length;o++)s=e.g=i[o],r=Nf(s,n,!1,e)&&r}Wt.prototype.N=function(){if(Wt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var i=t.g[e],n=0;n<i.length;n++)Gf(i[n]);delete t.g[e],t.h--}}this.J=null};Wt.prototype.O=function(t,e,i,n){return this.i.add(String(t),e,!1,i,n)};Wt.prototype.P=function(t,e,i,n){return this.i.add(String(t),e,!0,i,n)};function Nf(t,e,i,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==i){var a=s.listener,l=s.la||s.src;s.ia&&M0(t.i,s),r=a.call(l,n)!==!1&&r}}return r&&!n.defaultPrevented}var J0=fe.JSON.stringify,O0=class{constructor(e,i){this.i=e,this.j=i,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Z3(){var t=ew;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var F0=class{constructor(){this.h=this.g=null}add(e,i){let n=V1.get();n.set(e,i),this.h?this.h.next=n:this.g=n,this.h=n}},V1=new O0(()=>new N0,t=>t.reset()),N0=class{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}};function J3(t){var e=1;t=t.split(":");let i=[];for(;0<e&&t.length;)i.push(t.shift()),e--;return t.length&&i.push(t.join(":")),i}function eH(t){fe.setTimeout(()=>{throw t},0)}var eu,tu=!1,ew=new F0,L1=()=>{let t=fe.Promise.resolve(void 0);eu=()=>{t.then(tH)}},tH=()=>{for(var t;t=Z3();){try{t.h.call(t.g)}catch(i){eH(i)}var e=V1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}tu=!1};function Yf(t,e){Wt.call(this),this.h=t||1,this.g=e||fe,this.j=ai(this.qb,this),this.l=Date.now()}Gt(Yf,Wt);L=Yf.prototype;L.ga=!1;L.T=null;L.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ti(this,"tick"),this.ga&&(tw(this),this.start()))}};L.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function tw(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}L.N=function(){Yf.$.N.call(this),tw(this),delete this.g};function iw(t,e,i){if(typeof t=="function")i&&(t=ai(t,i));else if(t&&typeof t.handleEvent=="function")t=ai(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:fe.setTimeout(t,e||0)}function j1(t){t.g=iw(()=>{t.g=null,t.i&&(t.i=!1,j1(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var V0=class extends lo{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:j1(this)}N(){super.N(),this.g&&(fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function iu(t){lo.call(this),this.h=t,this.g={}}Gt(iu,lo);var g1=[];function B1(t,e,i,n){Array.isArray(i)||(i&&(g1[0]=i.toString()),i=g1);for(var r=0;r<i.length;r++){var o=M1(e,i[r],n||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function z1(t){K0(t.g,function(e,i){this.g.hasOwnProperty(i)&&Q0(e)},t),t.g={}}iu.prototype.N=function(){iu.$.N.call(this),z1(this)};iu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qf(){this.g=!0}Qf.prototype.Ea=function(){this.g=!1};function iH(t,e,i,n,r,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var u=d.split("_");s=2<=u.length&&u[1]=="type"?s+(d+"="+c+"&"):s+(d+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+e+`
`+i+`
`+s})}function nH(t,e,i,n,r,o,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+e+`
`+i+`
`+o+" "+s})}function el(t,e,i,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+oH(t,i)+(n?" "+n:"")})}function rH(t,e){t.info(function(){return"TIMEOUT: "+e})}Qf.prototype.info=function(){};function oH(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i){for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var n=i[t];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return J0(i)}catch{return e}}var _s={},_1=null;function Xf(){return _1=_1||new Wt}_s.Ta="serverreachability";function U1(t){li.call(this,_s.Ta,t)}Gt(U1,li);function nu(t){let e=Xf();ti(e,new U1(e))}_s.STAT_EVENT="statevent";function H1(t,e){li.call(this,_s.STAT_EVENT,t),this.stat=e}Gt(H1,li);function gi(t){let e=Xf();ti(e,new H1(e,t))}_s.Ua="timingevent";function q1(t,e){li.call(this,_s.Ua,t),this.size=e}Gt(q1,li);function lu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return fe.setTimeout(function(){t()},e)}var Zf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function nw(){}nw.prototype.h=null;function b1(t){return t.h||(t.h=t.i())}function W1(){}var cu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rw(){li.call(this,"d")}Gt(rw,li);function ow(){li.call(this,"c")}Gt(ow,li);var L0;function Jf(){}Gt(Jf,nw);Jf.prototype.g=function(){return new XMLHttpRequest};Jf.prototype.i=function(){return{}};L0=new Jf;function du(t,e,i,n){this.l=t,this.j=e,this.m=i,this.W=n||1,this.U=new iu(this),this.P=sH,t=A0?125:void 0,this.V=new Yf(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new G1}function G1(){this.i=null,this.g="",this.h=!1}var sH=45e3,K1={},j0={};L=du.prototype;L.setTimeout=function(t){this.P=t};function B0(t,e,i){t.L=1,t.A=tp(yr(e)),t.u=i,t.S=!0,Y1(t,null)}function Y1(t,e){t.G=Date.now(),uu(t),t.B=yr(t.A);var i=t.B,n=t.W;Array.isArray(n)||(n=[String(n)]),nR(i.i,"t",n),t.o=0,i=t.l.J,t.h=new G1,t.g=ER(t.l,i?e:null,!t.u),0<t.O&&(t.M=new V0(ai(t.Pa,t,t.g),t.O)),B1(t.U,t.g,"readystatechange",t.nb),e=t.I?k1(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),nu(),iH(t.j,t.v,t.B,t.m,t.W,t.u)}L.nb=function(t){t=t.target;let e=this.M;e&&Yn(t)==3?e.l():this.Pa(t)};L.Pa=function(t){try{if(t==this.g)e:{let d=Yn(this.g);var e=this.g.Ia();let u=this.g.da();if(!(3>d)&&(d!=3||A0||this.g&&(this.h.h||this.g.ja()||x1(this.g)))){this.J||d!=4||e==7||(e==8||0>=u?nu(3):nu(2)),ep(this);var i=this.g.da();this.ca=i;t:if(Q1(this)){var n=x1(this.g);t="";var r=n.length,o=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),Xd(this);var s="";break t}this.h.i=new fe.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:o&&e==r-1});n.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=i==200,nH(this.j,this.v,this.B,this.m,this.W,d,i),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zd(a)){var c=a;break t}}c=null}if(i=c)el(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,z0(this,i);else{this.i=!1,this.s=3,gi(12),fs(this),Xd(this);break e}}this.S?(X1(this,d,s),A0&&this.i&&d==3&&(B1(this.U,this.V,"tick",this.mb),this.V.start())):(el(this.j,this.m,s,null),z0(this,s)),d==4&&fs(this),this.i&&!this.J&&(d==4?yR(this.l,this):(this.i=!1,uu(this)))}else SH(this.g),i==400&&0<s.indexOf("Unknown SID")?(this.s=3,gi(12)):(this.s=0,gi(13)),fs(this),Xd(this)}}}catch{}finally{}};function Q1(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function X1(t,e,i){let n=!0,r;for(;!t.J&&t.o<i.length;)if(r=aH(t,i),r==j0){e==4&&(t.s=4,gi(14),n=!1),el(t.j,t.m,null,"[Incomplete Response]");break}else if(r==K1){t.s=4,gi(15),el(t.j,t.m,i,"[Invalid Chunk]"),n=!1;break}else el(t.j,t.m,r,null),z0(t,r);Q1(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||i.length!=0||t.h.h||(t.s=1,gi(16),n=!1),t.i=t.i&&n,n?0<i.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+i.length),uw(e),e.M=!0,gi(11))):(el(t.j,t.m,i,"[Invalid Chunked Response]"),fs(t),Xd(t))}L.mb=function(){if(this.g){var t=Yn(this.g),e=this.g.ja();this.o<e.length&&(ep(this),X1(this,t,e),this.i&&t!=4&&uu(this))}};function aH(t,e){var i=t.o,n=e.indexOf(`
`,i);return n==-1?j0:(i=Number(e.substring(i,n)),isNaN(i)?K1:(n+=1,n+i>e.length?j0:(e=e.slice(n,n+i),t.o=n+i,e)))}L.cancel=function(){this.J=!0,fs(this)};function uu(t){t.Y=Date.now()+t.P,Z1(t,t.P)}function Z1(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=lu(ai(t.lb,t),e)}function ep(t){t.C&&(fe.clearTimeout(t.C),t.C=null)}L.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(rH(this.j,this.B),this.L!=2&&(nu(),gi(17)),fs(this),this.s=2,Xd(this)):Z1(this,this.Y-t)};function Xd(t){t.l.H==0||t.J||yR(t.l,t)}function fs(t){ep(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,tw(t.V),z1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function z0(t,e){try{var i=t.l;if(i.H!=0&&(i.g==t||U0(i.i,t))){if(!t.K&&U0(i.i,t)&&i.H==3){try{var n=i.Ja.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var r=n;if(r[0]==0){e:if(!i.u){if(i.g)if(i.g.G+3e3<t.G)zf(i),rp(i);else break e;dw(i),gi(18)}}else i.Fa=r[1],0<i.Fa-i.V&&37500>r[2]&&i.G&&i.A==0&&!i.v&&(i.v=lu(ai(i.ib,i),6e3));if(1>=sR(i.i)&&i.oa){try{i.oa()}catch{}i.oa=void 0}}else ps(i,11)}else if((t.K||i.g==t)&&zf(i),!Zd(e))for(r=i.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(i.V=c[0],c=c[1],i.H==2)if(c[0]=="c"){i.K=c[1],i.pa=c[2];let d=c[3];d!=null&&(i.ra=d,i.l.info("VER="+i.ra));let u=c[4];u!=null&&(i.Ga=u,i.l.info("SVER="+i.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,i.L=n,i.l.info("backChannelRequestTimeoutMs_="+n)),n=i;let m=t.g;if(m){let b=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var o=n.i;o.g||b.indexOf("spdy")==-1&&b.indexOf("quic")==-1&&b.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(sw(o,o.h),o.h=null))}if(n.F){let y=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(n.Da=y,lt(n.I,n.F,y))}}i.H=3,i.h&&i.h.Ba(),i.ca&&(i.S=Date.now()-t.G,i.l.info("Handshake RTT: "+i.S+"ms")),n=i;var s=t;if(n.wa=CR(n,n.J?n.pa:null,n.Y),s.K){aR(n.i,s);var a=s,l=n.L;l&&a.setTimeout(l),a.C&&(ep(a),uu(a)),n.g=s}else bR(n);0<i.j.length&&op(i)}else c[0]!="stop"&&c[0]!="close"||ps(i,7);else i.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ps(i,7):cw(i):c[0]!="noop"&&i.h&&i.h.Aa(c),i.A=0)}}nu(4)}catch{}}function lH(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if($f(t)){for(var e=[],i=t.length,n=0;n<i;n++)e.push(t[n]);return e}e=[],i=0;for(n in t)e[i++]=t[n];return e}function cH(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if($f(t)||typeof t=="string"){var e=[];t=t.length;for(var i=0;i<t;i++)e.push(i);return e}e=[],i=0;for(let n in t)e[i++]=n;return e}}}function J1(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if($f(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var i=cH(t),n=lH(t),r=n.length,o=0;o<r;o++)e.call(void 0,n[o],i&&i[o],t)}var eR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dH(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var n=t[i].indexOf("="),r=null;if(0<=n){var o=t[i].substring(0,n);r=t[i].substring(n+1)}else o=t[i];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function gs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gs){this.h=t.h,jf(this,t.j),this.s=t.s,this.g=t.g,Bf(this,t.m),this.l=t.l;var e=t.i,i=new ru;i.i=e.i,e.g&&(i.g=new Map(e.g),i.h=e.h),v1(this,i),this.o=t.o}else t&&(e=String(t).match(eR))?(this.h=!1,jf(this,e[1]||"",!0),this.s=Yd(e[2]||""),this.g=Yd(e[3]||"",!0),Bf(this,e[4]),this.l=Yd(e[5]||"",!0),v1(this,e[6]||"",!0),this.o=Yd(e[7]||"")):(this.h=!1,this.i=new ru(null,this.h))}gs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qd(e,y1,!0),":");var i=this.g;return(i||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qd(e,y1,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.m,i!=null&&t.push(":",String(i))),(i=this.l)&&(this.g&&i.charAt(0)!="/"&&t.push("/"),t.push(Qd(i,i.charAt(0)=="/"?mH:hH,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.o)&&t.push("#",Qd(i,pH)),t.join("")};function yr(t){return new gs(t)}function jf(t,e,i){t.j=i?Yd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function v1(t,e,i){e instanceof ru?(t.i=e,gH(t.i,t.h)):(i||(e=Qd(e,fH)),t.i=new ru(e,t.h))}function lt(t,e,i){t.i.set(e,i)}function tp(t){return lt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Yd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qd(t,e,i){return typeof t=="string"?(t=encodeURI(t).replace(e,uH),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uH(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var y1=/[#\/\?@]/g,hH=/[#\?:]/g,mH=/[#\?]/g,fH=/[#\?@]/g,pH=/#/g;function ru(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function co(t){t.g||(t.g=new Map,t.h=0,t.i&&dH(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}L=ru.prototype;L.add=function(t,e){co(this),this.i=null,t=nl(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this};function tR(t,e){co(t),e=nl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function iR(t,e){return co(t),e=nl(t,e),t.g.has(e)}L.forEach=function(t,e){co(this),this.g.forEach(function(i,n){i.forEach(function(r){t.call(e,r,n,this)},this)},this)};L.ta=function(){co(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),i=[];for(let n=0;n<e.length;n++){let r=t[n];for(let o=0;o<r.length;o++)i.push(e[n])}return i};L.Z=function(t){co(this);let e=[];if(typeof t=="string")iR(this,t)&&(e=e.concat(this.g.get(nl(this,t))));else{t=Array.from(this.g.values());for(let i=0;i<t.length;i++)e=e.concat(t[i])}return e};L.set=function(t,e){return co(this),this.i=null,t=nl(this,t),iR(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};L.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function nR(t,e,i){tR(t,e),0<i.length&&(t.i=null,t.g.set(nl(t,e),W0(i)),t.h+=i.length)}L.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var i=0;i<e.length;i++){var n=e[i];let o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var r=o;s[n]!==""&&(r+="="+encodeURIComponent(String(s[n]))),t.push(r)}}return this.i=t.join("&")};function nl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function gH(t,e){e&&!t.j&&(co(t),t.i=null,t.g.forEach(function(i,n){var r=n.toLowerCase();n!=r&&(tR(this,n),nR(this,r,i))},t)),t.j=e}var _H=class{constructor(t,e){this.g=t,this.map=e}};function rR(t){this.l=t||bH,fe.PerformanceNavigationTiming?(t=fe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(fe.g&&fe.g.Ka&&fe.g.Ka()&&fe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bH=10;function oR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function sR(t){return t.h?1:t.g?t.g.size:0}function U0(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function sw(t,e){t.g?t.g.add(e):t.h=e}function aR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}rR.prototype.cancel=function(){if(this.i=lR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function lR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let i of t.g.values())e=e.concat(i.F);return e}return W0(t.i)}var vH=class{stringify(t){return fe.JSON.stringify(t,void 0)}parse(t){return fe.JSON.parse(t,void 0)}};function yH(){this.g=new vH}function wH(t,e,i){let n=i||"";try{J1(t,function(r,o){let s=r;su(r)&&(s=J0(r)),e.push(n+o+"="+encodeURIComponent(s))})}catch(r){throw e.push(n+"type="+encodeURIComponent("_badmap")),r}}function xH(t,e){let i=new Qf;if(fe.Image){let n=new Image;n.onload=Mf(Vf,i,n,"TestLoadImage: loaded",!0,e),n.onerror=Mf(Vf,i,n,"TestLoadImage: error",!1,e),n.onabort=Mf(Vf,i,n,"TestLoadImage: abort",!1,e),n.ontimeout=Mf(Vf,i,n,"TestLoadImage: timeout",!1,e),fe.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Vf(t,e,i,n,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(n)}catch{}}function hu(t){this.l=t.ec||null,this.j=t.ob||!1}Gt(hu,nw);hu.prototype.g=function(){return new ip(this.l,this.j)};hu.prototype.i=function(t){return function(){return t}}({});function ip(t,e){Wt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=aw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gt(ip,Wt);var aw=0;L=ip.prototype;L.open=function(t,e){if(this.readyState!=aw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ou(this)};L.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||fe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=aw};L.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ou(this)),this.g&&(this.readyState=3,ou(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof fe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function cR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}L.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mu(this):ou(this),this.readyState==3&&cR(this)}};L.Za=function(t){this.g&&(this.response=this.responseText=t,mu(this))};L.Ya=function(t){this.g&&(this.response=t,mu(this))};L.ka=function(){this.g&&mu(this)};function mu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ou(t)}L.setRequestHeader=function(t,e){this.v.append(t,e)};L.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};L.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var i=e.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=e.next();return t.join(`\r
`)};function ou(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ip.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var CH=fe.JSON.parse;function _t(t){Wt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dR,this.L=this.M=!1}Gt(_t,Wt);var dR="",EH=/^https?$/i,IH=["POST","PUT"];L=_t.prototype;L.Oa=function(t){this.M=t};L.ha=function(t,e,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():L0.g(),this.C=this.u?b1(this.u):b1(L0),this.g.onreadystatechange=ai(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){w1(this,o);return}if(t=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var r in n)i.set(r,n[r]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(let o of n.keys())i.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(i.keys()).find(o=>o.toLowerCase()=="content-type"),r=fe.FormData&&t instanceof fe.FormData,!(0<=T1(IH,e))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of i)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mR(this),0<this.B&&((this.L=TH(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.ua,this)):this.A=iw(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){w1(this,o)}};function TH(t){return il&&typeof t.timeout=="number"&&t.ontimeout!==void 0}L.ua=function(){typeof $0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ti(this,"timeout"),this.abort(8))};function w1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,uR(t),np(t)}function uR(t){t.F||(t.F=!0,ti(t,"complete"),ti(t,"error"))}L.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ti(this,"complete"),ti(this,"abort"),np(this))};L.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),np(this,!0)),_t.$.N.call(this)};L.La=function(){this.s||(this.G||this.v||this.l?hR(this):this.kb())};L.kb=function(){hR(this)};function hR(t){if(t.h&&typeof $0<"u"&&(!t.C[1]||Yn(t)!=4||t.da()!=2)){if(t.v&&Yn(t)==4)iw(t.La,0,t);else if(ti(t,"readystatechange"),Yn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var n;if(n=s===0){var r=String(t.I).match(eR)[1]||null;!r&&fe.self&&fe.self.location&&(r=fe.self.location.protocol.slice(0,-1)),n=!EH.test(r?r.toLowerCase():"")}i=n}if(i)ti(t,"complete"),ti(t,"success");else{t.m=6;try{var o=2<Yn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",uR(t)}}finally{np(t)}}}}function np(t,e){if(t.g){mR(t);let i=t.g,n=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ti(t,"ready");try{i.onreadystatechange=n}catch{}}}function mR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(fe.clearTimeout(t.A),t.A=null)}L.isActive=function(){return!!this.g};function Yn(t){return t.g?t.g.readyState:0}L.da=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}};L.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};L.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),CH(e)}};function x1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case dR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function SH(t){let e={};t=(t.g&&2<=Yn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<t.length;n++){if(Zd(t[n]))continue;var i=J3(t[n]);let r=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();let o=e[r]||[];e[r]=o,o.push(i)}Y3(e,function(n){return n.join(", ")})}L.Ia=function(){return this.m};L.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function fR(t){let e="";return K0(t,function(i,n){e+=n,e+=":",e+=i,e+=`\r
`}),e}function lw(t,e,i){e:{for(n in i){var n=!1;break e}n=!0}n||(i=fR(i),typeof t=="string"?i!=null&&encodeURIComponent(String(i)):lt(t,e,i))}function Gd(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function pR(t){this.Ga=0,this.j=[],this.l=new Qf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gd("baseRetryDelayMs",5e3,t),this.hb=Gd("retryDelaySeedMs",1e4,t),this.eb=Gd("forwardChannelMaxRetries",2,t),this.xa=Gd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new rR(t&&t.concurrentRequestLimit),this.Ja=new yH,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}L=pR.prototype;L.ra=8;L.H=1;function cw(t){if(gR(t),t.H==3){var e=t.W++,i=yr(t.I);if(lt(i,"SID",t.K),lt(i,"RID",e),lt(i,"TYPE","terminate"),fu(t,i),e=new du(t,t.l,e),e.L=2,e.A=tp(yr(i)),i=!1,fe.navigator&&fe.navigator.sendBeacon)try{i=fe.navigator.sendBeacon(e.A.toString(),"")}catch{}!i&&fe.Image&&(new Image().src=e.A,i=!0),i||(e.g=ER(e.l,null),e.g.ha(e.A)),e.G=Date.now(),uu(e)}xR(t)}function rp(t){t.g&&(uw(t),t.g.cancel(),t.g=null)}function gR(t){rp(t),t.u&&(fe.clearTimeout(t.u),t.u=null),zf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&fe.clearTimeout(t.m),t.m=null)}function op(t){if(!oR(t.i)&&!t.m){t.m=!0;var e=t.Na;eu||L1(),tu||(eu(),tu=!0),ew.add(e,t),t.C=0}}function DH(t,e){return sR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=lu(ai(t.Na,t,e),wR(t,t.C)),t.C++,!0)}L.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new du(this,this.l,t),o=this.s;if(this.U&&(o?(o=k1(o),R1(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,i=0;i<this.j.length;i++){t:{var n=this.j[i];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=i;break e}if(e===4096||i===this.j.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=_R(this,r,e),i=yr(this.I),lt(i,"RID",t),lt(i,"CVER",22),this.F&&lt(i,"X-HTTP-Session-Id",this.F),fu(this,i),o&&(this.O?e="headers="+encodeURIComponent(String(fR(o)))+"&"+e:this.o&&lw(i,this.o,o)),sw(this.i,r),this.bb&&lt(i,"TYPE","init"),this.P?(lt(i,"$req",e),lt(i,"SID","null"),r.aa=!0,B0(r,i,null)):B0(r,i,e),this.H=2}}else this.H==3&&(t?C1(this,t):this.j.length==0||oR(this.i)||C1(this))};function C1(t,e){var i;e?i=e.m:i=t.W++;let n=yr(t.I);lt(n,"SID",t.K),lt(n,"RID",i),lt(n,"AID",t.V),fu(t,n),t.o&&t.s&&lw(n,t.o,t.s),i=new du(t,t.l,i,t.C+1),t.o===null&&(i.I=t.s),e&&(t.j=e.F.concat(t.j)),e=_R(t,i,1e3),i.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),sw(t.i,i),B0(i,n,e)}function fu(t,e){t.na&&K0(t.na,function(i,n){lt(e,n,i)}),t.h&&J1({},function(i,n){lt(e,n,i)})}function _R(t,e,i){i=Math.min(t.j.length,i);var n=t.h?ai(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){let s=["count="+i];o==-1?0<i?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let l=0;l<i;l++){let c=r[l].g,d=r[l].map;if(c-=o,0>c)o=Math.max(0,r[l].g-100),a=!1;else try{wH(d,s,"req"+c+"_")}catch{n&&n(d)}}if(a){n=s.join("&");break e}}}return t=t.j.splice(0,i),e.F=t,n}function bR(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;eu||L1(),tu||(eu(),tu=!0),ew.add(e,t),t.A=0}}function dw(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=lu(ai(t.Ma,t),wR(t,t.A)),t.A++,!0)}L.Ma=function(){if(this.u=null,vR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=lu(ai(this.jb,this),t)}};L.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gi(10),rp(this),vR(this))};function uw(t){t.B!=null&&(fe.clearTimeout(t.B),t.B=null)}function vR(t){t.g=new du(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=yr(t.wa);lt(e,"RID","rpc"),lt(e,"SID",t.K),lt(e,"AID",t.V),lt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&lt(e,"TO",t.qa),lt(e,"TYPE","xmlhttp"),fu(t,e),t.o&&t.s&&lw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var i=t.g;t=t.pa,i.L=1,i.A=tp(yr(e)),i.u=null,i.S=!0,Y1(i,t)}L.ib=function(){this.v!=null&&(this.v=null,rp(this),dw(this),gi(19))};function zf(t){t.v!=null&&(fe.clearTimeout(t.v),t.v=null)}function yR(t,e){var i=null;if(t.g==e){zf(t),uw(t),t.g=null;var n=2}else if(U0(t.i,e))i=e.F,aR(t.i,e),n=1;else return;if(t.H!=0){if(e.i)if(n==1){i=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;n=Xf(),ti(n,new q1(n,i)),op(t)}else bR(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(n==1&&DH(t,e)||n==2&&dw(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),r){case 1:ps(t,5);break;case 4:ps(t,10);break;case 3:ps(t,6);break;default:ps(t,2)}}}function wR(t,e){let i=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(i*=2),i*e}function ps(t,e){if(t.l.info("Error code "+e),e==2){var i=null;t.h&&(i=null);var n=ai(t.pb,t);i||(i=new gs("//www.google.com/images/cleardot.gif"),fe.location&&fe.location.protocol=="http"||jf(i,"https"),tp(i)),xH(i.toString(),n)}else gi(2);t.H=0,t.h&&t.h.za(e),xR(t),gR(t)}L.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gi(2)):(this.l.info("Failed to ping google.com"),gi(1))};function xR(t){if(t.H=0,t.ma=[],t.h){let e=lR(t.i);(e.length!=0||t.j.length!=0)&&(f1(t.ma,e),f1(t.ma,t.j),t.i.i.length=0,W0(t.j),t.j.length=0),t.h.ya()}}function CR(t,e,i){var n=i instanceof gs?yr(i):new gs(i);if(n.g!="")e&&(n.g=e+"."+n.g),Bf(n,n.m);else{var r=fe.location;n=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new gs(null);n&&jf(o,n),e&&(o.g=e),r&&Bf(o,r),i&&(o.l=i),n=o}return i=t.F,e=t.Da,i&&e&&lt(n,i,e),lt(n,"VER",t.ra),fu(t,n),n}function ER(t,e,i){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new _t(new hu({ob:i})):new _t(t.va),e.Oa(t.J),e}L.isActive=function(){return!!this.h&&this.h.isActive(this)};function IR(){}L=IR.prototype;L.Ba=function(){};L.Aa=function(){};L.za=function(){};L.ya=function(){};L.isActive=function(){return!0};L.Va=function(){};function Uf(){if(il&&!(10<=Number($3)))throw Error("Environmental error: no available transport.")}Uf.prototype.g=function(t,e){return new ji(t,e)};function ji(t,e){Wt.call(this),this.g=new pR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Zd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zd(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new rl(this)}Gt(ji,Wt);ji.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,i=this.h||void 0;gi(0),t.Y=e,t.na=i||{},t.G=t.aa,t.I=CR(t,null,t.Y),op(t)};ji.prototype.close=function(){cw(this.g)};ji.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var i={};i.__data__=t,t=i}else this.v&&(i={},i.__data__=J0(t),t=i);e.j.push(new _H(e.fb++,t)),e.H==3&&op(e)};ji.prototype.N=function(){this.g.h=null,delete this.j,cw(this.g),delete this.g,ji.$.N.call(this)};function TR(t){rw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let i in e){t=i;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Gt(TR,rw);function SR(){ow.call(this),this.status=1}Gt(SR,ow);function rl(t){this.g=t}Gt(rl,IR);rl.prototype.Ba=function(){ti(this.g,"a")};rl.prototype.Aa=function(t){ti(this.g,new TR(t))};rl.prototype.za=function(t){ti(this.g,new SR)};rl.prototype.ya=function(){ti(this.g,"b")};function AH(){this.blockSize=-1}function wn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Gt(wn,AH);wn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function D0(t,e,i){i||(i=0);var n=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)n[r]=e.charCodeAt(i++)|e.charCodeAt(i++)<<8|e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<24;else for(r=0;16>r;++r)n[r]=e[i++]|e[i++]<<8|e[i++]<<16|e[i++]<<24;e=t.g[0],i=t.g[1],r=t.g[2];var o=t.g[3],s=e+(o^i&(r^o))+n[0]+3614090360&4294967295;e=i+(s<<7&4294967295|s>>>25),s=o+(r^e&(i^r))+n[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(i^o&(e^i))+n[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(e^r&(o^e))+n[3]+3250441966&4294967295,i=r+(s<<22&4294967295|s>>>10),s=e+(o^i&(r^o))+n[4]+4118548399&4294967295,e=i+(s<<7&4294967295|s>>>25),s=o+(r^e&(i^r))+n[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(i^o&(e^i))+n[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(e^r&(o^e))+n[7]+4249261313&4294967295,i=r+(s<<22&4294967295|s>>>10),s=e+(o^i&(r^o))+n[8]+1770035416&4294967295,e=i+(s<<7&4294967295|s>>>25),s=o+(r^e&(i^r))+n[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(i^o&(e^i))+n[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(e^r&(o^e))+n[11]+2304563134&4294967295,i=r+(s<<22&4294967295|s>>>10),s=e+(o^i&(r^o))+n[12]+1804603682&4294967295,e=i+(s<<7&4294967295|s>>>25),s=o+(r^e&(i^r))+n[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(i^o&(e^i))+n[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(e^r&(o^e))+n[15]+1236535329&4294967295,i=r+(s<<22&4294967295|s>>>10),s=e+(r^o&(i^r))+n[1]+4129170786&4294967295,e=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(e^i))+n[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^i&(o^e))+n[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^e&(r^o))+n[0]+3921069994&4294967295,i=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(i^r))+n[5]+3593408605&4294967295,e=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(e^i))+n[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^i&(o^e))+n[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^e&(r^o))+n[4]+3889429448&4294967295,i=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(i^r))+n[9]+568446438&4294967295,e=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(e^i))+n[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^i&(o^e))+n[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^e&(r^o))+n[8]+1163531501&4294967295,i=r+(s<<20&4294967295|s>>>12),s=e+(r^o&(i^r))+n[13]+2850285829&4294967295,e=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(e^i))+n[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^i&(o^e))+n[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^e&(r^o))+n[12]+2368359562&4294967295,i=r+(s<<20&4294967295|s>>>12),s=e+(i^r^o)+n[5]+4294588738&4294967295,e=i+(s<<4&4294967295|s>>>28),s=o+(e^i^r)+n[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^i)+n[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^e)+n[14]+4259657740&4294967295,i=r+(s<<23&4294967295|s>>>9),s=e+(i^r^o)+n[1]+2763975236&4294967295,e=i+(s<<4&4294967295|s>>>28),s=o+(e^i^r)+n[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^i)+n[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^e)+n[10]+3200236656&4294967295,i=r+(s<<23&4294967295|s>>>9),s=e+(i^r^o)+n[13]+681279174&4294967295,e=i+(s<<4&4294967295|s>>>28),s=o+(e^i^r)+n[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^i)+n[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^e)+n[6]+76029189&4294967295,i=r+(s<<23&4294967295|s>>>9),s=e+(i^r^o)+n[9]+3654602809&4294967295,e=i+(s<<4&4294967295|s>>>28),s=o+(e^i^r)+n[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^i)+n[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^e)+n[2]+3299628645&4294967295,i=r+(s<<23&4294967295|s>>>9),s=e+(r^(i|~o))+n[0]+4096336452&4294967295,e=i+(s<<6&4294967295|s>>>26),s=o+(i^(e|~r))+n[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~i))+n[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~e))+n[5]+4237533241&4294967295,i=r+(s<<21&4294967295|s>>>11),s=e+(r^(i|~o))+n[12]+1700485571&4294967295,e=i+(s<<6&4294967295|s>>>26),s=o+(i^(e|~r))+n[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~i))+n[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~e))+n[1]+2240044497&4294967295,i=r+(s<<21&4294967295|s>>>11),s=e+(r^(i|~o))+n[8]+1873313359&4294967295,e=i+(s<<6&4294967295|s>>>26),s=o+(i^(e|~r))+n[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~i))+n[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~e))+n[13]+1309151649&4294967295,i=r+(s<<21&4294967295|s>>>11),s=e+(r^(i|~o))+n[4]+4149444226&4294967295,e=i+(s<<6&4294967295|s>>>26),s=o+(i^(e|~r))+n[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~i))+n[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~e))+n[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}wn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var i=e-this.blockSize,n=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=i;)D0(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(n[r++]=t.charCodeAt(o++),r==this.blockSize){D0(this,n),r=0;break}}else for(;o<e;)if(n[r++]=t[o++],r==this.blockSize){D0(this,n),r=0;break}}this.h=r,this.i+=e};wn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var i=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=i&255,i/=256;for(this.j(t),t=Array(16),e=i=0;4>e;++e)for(var n=0;32>n;n+=8)t[i++]=this.g[e]>>>n&255;return t};function We(t,e){this.h=e;for(var i=[],n=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;n&&o==e||(i[r]=o,n=!1)}this.g=i}var kH={};function hw(t){return-128<=t&&128>t?U3(t,function(e){return new We([e|0],0>e?-1:0)}):new We([t|0],0>t?-1:0)}function Qn(t){if(isNaN(t)||!isFinite(t))return tl;if(0>t)return ei(Qn(-t));for(var e=[],i=1,n=0;t>=i;n++)e[n]=t/i|0,i*=H0;return new We(e,0)}function DR(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ei(DR(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Qn(Math.pow(e,8)),n=tl,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),s=parseInt(t.substring(r,r+o),e);8>o?(o=Qn(Math.pow(e,o)),n=n.R(o).add(Qn(s))):(n=n.R(i),n=n.add(Qn(s)))}return n}var H0=4294967296,tl=hw(0),q0=hw(1),E1=hw(16777216);L=We.prototype;L.ea=function(){if(an(this))return-ei(this).ea();for(var t=0,e=1,i=0;i<this.g.length;i++){var n=this.D(i);t+=(0<=n?n:H0+n)*e,e*=H0}return t};L.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(vr(this))return"0";if(an(this))return"-"+ei(this).toString(t);for(var e=Qn(Math.pow(t,6)),i=this,n="";;){var r=qf(i,e).g;i=Hf(i,r.R(e));var o=((0<i.g.length?i.g[0]:i.h)>>>0).toString(t);if(i=r,vr(i))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};L.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function vr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function an(t){return t.h==-1}L.X=function(t){return t=Hf(this,t),an(t)?-1:vr(t)?0:1};function ei(t){for(var e=t.g.length,i=[],n=0;n<e;n++)i[n]=~t.g[n];return new We(i,~t.h).add(q0)}L.abs=function(){return an(this)?ei(this):this};L.add=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0,r=0;r<=e;r++){var o=n+(this.D(r)&65535)+(t.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);n=s>>>16,o&=65535,s&=65535,i[r]=s<<16|o}return new We(i,i[i.length-1]&-2147483648?-1:0)};function Hf(t,e){return t.add(ei(e))}L.R=function(t){if(vr(this)||vr(t))return tl;if(an(this))return an(t)?ei(this).R(ei(t)):ei(ei(this).R(t));if(an(t))return ei(this.R(ei(t)));if(0>this.X(E1)&&0>t.X(E1))return Qn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,i=[],n=0;n<2*e;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var r=0;r<t.g.length;r++){var o=this.D(n)>>>16,s=this.D(n)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;i[2*n+2*r]+=s*l,Lf(i,2*n+2*r),i[2*n+2*r+1]+=o*l,Lf(i,2*n+2*r+1),i[2*n+2*r+1]+=s*a,Lf(i,2*n+2*r+1),i[2*n+2*r+2]+=o*a,Lf(i,2*n+2*r+2)}for(n=0;n<e;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=e;n<2*e;n++)i[n]=0;return new We(i,0)};function Lf(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Kd(t,e){this.g=t,this.h=e}function qf(t,e){if(vr(e))throw Error("division by zero");if(vr(t))return new Kd(tl,tl);if(an(t))return e=qf(ei(t),e),new Kd(ei(e.g),ei(e.h));if(an(e))return e=qf(t,ei(e)),new Kd(ei(e.g),e.h);if(30<t.g.length){if(an(t)||an(e))throw Error("slowDivide_ only works with positive integers.");for(var i=q0,n=e;0>=n.X(t);)i=I1(i),n=I1(n);var r=Ja(i,1),o=Ja(n,1);for(n=Ja(n,2),i=Ja(i,2);!vr(n);){var s=o.add(n);0>=s.X(t)&&(r=r.add(i),o=s),n=Ja(n,1),i=Ja(i,1)}return e=Hf(t,r.R(e)),new Kd(r,e)}for(r=tl;0<=t.X(e);){for(i=Math.max(1,Math.floor(t.ea()/e.ea())),n=Math.ceil(Math.log(i)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=Qn(i),s=o.R(e);an(s)||0<s.X(t);)i-=n,o=Qn(i),s=o.R(e);vr(o)&&(o=q0),r=r.add(o),t=Hf(t,s)}return new Kd(r,t)}L.gb=function(t){return qf(this,t).h};L.and=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)&t.D(n);return new We(i,this.h&t.h)};L.or=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)|t.D(n);return new We(i,this.h|t.h)};L.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),i=[],n=0;n<e;n++)i[n]=this.D(n)^t.D(n);return new We(i,this.h^t.h)};function I1(t){for(var e=t.g.length+1,i=[],n=0;n<e;n++)i[n]=t.D(n)<<1|t.D(n-1)>>>31;return new We(i,t.h)}function Ja(t,e){var i=e>>5;e%=32;for(var n=t.g.length-i,r=[],o=0;o<n;o++)r[o]=0<e?t.D(o+i)>>>e|t.D(o+i+1)<<32-e:t.D(o+i);return new We(r,t.h)}Uf.prototype.createWebChannel=Uf.prototype.g;ji.prototype.send=ji.prototype.u;ji.prototype.open=ji.prototype.m;ji.prototype.close=ji.prototype.close;Zf.NO_ERROR=0;Zf.TIMEOUT=8;Zf.HTTP_ERROR=6;$1.COMPLETE="complete";W1.EventType=cu;cu.OPEN="a";cu.CLOSE="b";cu.ERROR="c";cu.MESSAGE="d";Wt.prototype.listen=Wt.prototype.O;_t.prototype.listenOnce=_t.prototype.P;_t.prototype.getLastError=_t.prototype.Sa;_t.prototype.getLastErrorCode=_t.prototype.Ia;_t.prototype.getStatus=_t.prototype.da;_t.prototype.getResponseJson=_t.prototype.Wa;_t.prototype.getResponseText=_t.prototype.ja;_t.prototype.send=_t.prototype.ha;_t.prototype.setWithCredentials=_t.prototype.Oa;wn.prototype.digest=wn.prototype.l;wn.prototype.reset=wn.prototype.reset;wn.prototype.update=wn.prototype.j;We.prototype.add=We.prototype.add;We.prototype.multiply=We.prototype.R;We.prototype.modulo=We.prototype.gb;We.prototype.compare=We.prototype.X;We.prototype.toNumber=We.prototype.ea;We.prototype.toString=We.prototype.toString;We.prototype.getBits=We.prototype.D;We.fromNumber=Qn;We.fromString=DR;var AR=xn.createWebChannelTransport=function(){return new Uf},kR=xn.getStatEventTarget=function(){return Xf()},sp=xn.ErrorCode=Zf,RR=xn.EventType=$1,MR=xn.Event=_s,mw=xn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},CZ=xn.FetchXmlHttpFactory=hu,pu=xn.WebChannel=W1,PR=xn.XhrIo=_t,OR=xn.Md5=wn,bs=xn.Integer=We;var FR="@firebase/firestore";var Ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var Fl="10.10.0";var _o=new Fr("@firebase/firestore");function cl(){return _o.logLevel}function FM(t){_o.setLogLevel(t)}function T(t,...e){if(_o.logLevel<=Gi.DEBUG){let i=e.map(gC);_o.debug(`Firestore (${Fl}): ${t}`,...i)}}function Et(t,...e){if(_o.logLevel<=Gi.ERROR){let i=e.map(gC);_o.error(`Firestore (${Fl}): ${t}`,...i)}}function cn(t,...e){if(_o.logLevel<=Gi.WARN){let i=e.map(gC);_o.warn(`Firestore (${Fl}): ${t}`,...i)}}function gC(t){if(typeof t=="string")return t;try{return function(i){return JSON.stringify(i)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: `+t;throw Et(e),new Error(e)}function ne(t,e){t||K()}function NM(t,e){t||K()}function V(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=class extends ZE{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ft=class{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}};var _p=class{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(Ot.UNAUTHENTICATED))}shutdown(){}},vw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}},yw=class{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){let n=this.i,r=l=>this.i!==n?(n=this.i,i(l)):Promise.resolve(),o=new Ft;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ft,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>C(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ft)}},0),s()}getToken(){let e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(n=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ne(typeof n.accessToken=="string"),new _p(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new Ot(e)}},ww=class{constructor(e,i,n){this.l=e,this.h=i,this.P=n,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},xw=class{constructor(e,i,n){this.l=e,this.h=i,this.P=n}getToken(){return Promise.resolve(new ww(this.l,this.h,this.P))}start(e,i){e.enqueueRetryable(()=>i(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Cw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ew=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,i){let n=o=>{o.error!=null&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,T("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?i(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};let r=o=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(ne(typeof i.token=="string"),this.R=i.token,new Cw(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function RH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let n=0;n<t;n++)i[n]=Math.floor(256*Math.random());return i}var bp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length,n="";for(;n.length<20;){let r=RH(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<i&&(n+=e.charAt(r[o]%e.length))}return n}};function _e(t,e){return t<e?-1:t>e?1:0}function bl(t,e,i){return t.length===e.length&&t.every((n,r)=>i(n,e[r]))}function VM(t){return t+"\0"}var ft=class t{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new I(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new I(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new I(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let i=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*i));return new t(i,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ft(0,0))}static max(){return new t(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vp=class t{constructor(e,i,n){i===void 0?i=0:i>e.length&&K(),n===void 0?n=e.length-i:n>e.length-i&&K(),this.segments=e,this.offset=i,this.len=n}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let i=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(n=>{i.push(n)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,n=this.limit();i<n;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){let n=Math.min(e.length,i.length);for(let r=0;r<n;r++){let o=e.get(r),s=i.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<i.length?-1:e.length>i.length?1:0}},Pe=class t extends vp{construct(e,i,n){return new t(e,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let i=[];for(let n of e){if(n.indexOf("//")>=0)throw new I(x.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter(r=>r.length>0))}return new t(i)}static emptyPath(){return new t([])}},MH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,It=class t extends vp{construct(e,i,n){return new t(e,i,n)}static isValidIdentifier(e){return MH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let i=[],n="",r=0,o=()=>{if(n.length===0)throw new I(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new I(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new I(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(n+=a,r++):(o(),r++)}if(o(),s)throw new I(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(i)}static emptyPath(){return new t([])}};var O=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return Pe.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};var vl=class{constructor(e,i,n,r){this.indexId=e,this.collectionGroup=i,this.fields=n,this.indexState=r}};function Iw(t){return t.fields.find(e=>e.kind===2)}function ys(t){return t.fields.filter(e=>e.kind!==2)}vl.UNKNOWN_ID=-1;var pl=class{constructor(e,i){this.fieldPath=e,this.kind=i}};var Su=class t{constructor(e,i){this.sequenceNumber=e,this.offset=i}static empty(){return new t(0,dn.min())}};function LM(t,e){let i=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,r=se.fromTimestamp(n===1e9?new ft(i+1,0):new ft(i,n));return new dn(r,O.empty(),e)}function jM(t){return new dn(t.readTime,t.key,-1)}var dn=class t{constructor(e,i,n){this.readTime=e,this.documentKey=i,this.largestBatchId=n}static min(){return new t(se.min(),O.empty(),-1)}static max(){return new t(se.max(),O.empty(),-1)}};function _C(t,e){let i=t.readTime.compareTo(e.readTime);return i!==0?i:(i=O.comparator(t.documentKey,e.documentKey),i!==0?i:_e(t.largestBatchId,e.largestBatchId))}var BM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function So(t){return C(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==BM)throw t;T("LocalStore","Unexpectedly lost primary lease")})}var w=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new t((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(i,o).next(n,r)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{let i=e();return i instanceof t?i:t.resolve(i)}catch(i){return t.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):t.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):t.reject(i)}static resolve(e){return new t((i,n)=>{i(e)})}static reject(e){return new t((i,n)=>{n(e)})}static waitFor(e){return new t((i,n)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&i()},l=>n(l))}),s=!0,o===r&&i()})}static or(e){let i=t.resolve(!1);for(let n of e)i=i.next(r=>r?t.resolve(r):n());return i}static forEach(e,i){let n=[];return e.forEach((r,o)=>{n.push(i.call(this,r,o))}),this.waitFor(n)}static mapArray(e,i){return new t((n,r)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let c=l;i(e[c]).next(d=>{s[c]=d,++a,a===o&&n(s)},d=>r(d))}})}static doWhile(e,i){return new t((n,r)=>{let o=()=>{e()===!0?i().next(()=>{o()},r):n()};o()})}};var wp=class t{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.V=new Ft,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{i.error?this.V.reject(new Ts(e,i.error)):this.V.resolve()},this.transaction.onerror=n=>{let r=bC(n.target.error);this.V.reject(new Ts(e,r))}}static open(e,i,n,r){try{return new t(i,e.transaction(r,n))}catch(o){throw new Ts(i,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(T("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let i=this.transaction.objectStore(e);return new Sw(i)}},Cr=class t{constructor(e,i,n){this.name=e,this.version=i,this.p=n,t.S(nc())===12.2&&Et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return T("SimpleDb","Removing database:",e),ws(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!yh())return!1;if(t.C())return!0;let e=nc(),i=t.S(e),n=0<i&&i<10,r=t.v(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,i){return e.store(i)}static S(e){let i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){let i=e.match(/Android ([\d.]+)/i),n=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(n)}O(e){return C(this,null,function*(){return this.db||(T("SimpleDb","Opening database:",this.name),this.db=yield new Promise((i,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;i(s)},r.onblocked=()=>{n(new Ts(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?n(new I(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new I(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Ts(e,s))},r.onupgradeneeded=o=>{T("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{T("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=i=>this.L(i)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,n,r){return C(this,null,function*(){let o=i==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=wp.open(this.db,e,o?"readonly":"readwrite",n),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),w.reject(c))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&s<3;if(T("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Tw=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ws(this.k.delete())}},Ts=class extends I{constructor(e,i){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}};function Do(t){return t.name==="IndexedDbTransactionError"}var Sw=class{constructor(e){this.store=e}put(e,i){let n;return i!==void 0?(T("SimpleDb","PUT",this.store.name,e,i),n=this.store.put(i,e)):(T("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ws(n)}add(e){return T("SimpleDb","ADD",this.store.name,e,e),ws(this.store.add(e))}get(e){return ws(this.store.get(e)).next(i=>(i===void 0&&(i=null),T("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return T("SimpleDb","DELETE",this.store.name,e),ws(this.store.delete(e))}count(){return T("SimpleDb","COUNT",this.store.name),ws(this.store.count())}W(e,i){let n=this.options(e,i),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(n.range);return new w((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(n),s=[];return this.G(o,(a,l)=>{s.push(l)}).next(()=>s)}}j(e,i){let n=this.store.getAll(e,i===null?void 0:i);return new w((r,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{r(s.target.result)}})}H(e,i){T("SimpleDb","DELETE ALL",this.store.name);let n=this.options(e,i);n.J=!1;let r=this.cursor(n);return this.G(r,(o,s,a)=>a.delete())}Y(e,i){let n;i?n=e:(n={},i=e);let r=this.cursor(n);return this.G(r,i)}Z(e){let i=this.cursor({});return new w((n,r)=>{i.onerror=o=>{let s=bC(o.target.error);r(s)},i.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():n()}):n()}})}G(e,i){let n=[];return new w((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let l=new Tw(a),c=i(a.primaryKey,a.value,l);if(c instanceof w){let d=c.catch(u=>(l.done(),w.reject(u)));n.push(d)}l.isDone?r():l.$===null?a.continue():a.continue(l.$)}}).next(()=>w.waitFor(n))}options(e,i){let n;return e!==void 0&&(typeof e=="string"?n=e:i=e),{index:n,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){let n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,i):n.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}};function ws(t){return new w((e,i)=>{t.onsuccess=n=>{let r=n.target.result;e(r)},t.onerror=n=>{let r=bC(n.target.error);i(r)}})}var NR=!1;function bC(t){let e=Cr.S(nc());if(e>=12.2&&e<13){let i="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(i)>=0){let n=new I("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NR||(NR=!0,setTimeout(()=>{throw n},0)),n}}return t}var Dw=class{constructor(e,i){this.asyncQueue=e,this.X=i,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){T("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>C(this,null,function*(){this.task=null;try{T("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(i){Do(i)?T("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield So(i)}yield this.ee(6e4)}))}},Aw=class{constructor(e,i){this.localStore=e,this.persistence=i}te(e=50){return C(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>this.ne(i,e))})}ne(e,i){let n=new Set,r=i,o=!0;return w.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!n.has(s))return T("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,r).next(a=>{r-=a,n.add(s)});o=!1})).next(()=>i-r)}re(e,i,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,i).next(r=>this.localStore.localDocuments.getNextDocuments(e,i,r,n).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(r,o)).next(a=>(T("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,i,a))).next(()=>s.size)}))}ie(e,i){let n=e;return i.changes.forEach((r,o)=>{let s=jM(o);_C(s,n)>0&&(n=s)}),new dn(n.readTime,n.documentKey,Math.max(i.batchId,e.largestBatchId))}};var Bi=(()=>{class t{constructor(i,n){this.previousValue=i,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){let i=++this.previousValue;return this.oe&&this.oe(i),i}}return t._e=-1,t})();function Yu(t){return t==null}function Du(t){return t===0&&1/t==-1/0}function zM(t){return typeof t=="number"&&Number.isInteger(t)&&!Du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function _i(t){let e="";for(let i=0;i<t.length;i++)e.length>0&&(e=VR(e)),e=PH(t.get(i),e);return VR(e)}function PH(t,e){let i=e,n=t.length;for(let r=0;r<n;r++){let o=t.charAt(r);switch(o){case"\0":i+="";break;case"":i+="";break;default:i+=o}}return i}function VR(t){return t+""}function Xn(t){let e=t.length;if(ne(e>=2),e===2)return ne(t.charAt(0)===""&&t.charAt(1)===""),Pe.emptyPath();let i=e-2,n=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>i)&&K(),t.charAt(s+1)){case"":let a=t.substring(o,s),l;r.length===0?l=a:(r+=a,l=r,r=""),n.push(l);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:K()}o=s+2}return new Pe(n)}var LR=["userId","batchId"];function up(t,e){return[t,_i(e)]}function UM(t,e,i){return[t,_i(e),i]}var OH={},FH=["prefixPath","collectionGroup","readTime","documentId"],NH=["prefixPath","collectionGroup","documentId"],VH=["collectionGroup","readTime","prefixPath","documentId"],LH=["canonicalId","targetId"],jH=["targetId","path"],BH=["path","targetId"],zH=["collectionId","parent"],UH=["indexId","uid"],HH=["uid","sequenceNumber"],qH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$H=["indexId","uid","orderedDocumentKey"],WH=["userId","collectionPath","documentId"],GH=["userId","collectionPath","largestBatchId"],KH=["userId","collectionGroup","largestBatchId"],HM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],YH=[...HM,"documentOverlays"],qM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$M=qM,QH=[...$M,"indexConfiguration","indexState","indexEntries"];var Au=class extends yp{constructor(e,i){super(),this.ae=e,this.currentSequenceNumber=i}};function Yt(t,e){let i=V(t);return Cr.M(i.ae,e)}function jR(t){let e=0;for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&e++;return e}function Ls(t,e){for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function WM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ct=class t{constructor(e,i){this.comparator=e,this.root=i||Jn.EMPTY}insert(e,i){return new t(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){let n=this.comparator(e,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(e){let i=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return i+n.left.size;r<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,n)=>(e(i,n),!1))}toString(){let e=[];return this.inorderTraversal((i,n)=>(e.push(`${i}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fl(this.root,e,this.comparator,!0)}},fl=class{constructor(e,i,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=i?n(e.key,i):1,i&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jn=class t{constructor(e,i,n,r,o){this.key=e,this.value=i,this.color=n??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,n,r,o){return new t(e??this.key,i??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let r=this,o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,i,n),null):o===0?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(e,i,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let n,r=this;if(i(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),i(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,i,n,r,o){return this}insert(e,i,n){return new Jn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class t{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,n)=>(e(i),!1))}forEachInRange(e,i){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;i(r.key)}}forEachWhile(e,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new xp(this.data.getIterator())}getIteratorFrom(e){return new xp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(n=>{i=i.add(n)}),i}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let i=this.data.getIterator(),n=e.data.getIterator();for(;i.hasNext();){let r=i.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(i=>{e.push(i)}),e}toString(){let e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){let i=new t(this.comparator);return i.data=e,i}},xp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ol(t){return t.hasNext()?t.getNext():void 0}var zi=class t{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new t([])}unionWith(e){let i=new it(It.comparator);for(let n of this.fields)i=i.add(n);for(let n of e)i=i.add(n);return new t(i.toArray())}covers(e){for(let i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,(i,n)=>i.isEqual(n))}};var Cp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function GM(){return typeof atob<"u"}var Kt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let i=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Cp("Invalid base64 string: "+o):o}}(e);return new t(i)}static fromUint8Array(e){let i=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){let n=new Uint8Array(i.length);for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Kt.EMPTY_BYTE_STRING=new Kt("");var XH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(t){if(ne(!!t),typeof t=="string"){let e=0,i=XH.exec(t);if(ne(!!i),i[1]){let r=i[1];r=(r+"000000000").substr(0,9),e=Number(r)}let n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vo(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}function mg(t){var e,i;return((i=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function vC(t){let e=t.mapValue.fields.__previous_value__;return mg(e)?vC(e):e}function ku(t){let e=bo(t.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}var kw=class{constructor(e,i,n,r,o,s,a,l,c){this.databaseId=e,this.appId=i,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},yo=class t{constructor(e,i){this.projectId=e,this.database=i||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var po={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hp={nullValue:"NULL_VALUE"};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mg(t)?4:KM(t)?9007199254740991:10:K()}function ir(t,e){if(t===e)return!0;let i=Ss(t);if(i!==Ss(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=bo(r.timestampValue),a=bo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return vo(r.bytesValue).isEqual(vo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return bt(r.geoPointValue.latitude)===bt(o.geoPointValue.latitude)&&bt(r.geoPointValue.longitude)===bt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return bt(r.integerValue)===bt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=bt(r.doubleValue),a=bt(o.doubleValue);return s===a?Du(s)===Du(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return bl(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(jR(s)!==jR(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ir(s[l],a[l])))return!1;return!0}(t,e);default:return K()}}function Ru(t,e){return(t.values||[]).find(i=>ir(i,e))!==void 0}function wo(t,e){if(t===e)return 0;let i=Ss(t),n=Ss(e);if(i!==n)return _e(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=bt(o.integerValue||o.doubleValue),l=bt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return BR(t.timestampValue,e.timestampValue);case 4:return BR(ku(t),ku(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(o,s){let a=vo(o),l=vo(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){let d=_e(a[c],l[c]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=_e(bt(o.latitude),bt(s.latitude));return a!==0?a:_e(bt(o.longitude),bt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],l=s.values||[];for(let c=0;c<a.length&&c<l.length;++c){let d=wo(a[c],l[c]);if(d)return d}return _e(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===po.mapValue&&s===po.mapValue)return 0;if(o===po.mapValue)return 1;if(s===po.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),c=s.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let u=0;u<l.length&&u<d.length;++u){let h=_e(l[u],d[u]);if(h!==0)return h;let m=wo(a[l[u]],c[d[u]]);if(m!==0)return m}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw K()}}function BR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);let i=bo(t),n=bo(e),r=_e(i.seconds,n.seconds);return r!==0?r:_e(i.nanos,n.nanos)}function yl(t){return Rw(t)}function Rw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){let n=bo(i);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(i){return vo(i).toBase64()}(t.bytesValue):"referenceValue"in t?function(i){return O.fromName(i).toString()}(t.referenceValue):"geoPointValue"in t?function(i){return`geo(${i.latitude},${i.longitude})`}(t.geoPointValue):"arrayValue"in t?function(i){let n="[",r=!0;for(let o of i.values||[])r?r=!1:n+=",",n+=Rw(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(i){let n=Object.keys(i.fields||{}).sort(),r="{",o=!0;for(let s of n)o?o=!1:r+=",",r+=`${s}:${Rw(i.fields[s])}`;return r+"}"}(t.mapValue):K()}function Ds(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mw(t){return!!t&&"integerValue"in t}function Mu(t){return!!t&&"arrayValue"in t}function zR(t){return!!t&&"nullValue"in t}function UR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mp(t){return!!t&&"mapValue"in t}function xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(i,n)=>e.mapValue.fields[i]=xu(n)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let i=0;i<(t.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=xu(t.arrayValue.values[i]);return e}return Object.assign({},t)}function KM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function ZH(t){return"nullValue"in t?hp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ds(yo.empty(),O.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:K()}function JH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ds(yo.empty(),O.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?po:K()}function HR(t,e){let i=wo(t.value,e.value);return i!==0?i:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function qR(t,e){let i=wo(t.value,e.value);return i!==0?i:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var di=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let n=0;n<e.length-1;++n)if(i=(i.mapValue.fields||{})[e.get(n)],!mp(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(i)}setAll(e){let i=It.emptyPath(),n={},r=[];e.forEach((s,a)=>{if(!i.isImmediateParentOf(a)){let l=this.getFieldsMap(i);this.applyChanges(l,n,r),n={},r=[],i=a.popLast()}s?n[a.lastSegment()]=xu(s):r.push(a.lastSegment())});let o=this.getFieldsMap(i);this.applyChanges(o,n,r)}delete(e){let i=this.field(e.popLast());mp(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=i.mapValue.fields[e.get(n)];mp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},i.mapValue.fields[e.get(n)]=r),i=r}return i.mapValue.fields}applyChanges(e,i,n){Ls(i,(r,o)=>e[r]=o);for(let r of n)delete e[r]}clone(){return new t(xu(this.value))}};function YM(t){let e=[];return Ls(t.fields,(i,n)=>{let r=new It([i]);if(mp(n)){let o=YM(n.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new zi(e)}var Nt=class t{constructor(e,i,n,r,o,s,a){this.key=e,this.documentType=i,this.version=n,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,se.min(),se.min(),se.min(),di.empty(),0)}static newFoundDocument(e,i,n,r){return new t(e,1,i,se.min(),n,r,0)}static newNoDocument(e,i){return new t(e,2,i,se.min(),se.min(),di.empty(),0)}static newUnknownDocument(e,i){return new t(e,3,i,se.min(),se.min(),di.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var nr=class{constructor(e,i){this.position=e,this.inclusive=i}};function $R(t,e,i){let n=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?n=O.comparator(O.fromName(s.referenceValue),i.key):n=wo(s,i.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function WR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let i=0;i<t.position.length;i++)if(!ir(t.position[i],e.position[i]))return!1;return!0}var As=class{constructor(e,i="asc"){this.field=e,this.dir=i}};function eq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ep=class{},Re=class t extends Ep{constructor(e,i,n){super(),this.field=e,this.op=i,this.value=n}static create(e,i,n){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,n):new Fw(e,i,n):i==="array-contains"?new Lw(e,n):i==="in"?new Ip(e,n):i==="not-in"?new jw(e,n):i==="array-contains-any"?new Bw(e,n):new t(e,i,n)}static createKeyFieldInFilter(e,i,n){return i==="in"?new Nw(e,n):new Vw(e,n)}matches(e){let i=e.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(wo(i,this.value)):i!==null&&Ss(this.value)===Ss(i)&&this.matchesComparison(wo(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ge=class t extends Ep{constructor(e,i){super(),this.filters=e,this.op=i,this.ue=null}static create(e,i){return new t(e,i)}matches(e){return wl(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function wl(t){return t.op==="and"}function Pw(t){return t.op==="or"}function yC(t){return QM(t)&&wl(t)}function QM(t){for(let e of t.filters)if(e instanceof Ge)return!1;return!0}function Ow(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+yl(t.value);if(yC(t))return t.filters.map(e=>Ow(e)).join(",");{let e=t.filters.map(i=>Ow(i)).join(",");return`${t.op}(${e})`}}function XM(t,e){return t instanceof Re?function(n,r){return r instanceof Re&&n.op===r.op&&n.field.isEqual(r.field)&&ir(n.value,r.value)}(t,e):t instanceof Ge?function(n,r){return r instanceof Ge&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((o,s,a)=>o&&XM(s,r.filters[a]),!0):!1}(t,e):void K()}function ZM(t,e){let i=t.filters.concat(e);return Ge.create(i,t.op)}function JM(t){return t instanceof Re?function(i){return`${i.field.canonicalString()} ${i.op} ${yl(i.value)}`}(t):t instanceof Ge?function(i){return i.op.toString()+" {"+i.getFilters().map(JM).join(" ,")+"}"}(t):"Filter"}var Fw=class extends Re{constructor(e,i,n){super(e,i,n),this.key=O.fromName(n.referenceValue)}matches(e){let i=O.comparator(e.key,this.key);return this.matchesComparison(i)}},Nw=class extends Re{constructor(e,i){super(e,"in",i),this.keys=eP("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}},Vw=class extends Re{constructor(e,i){super(e,"not-in",i),this.keys=eP("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}};function eP(t,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(n=>O.fromName(n.referenceValue))}var Lw=class extends Re{constructor(e,i){super(e,"array-contains",i)}matches(e){let i=e.data.field(this.field);return Mu(i)&&Ru(i.arrayValue,this.value)}},Ip=class extends Re{constructor(e,i){super(e,"in",i)}matches(e){let i=e.data.field(this.field);return i!==null&&Ru(this.value.arrayValue,i)}},jw=class extends Re{constructor(e,i){super(e,"not-in",i)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let i=e.data.field(this.field);return i!==null&&!Ru(this.value.arrayValue,i)}},Bw=class extends Re{constructor(e,i){super(e,"array-contains-any",i)}matches(e){let i=e.data.field(this.field);return!(!Mu(i)||!i.arrayValue.values)&&i.arrayValue.values.some(n=>Ru(this.value.arrayValue,n))}};var zw=class{constructor(e,i=null,n=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=i,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Uw(t,e=null,i=[],n=[],r=null,o=null,s=null){return new zw(t,e,i,n,r,o,s)}function ks(t){let e=V(t);if(e.ce===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(n=>Ow(n)).join(","),i+="|ob:",i+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),Yu(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(n=>yl(n)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(n=>yl(n)).join(",")),e.ce=i}return e.ce}function Qu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!eq(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(!XM(t.filters[i],e.filters[i]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WR(t.startAt,e.startAt)&&WR(t.endAt,e.endAt)}function Tp(t){return O.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Sp(t,e){return t.filters.filter(i=>i instanceof Re&&i.field.isEqual(e))}function GR(t,e,i){let n=hp,r=!0;for(let o of Sp(t,e)){let s=hp,a=!0;switch(o.op){case"<":case"<=":s=ZH(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=hp}HR({value:n,inclusive:r},{value:s,inclusive:a})<0&&(n=s,r=a)}if(i!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=i.position[o];HR({value:n,inclusive:r},{value:s,inclusive:i.inclusive})<0&&(n=s,r=i.inclusive);break}}return{value:n,inclusive:r}}function KR(t,e,i){let n=po,r=!0;for(let o of Sp(t,e)){let s=po,a=!0;switch(o.op){case">=":case">":s=JH(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=po}qR({value:n,inclusive:r},{value:s,inclusive:a})>0&&(n=s,r=a)}if(i!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=i.position[o];qR({value:n,inclusive:r},{value:s,inclusive:i.inclusive})>0&&(n=s,r=i.inclusive);break}}return{value:n,inclusive:r}}var Cn=class{constructor(e,i=null,n=[],r=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function tP(t,e,i,n,r,o,s,a){return new Cn(t,e,i,n,r,o,s,a)}function Nl(t){return new Cn(t)}function YR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wC(t){return t.collectionGroup!==null}function gl(t){let e=V(t);if(e.le===null){e.le=[];let i=new Set;for(let o of e.explicitOrderBy)e.le.push(o),i.add(o.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new it(It.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{i.has(o.canonicalString())||o.isKeyField()||e.le.push(new As(o,n))}),i.has(It.keyField().canonicalString())||e.le.push(new As(It.keyField(),n))}return e.le}function bi(t){let e=V(t);return e.he||(e.he=tq(e,gl(t))),e.he}function tq(t,e){if(t.limitType==="F")return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new As(r.field,o)});let i=t.endAt?new nr(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new nr(t.startAt.position,t.startAt.inclusive):null;return Uw(t.path,t.collectionGroup,e,t.filters,t.limit,i,n)}}function Hw(t,e){let i=t.filters.concat([e]);return new Cn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),i,t.limit,t.limitType,t.startAt,t.endAt)}function Dp(t,e,i){return new Cn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,i,t.startAt,t.endAt)}function Xu(t,e){return Qu(bi(t),bi(e))&&t.limitType===e.limitType}function iP(t){return`${ks(bi(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${function(i){let n=i.path.canonicalString();return i.collectionGroup!==null&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>JM(r)).join(", ")}]`),Yu(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),i.startAt&&(n+=", startAt: ",n+=i.startAt.inclusive?"b:":"a:",n+=i.startAt.position.map(r=>yl(r)).join(",")),i.endAt&&(n+=", endAt: ",n+=i.endAt.inclusive?"a:":"b:",n+=i.endAt.position.map(r=>yl(r)).join(",")),`Target(${n})`}(bi(t))}; limitType=${t.limitType})`}function Zu(t,e){return e.isFoundDocument()&&function(n,r){let o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):O.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,r){for(let o of gl(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,r){for(let o of n.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,a,l){let c=$R(s,a,l);return s.inclusive?c<=0:c<0}(n.startAt,gl(n),r)||n.endAt&&!function(s,a,l){let c=$R(s,a,l);return s.inclusive?c>=0:c>0}(n.endAt,gl(n),r))}(t,e)}function nP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rP(t){return(e,i)=>{let n=!1;for(let r of gl(t)){let o=iq(r,e,i);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function iq(t,e,i){let n=t.field.isKeyField()?O.comparator(e.key,i.key):function(o,s,a){let l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?wo(l,c):K()}(t.field,e,i);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return K()}}var rr=class{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){let i=this.mapKeyFn(e),n=this.inner[i];if(n!==void 0){for(let[r,o]of n)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,i){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,i]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,i]);r.push([e,i]),this.innerSize++}delete(e){let i=this.mapKeyFn(e),n=this.inner[i];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[i]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(i,n)=>{for(let[r,o]of n)e(r,o)})}isEmpty(){return WM(this.inner)}size(){return this.innerSize}};var nq=new ct(O.comparator);function Ti(){return nq}var oP=new ct(O.comparator);function yu(...t){let e=oP;for(let i of t)e=e.insert(i.key,i);return e}function sP(t){let e=oP;return t.forEach((i,n)=>e=e.insert(i,n.overlayedDocument)),e}function Zn(){return Cu()}function aP(){return Cu()}function Cu(){return new rr(t=>t.toString(),(t,e)=>t.isEqual(e))}var rq=new ct(O.comparator),oq=new it(O.comparator);function ve(...t){let e=oq;for(let i of t)e=e.add(i);return e}var sq=new it(_e);function xC(){return sq}function lP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(e)?"-0":e}}function cP(t){return{integerValue:""+t}}function dP(t,e){return zM(e)?cP(e):lP(t,e)}var xl=class{constructor(){this._=void 0}};function aq(t,e,i){return t instanceof xo?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&mg(o)&&(o=vC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(i,e):t instanceof Er?hP(t,e):t instanceof Ir?mP(t,e):function(r,o){let s=uP(r,o),a=QR(s)+QR(r.Ie);return Mw(s)&&Mw(r.Ie)?cP(a):lP(r.serializer,a)}(t,e)}function lq(t,e,i){return t instanceof Er?hP(t,e):t instanceof Ir?mP(t,e):i}function uP(t,e){return t instanceof Co?function(n){return Mw(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}var xo=class extends xl{},Er=class extends xl{constructor(e){super(),this.elements=e}};function hP(t,e){let i=fP(e);for(let n of t.elements)i.some(r=>ir(r,n))||i.push(n);return{arrayValue:{values:i}}}var Ir=class extends xl{constructor(e){super(),this.elements=e}};function mP(t,e){let i=fP(e);for(let n of t.elements)i=i.filter(r=>!ir(r,n));return{arrayValue:{values:i}}}var Co=class extends xl{constructor(e,i){super(),this.serializer=e,this.Ie=i}};function QR(t){return bt(t.integerValue||t.doubleValue)}function fP(t){return Mu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Rs=class{constructor(e,i){this.field=e,this.transform=i}};function cq(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Er&&r instanceof Er||n instanceof Ir&&r instanceof Ir?bl(n.elements,r.elements,ir):n instanceof Co&&r instanceof Co?ir(n.Ie,r.Ie):n instanceof xo&&r instanceof xo}(t.transform,e.transform)}var qw=class{constructor(e,i){this.version=e,this.transformResults=i}},vt=class t{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Cl=class{};function pP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Io(t.key,vt.none()):new Eo(t.key,t.data,vt.none());{let i=t.data,n=di.empty(),r=new it(It.comparator);for(let o of e.fields)if(!r.has(o)){let s=i.field(o);s===null&&o.length>1&&(o=o.popLast(),s=i.field(o)),s===null?n.delete(o):n.set(o,s),r=r.add(o)}return new En(t.key,n,new zi(r.toArray()),vt.none())}}function dq(t,e,i){t instanceof Eo?function(r,o,s){let a=r.value.clone(),l=ZR(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,i):t instanceof En?function(r,o,s){if(!fp(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ZR(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(gP(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,i):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,i)}function Eu(t,e,i,n){return t instanceof Eo?function(o,s,a,l){if(!fp(o.precondition,s))return a;let c=o.value.clone(),d=JR(o.fieldTransforms,l,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,i,n):t instanceof En?function(o,s,a,l){if(!fp(o.precondition,s))return a;let c=JR(o.fieldTransforms,l,s),d=s.data;return d.setAll(gP(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(u=>u.field))}(t,e,i,n):function(o,s,a){return fp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,i)}function uq(t,e){let i=null;for(let n of t.fieldTransforms){let r=e.data.field(n.field),o=uP(n.transform,r||null);o!=null&&(i===null&&(i=di.empty()),i.set(n.field,o))}return i||null}function XR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&bl(n,r,(o,s)=>cq(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Eo=class extends Cl{constructor(e,i,n,r=[]){super(),this.key=e,this.value=i,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},En=class extends Cl{constructor(e,i,n,r,o=[]){super(),this.key=e,this.data=i,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function gP(t){let e=new Map;return t.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){let n=t.data.field(i);e.set(i,n)}}),e}function ZR(t,e,i){let n=new Map;ne(t.length===i.length);for(let r=0;r<i.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);n.set(o.field,lq(s,a,i[r]))}return n}function JR(t,e,i){let n=new Map;for(let r of t){let o=r.transform,s=i.data.field(r.field);n.set(r.field,aq(o,s,e))}return n}var Io=class extends Cl{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Pu=class extends Cl{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ou=class{constructor(e,i,n,r){this.batchId=e,this.localWriteTime=i,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,i){let n=i.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&dq(o,e,n[r])}}applyToLocalView(e,i){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(i=Eu(n,e,i,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(i=Eu(n,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){let n=aP();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=i.has(r.key)?null:a;let l=pP(s,a);l!==null&&n.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(se.min())}),n}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),ve())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,(i,n)=>XR(i,n))&&bl(this.baseMutations,e.baseMutations,(i,n)=>XR(i,n))}},$w=class t{constructor(e,i,n,r){this.batch=e,this.commitVersion=i,this.mutationResults=n,this.docVersions=r}static from(e,i,n){ne(e.mutations.length===n.length);let r=function(){return rq}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,n[s].version);return new t(e,i,n,r)}};var Fu=class{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ww=class{constructor(e,i){this.count=e,this.unchangedNames=i}};var Mt,Me;function _P(t){switch(t){default:return K();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function bP(t){if(t===void 0)return Et("GRPC error has no .code"),x.UNKNOWN;switch(t){case Mt.OK:return x.OK;case Mt.CANCELLED:return x.CANCELLED;case Mt.UNKNOWN:return x.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return x.INTERNAL;case Mt.UNAVAILABLE:return x.UNAVAILABLE;case Mt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Mt.NOT_FOUND:return x.NOT_FOUND;case Mt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Mt.ABORTED:return x.ABORTED;case Mt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Mt.DATA_LOSS:return x.DATA_LOSS;default:return K()}}(Me=Mt||(Mt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var eM=null;function vP(){return new TextEncoder}var hq=new bs([4294967295,4294967295],0);function tM(t){let e=vP().encode(t),i=new OR;return i.update(e),new Uint8Array(i.digest())}function iM(t){let e=new DataView(t.buffer),i=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bs([i,n],0),new bs([r,o],0)]}var Gw=class t{constructor(e,i,n){if(this.bitmap=e,this.padding=i,this.hashCount=n,i<0||i>=8)throw new Is(`Invalid padding: ${i}`);if(n<0)throw new Is(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Is(`Invalid hash count: ${n}`);if(e.length===0&&i!==0)throw new Is(`Invalid padding when bitmap length is 0: ${i}`);this.Te=8*e.length-i,this.Ee=bs.fromNumber(this.Te)}de(e,i,n){let r=e.add(i.multiply(bs.fromNumber(n)));return r.compare(hq)===1&&(r=new bs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let i=tM(e),[n,r]=iM(i);for(let o=0;o<this.hashCount;o++){let s=this.de(n,r,o);if(!this.Ae(s))return!1}return!0}static create(e,i,n){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,i);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let i=tM(e),[n,r]=iM(i);for(let o=0;o<this.hashCount;o++){let s=this.de(n,r,o);this.Re(s)}}Re(e){let i=Math.floor(e/8),n=e%8;this.bitmap[i]|=1<<n}},Is=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Nu=class t{constructor(e,i,n,r,o){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,i,n){let r=new Map;return r.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,i,n)),new t(se.min(),r,new ct(_e),Ti(),ve())}},Vu=class t{constructor(e,i,n,r,o){this.resumeToken=e,this.current=i,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,i,n){return new t(n,i,ve(),ve(),ve())}};var _l=class{constructor(e,i,n,r){this.Ve=e,this.removedTargetIds=i,this.key=n,this.me=r}},Ap=class{constructor(e,i){this.targetId=e,this.fe=i}},kp=class{constructor(e,i,n=Kt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=i,this.resumeToken=n,this.cause=r}},Rp=class{constructor(){this.ge=0,this.pe=rM(),this.ye=Kt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ve(),i=ve(),n=ve();return this.pe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:i=i.add(r);break;case 1:n=n.add(r);break;default:K()}}),new Vu(this.ye,this.we,e,i,n)}Fe(){this.Se=!1,this.pe=rM()}Me(e,i){this.Se=!0,this.pe=this.pe.insert(e,i)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ne(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Kw=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=Ti(),this.Qe=nM(),this.Ke=new ct(_e)}$e(e){for(let i of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(i,e.me):this.We(i,e.key,e.me);for(let i of e.removedTargetIds)this.We(i,e.key,e.me)}Ge(e){this.forEachTarget(e,i=>{let n=this.ze(i);switch(e.state){case 0:this.je(i)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(i);break;case 3:this.je(i)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(i)&&(this.He(i),n.Ce(e.resumeToken));break;default:K()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ke.forEach((n,r)=>{this.je(r)&&i(r)})}Je(e){let i=e.targetId,n=e.fe.count,r=this.Ye(i);if(r){let o=r.target;if(Tp(o))if(n===0){let s=new O(o.path);this.We(i,s,Nt.newNoDocument(s,se.min()))}else ne(n===1);else{let s=this.Ze(i);if(s!==n){let a=this.Xe(e),l=a?this.et(a,e,s):1;if(l!==0){this.He(i);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,c)}eM?.tt(function(d,u,h,m,b){var y,E,j,re,$,be;let Ie={localCacheCount:d,existenceFilterCount:u.count,databaseId:h.database,projectId:h.projectId},Fe=u.unchangedNames;return Fe&&(Ie.bloomFilter={applied:b===0,hashCount:(y=Fe?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(re=(j=(E=Fe?.bits)===null||E===void 0?void 0:E.bitmap)===null||j===void 0?void 0:j.length)!==null&&re!==void 0?re:0,padding:(be=($=Fe?.bits)===null||$===void 0?void 0:$.padding)!==null&&be!==void 0?be:0,mightContain:St=>{var Sn;return(Sn=m?.mightContain(St))!==null&&Sn!==void 0&&Sn}}),Ie}(s,e.fe,this.Be.nt(),a,l))}}}}Xe(e){let i=e.fe.unchangedNames;if(!i||!i.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=i,s,a;try{s=vo(n).toUint8Array()}catch(l){if(l instanceof Cp)return cn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Gw(s,r,o)}catch(l){return cn(l instanceof Is?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,i,n){return i.fe.count===n-this.rt(e,i.targetId)?0:2}rt(e,i){let n=this.Be.getRemoteKeysForTarget(i),r=0;return n.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(i,o,null),r++)}),r}it(e){let i=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Tp(a.target)){let l=new O(a.target.path);this.qe.get(l)!==null||this.st(s,l)||this.We(s,l,Nt.newNoDocument(l,e))}o.De&&(i.set(s,o.ve()),o.Fe())}});let n=ve();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let r=new Nu(e,i,this.Ke,this.qe,n);return this.qe=Ti(),this.Qe=nM(),this.Ke=new ct(_e),r}Ue(e,i){if(!this.je(e))return;let n=this.st(e,i.key)?2:0;this.ze(e).Me(i.key,n),this.qe=this.qe.insert(i.key,i),this.Qe=this.Qe.insert(i.key,this.ot(i.key).add(e))}We(e,i,n){if(!this.je(e))return;let r=this.ze(e);this.st(e,i)?r.Me(i,1):r.xe(i),this.Qe=this.Qe.insert(i,this.ot(i).delete(e)),n&&(this.qe=this.qe.insert(i,n))}removeTarget(e){this.ke.delete(e)}Ze(e){let i=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let i=this.ke.get(e);return i||(i=new Rp,this.ke.set(e,i)),i}ot(e){let i=this.Qe.get(e);return i||(i=new it(_e),this.Qe=this.Qe.insert(e,i)),i}je(e){let i=this.Ye(e)!==null;return i||T("WatchChangeAggregator","Detected inactive target",e),i}Ye(e){let i=this.ke.get(e);return i&&i.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Rp),this.Be.getRemoteKeysForTarget(e).forEach(i=>{this.We(e,i,null)})}st(e,i){return this.Be.getRemoteKeysForTarget(e).has(i)}};function nM(){return new ct(O.comparator)}function rM(){return new ct(O.comparator)}var mq={asc:"ASCENDING",desc:"DESCENDING"},fq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pq={and:"AND",or:"OR"},Yw=class{constructor(e,i){this.databaseId=e,this.useProto3Json=i}};function Qw(t,e){return t.useProto3Json||Yu(e)?e:{value:e}}function El(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gq(t,e){return El(t,e.toTimestamp())}function Tt(t){return ne(!!t),se.fromTimestamp(function(i){let n=bo(i);return new ft(n.seconds,n.nanos)}(t))}function CC(t,e){return Xw(t,e).canonicalString()}function Xw(t,e){let i=function(r){return new Pe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?i:i.child(e)}function wP(t){let e=Pe.fromString(t);return ne(RP(e)),e}function Lu(t,e){return CC(t.databaseId,e.path)}function er(t,e){let i=wP(e);if(i.get(1)!==t.databaseId.projectId)throw new I(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new I(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new O(EP(i))}function xP(t,e){return CC(t.databaseId,e)}function CP(t){let e=wP(t);return e.length===4?Pe.emptyPath():EP(e)}function Zw(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EP(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function oM(t,e,i){return{name:Lu(t,e),fields:i.value.mapValue.fields}}function IP(t,e,i){let n=er(t,e.name),r=Tt(e.updateTime),o=e.createTime?Tt(e.createTime):se.min(),s=new di({mapValue:{fields:e.fields}}),a=Nt.newFoundDocument(n,r,o,s);return i&&a.setHasCommittedMutations(),i?a.setHasCommittedMutations():a}function _q(t,e){return"found"in e?function(n,r){ne(!!r.found),r.found.name,r.found.updateTime;let o=er(n,r.found.name),s=Tt(r.found.updateTime),a=r.found.createTime?Tt(r.found.createTime):se.min(),l=new di({mapValue:{fields:r.found.fields}});return Nt.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(n,r){ne(!!r.missing),ne(!!r.readTime);let o=er(n,r.missing),s=Tt(r.readTime);return Nt.newNoDocument(o,s)}(t,e):K()}function bq(t,e){let i;if("targetChange"in e){e.targetChange;let n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(ne(d===void 0||typeof d=="string"),Kt.fromBase64String(d||"")):(ne(d===void 0||d instanceof Uint8Array),Kt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let d=c.code===void 0?x.UNKNOWN:bP(c.code);return new I(d,c.message||"")}(s);i=new kp(n,r,o,a||null)}else if("documentChange"in e){e.documentChange;let n=e.documentChange;n.document,n.document.name,n.document.updateTime;let r=er(t,n.document.name),o=Tt(n.document.updateTime),s=n.document.createTime?Tt(n.document.createTime):se.min(),a=new di({mapValue:{fields:n.document.fields}}),l=Nt.newFoundDocument(r,o,s,a),c=n.targetIds||[],d=n.removedTargetIds||[];i=new _l(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;let n=e.documentDelete;n.document;let r=er(t,n.document),o=n.readTime?Tt(n.readTime):se.min(),s=Nt.newNoDocument(r,o),a=n.removedTargetIds||[];i=new _l([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let n=e.documentRemove;n.document;let r=er(t,n.document),o=n.removedTargetIds||[];i=new _l([],o,r,null)}else{if(!("filter"in e))return K();{e.filter;let n=e.filter;n.targetId;let{count:r=0,unchangedNames:o}=n,s=new Ww(r,o),a=n.targetId;i=new Ap(a,s)}}return i}function ju(t,e){let i;if(e instanceof Eo)i={update:oM(t,e.key,e.value)};else if(e instanceof Io)i={delete:Lu(t,e.key)};else if(e instanceof En)i={update:oM(t,e.key,e.data),updateMask:Eq(e.fieldMask)};else{if(!(e instanceof Pu))return K();i={verify:Lu(t,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(n=>function(o,s){let a=s.transform;if(a instanceof xo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Er)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ir)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Co)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw K()}(0,n))),e.precondition.isNone||(i.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:gq(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(t,e.precondition)),i}function Jw(t,e){let i=e.currentDocument?function(o){return o.updateTime!==void 0?vt.updateTime(Tt(o.updateTime)):o.exists!==void 0?vt.exists(o.exists):vt.none()}(e.currentDocument):vt.none(),n=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),l=new xo;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];l=new Er(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];l=new Ir(d)}else"increment"in a?l=new Co(s,a.increment):K();let c=It.fromServerFormat(a.fieldPath);return new Rs(c,l)}(t,r)):[];if(e.update){e.update.name;let r=er(t,e.update.name),o=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(l){let c=l.fieldPaths||[];return new zi(c.map(d=>It.fromServerFormat(d)))}(e.updateMask);return new En(r,o,s,i,n)}return new Eo(r,o,i,n)}if(e.delete){let r=er(t,e.delete);return new Io(r,i)}if(e.verify){let r=er(t,e.verify);return new Pu(r,i)}return K()}function vq(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(i=>function(r,o){let s=r.updateTime?Tt(r.updateTime):Tt(o);return s.isEqual(se.min())&&(s=Tt(o)),new qw(s,r.transformResults||[])}(i,e))):[]}function TP(t,e){return{documents:[xP(t,e.path)]}}function SP(t,e){let i={structuredQuery:{}},n=e.path,r;e.collectionGroup!==null?(r=n,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),i.structuredQuery.from=[{collectionId:n.lastSegment()}]),i.parent=xP(t,r);let o=function(c){if(c.length!==0)return kP(Ge.create(c,"and"))}(e.filters);o&&(i.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(d=>function(h){return{field:ul(h.field),direction:wq(h.dir)}}(d))}(e.orderBy);s&&(i.structuredQuery.orderBy=s);let a=Qw(t,e.limit);return a!==null&&(i.structuredQuery.limit=a),e.startAt&&(i.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:i,parent:r}}function DP(t){let e=CP(t.parent),i=t.structuredQuery,n=i.from?i.from.length:0,r=null;if(n>0){ne(n===1);let d=i.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let o=[];i.where&&(o=function(u){let h=AP(u);return h instanceof Ge&&yC(h)?h.getFilters():[h]}(i.where));let s=[];i.orderBy&&(s=function(u){return u.map(h=>function(b){return new As(hl(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(h))}(i.orderBy));let a=null;i.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Yu(h)?null:h}(i.limit));let l=null;i.startAt&&(l=function(u){let h=!!u.before,m=u.values||[];return new nr(m,h)}(i.startAt));let c=null;return i.endAt&&(c=function(u){let h=!u.before,m=u.values||[];return new nr(m,h)}(i.endAt)),tP(e,r,s,o,a,"F",l,c)}function yq(t,e){let i=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function AP(t){return t.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":let n=hl(i.unaryFilter.field);return Re.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=hl(i.unaryFilter.field);return Re.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=hl(i.unaryFilter.field);return Re.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=hl(i.unaryFilter.field);return Re.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(i){return Re.create(hl(i.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(i.fieldFilter.op),i.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(i){return Ge.create(i.compositeFilter.filters.map(n=>AP(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K()}}(i.compositeFilter.op))}(t):K()}function wq(t){return mq[t]}function xq(t){return fq[t]}function Cq(t){return pq[t]}function ul(t){return{fieldPath:t.canonicalString()}}function hl(t){return It.fromServerFormat(t.fieldPath)}function kP(t){return t instanceof Re?function(i){if(i.op==="=="){if(UR(i.value))return{unaryFilter:{field:ul(i.field),op:"IS_NAN"}};if(zR(i.value))return{unaryFilter:{field:ul(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(UR(i.value))return{unaryFilter:{field:ul(i.field),op:"IS_NOT_NAN"}};if(zR(i.value))return{unaryFilter:{field:ul(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(i.field),op:xq(i.op),value:i.value}}}(t):t instanceof Ge?function(i){let n=i.getFilters().map(r=>kP(r));return n.length===1?n[0]:{compositeFilter:{op:Cq(i.op),filters:n}}}(t):K()}function Eq(t){let e=[];return t.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function RP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Il=class t{constructor(e,i,n,r,o=se.min(),s=se.min(),a=Kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=i,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Mp=class{constructor(e){this.ct=e}};function Iq(t,e){let i;if(e.document)i=IP(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let n=O.fromSegments(e.noDocument.path),r=Ps(e.noDocument.readTime);i=Nt.newNoDocument(n,r),e.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let n=O.fromSegments(e.unknownDocument.path),r=Ps(e.unknownDocument.version);i=Nt.newUnknownDocument(n,r)}}return e.readTime&&i.setReadTime(function(r){let o=new ft(r[0],r[1]);return se.fromTimestamp(o)}(e.readTime)),i}function sM(t,e){let i=e.key,n={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Pp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(o,s){return{name:Lu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:El(o,s.version.toTimestamp()),createTime:El(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:i.path.toArray(),readTime:Ms(e.version)};else{if(!e.isUnknownDocument())return K();n.unknownDocument={path:i.path.toArray(),version:Ms(e.version)}}return n}function Pp(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ms(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ps(t){let e=new ft(t.seconds,t.nanoseconds);return se.fromTimestamp(e)}function xs(t,e){let i=(e.baseMutations||[]).map(o=>Jw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let n=e.mutations.map(o=>Jw(t.ct,o)),r=ft.fromMillis(e.localWriteTimeMs);return new Ou(e.batchId,r,i,n)}function wu(t){let e=Ps(t.readTime),i=t.lastLimboFreeSnapshotVersion!==void 0?Ps(t.lastLimboFreeSnapshotVersion):se.min(),n;return n=function(o){return o.documents!==void 0}(t.query)?function(o){return ne(o.documents.length===1),bi(Nl(CP(o.documents[0])))}(t.query):function(o){return bi(DP(o))}(t.query),new Il(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,i,Kt.fromBase64String(t.resumeToken))}function MP(t,e){let i=Ms(e.snapshotVersion),n=Ms(e.lastLimboFreeSnapshotVersion),r;r=Tp(e.target)?TP(t.ct,e.target):SP(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ks(e.target),readTime:i,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function EC(t){let e=DP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dp(e,e.limit,"L"):e}function fw(t,e){return new Fu(e.largestBatchId,Jw(t.ct,e.overlayMutation))}function aM(t,e){let i=e.path.lastSegment();return[t,_i(e.path.popLast()),i]}function lM(t,e,i,n){return{indexId:t,uid:e,sequenceNumber:i,readTime:Ms(n.readTime),documentKey:_i(n.documentKey.path),largestBatchId:n.largestBatchId}}var ex=class{getBundleMetadata(e,i){return cM(e).get(i).next(n=>{if(n)return function(o){return{id:o.bundleId,createTime:Ps(o.createTime),version:o.version}}(n)})}saveBundleMetadata(e,i){return cM(e).put(function(r){return{bundleId:r.id,createTime:Ms(Tt(r.createTime)),version:r.version}}(i))}getNamedQuery(e,i){return dM(e).get(i).next(n=>{if(n)return function(o){return{name:o.name,query:EC(o.bundledQuery),readTime:Ps(o.readTime)}}(n)})}saveNamedQuery(e,i){return dM(e).put(function(r){return{name:r.name,readTime:Ms(Tt(r.readTime)),bundledQuery:r.bundledQuery}}(i))}};function cM(t){return Yt(t,"bundles")}function dM(t){return Yt(t,"namedQueries")}var Op=class t{constructor(e,i){this.serializer=e,this.userId=i}static lt(e,i){let n=i.uid||"";return new t(e,n)}getOverlay(e,i){return gu(e).get(aM(this.userId,i)).next(n=>n?fw(this.serializer,n):null)}getOverlays(e,i){let n=Zn();return w.forEach(i,r=>this.getOverlay(e,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(e,i,n){let r=[];return n.forEach((o,s)=>{let a=new Fu(i,s);r.push(this.ht(e,a))}),w.waitFor(r)}removeOverlaysForBatchId(e,i,n){let r=new Set;i.forEach(s=>r.add(_i(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);o.push(gu(e).H("collectionPathOverlayIndex",a))}),w.waitFor(o)}getOverlaysForCollection(e,i,n){let r=Zn(),o=_i(i),s=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return gu(e).W("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let c=fw(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,i,n,r){let o=Zn(),s,a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return gu(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{let u=fw(this.serializer,c);o.size()<r||u.largestBatchId===s?(o.set(u.getKey(),u),s=u.largestBatchId):d.done()}).next(()=>o)}ht(e,i){return gu(e).put(function(r,o,s){let[a,l,c]=aM(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ju(r.ct,s.mutation)}}(this.serializer,this.userId,i))}};function gu(t){return Yt(t,"documentOverlays")}var wr=class{constructor(){}Pt(e,i){this.It(e,i),i.Tt()}It(e,i){if("nullValue"in e)this.Et(i,5);else if("booleanValue"in e)this.Et(i,10),i.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(i,15),i.dt(bt(e.integerValue));else if("doubleValue"in e){let n=bt(e.doubleValue);isNaN(n)?this.Et(i,13):(this.Et(i,15),Du(n)?i.dt(0):i.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(i,20),typeof n=="string"?i.At(n):(i.At(`${n.seconds||""}`),i.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,i),this.Vt(i);else if("bytesValue"in e)this.Et(i,30),i.ft(vo(e.bytesValue)),this.Vt(i);else if("referenceValue"in e)this.gt(e.referenceValue,i);else if("geoPointValue"in e){let n=e.geoPointValue;this.Et(i,45),i.dt(n.latitude||0),i.dt(n.longitude||0)}else"mapValue"in e?KM(e)?this.Et(i,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,i),this.Vt(i)):"arrayValue"in e?(this.wt(e.arrayValue,i),this.Vt(i)):K()}Rt(e,i){this.Et(i,25),this.St(e,i)}St(e,i){i.At(e)}yt(e,i){let n=e.fields||{};this.Et(i,55);for(let r of Object.keys(n))this.Rt(r,i),this.It(n[r],i)}wt(e,i){let n=e.values||[];this.Et(i,50);for(let r of n)this.It(r,i)}gt(e,i){this.Et(i,37),O.fromName(e).path.forEach(n=>{this.Et(i,60),this.St(n,i)})}Et(e,i){e.dt(i)}Vt(e){e.dt(2)}};wr.bt=new wr;function Tq(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function uM(t){let e=64-function(n){let r=0;for(let o=0;o<8;++o){let s=Tq(255&n[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var tx=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let i=e[Symbol.iterator](),n=i.next();for(;!n.done;)this.Ct(n.value),n=i.next();this.vt()}Ft(e){let i=e[Symbol.iterator](),n=i.next();for(;!n.done;)this.Mt(n.value),n=i.next();this.xt()}Ot(e){for(let i of e){let n=i.charCodeAt(0);if(n<128)this.Ct(n);else if(n<2048)this.Ct(960|n>>>6),this.Ct(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Ct(480|n>>>12),this.Ct(128|63&n>>>6),this.Ct(128|63&n);else{let r=i.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let i of e){let n=i.charCodeAt(0);if(n<128)this.Mt(n);else if(n<2048)this.Mt(960|n>>>6),this.Mt(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Mt(480|n>>>12),this.Mt(128|63&n>>>6),this.Mt(128|63&n);else{let r=i.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let i=this.Bt(e),n=uM(i);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=i.length-n;r<i.length;++r)this.buffer[this.position++]=255&i[r]}qt(e){let i=this.Bt(e),n=uM(i);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=i.length-n;r<i.length;++r)this.buffer[this.position++]=~(255&i[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let i=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),n=(128&i[0])!=0;i[0]^=n?255:128;for(let r=1;r<i.length;++r)i[r]^=n?255:0;return i}Ct(e){let i=255&e;i===0?(this.Kt(0),this.Kt(255)):i===255?(this.Kt(255),this.Kt(0)):this.Kt(i)}Mt(e){let i=255&e;i===0?(this.Ut(0),this.Ut(255)):i===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let i=e+this.position;if(i<=this.buffer.length)return;let n=2*this.buffer.length;n<i&&(n=i);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},ix=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},nx=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Cs=class{constructor(){this.Gt=new tx,this.zt=new ix(this.Gt),this.jt=new nx(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Es=class t{constructor(e,i,n,r){this.indexId=e,this.documentKey=i,this.arrayValue=n,this.directionalValue=r}Jt(){let e=this.directionalValue.length,i=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(i);return n.set(this.directionalValue,0),i!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new t(this.indexId,this.documentKey,this.arrayValue,n)}};function uo(t,e){let i=t.indexId-e.indexId;return i!==0?i:(i=hM(t.arrayValue,e.arrayValue),i!==0?i:(i=hM(t.directionalValue,e.directionalValue),i!==0?i:O.comparator(t.documentKey,e.documentKey)))}function hM(t,e){for(let i=0;i<t.length&&i<e.length;++i){let n=t[i]-e[i];if(n!==0)return n}return t.length-e.length}var Fp=class{constructor(e){this.Yt=new it((i,n)=>It.comparator(i.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let i of e.filters){let n=i;n.isInequality()?this.Yt=this.Yt.add(n):this.Xt.push(n)}}get en(){return this.Yt.size>1}tn(e){if(ne(e.collectionGroup===this.collectionId),this.en)return!1;let i=Iw(e);if(i!==void 0&&!this.nn(i))return!1;let n=ys(e),r=new Set,o=0,s=0;for(;o<n.length&&this.nn(n[o]);++o)r=r.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=n[o];if(!this.rn(a,l)||!this.sn(this.Zt[s++],l))return!1}++o}for(;o<n.length;++o){let a=n[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new it(It.comparator),i=[];for(let n of this.Xt)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")i.push(new pl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),i.push(new pl(n.field,0))}for(let n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),i.push(new pl(n.field,n.dir==="asc"?0:1)));return new vl(vl.UNKNOWN_ID,this.collectionId,i,Su.empty())}nn(e){for(let i of this.Xt)if(this.rn(i,e))return!0;return!1}rn(e,i){if(e===void 0||!e.field.isEqual(i.fieldPath))return!1;let n=e.op==="array-contains"||e.op==="array-contains-any";return i.kind===2===n}sn(e,i){return!!e.field.isEqual(i.fieldPath)&&(i.kind===0&&e.dir==="asc"||i.kind===1&&e.dir==="desc")}};function PP(t){var e,i;if(ne(t instanceof Re||t instanceof Ge),t instanceof Re){if(t instanceof Ip){let r=((i=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||i===void 0?void 0:i.map(o=>Re.create(t.field,"==",o)))||[];return Ge.create(r,"or")}return t}let n=t.filters.map(r=>PP(r));return Ge.create(n,t.op)}function Sq(t){if(t.getFilters().length===0)return[];let e=sx(PP(t));return ne(OP(e)),rx(e)||ox(e)?[e]:e.getFilters()}function rx(t){return t instanceof Re}function ox(t){return t instanceof Ge&&yC(t)}function OP(t){return rx(t)||ox(t)||function(i){if(i instanceof Ge&&Pw(i)){for(let n of i.getFilters())if(!rx(n)&&!ox(n))return!1;return!0}return!1}(t)}function sx(t){if(ne(t instanceof Re||t instanceof Ge),t instanceof Re)return t;if(t.filters.length===1)return sx(t.filters[0]);let e=t.filters.map(n=>sx(n)),i=Ge.create(e,t.op);return i=Np(i),OP(i)?i:(ne(i instanceof Ge),ne(wl(i)),ne(i.filters.length>1),i.filters.reduce((n,r)=>IC(n,r)))}function IC(t,e){let i;return ne(t instanceof Re||t instanceof Ge),ne(e instanceof Re||e instanceof Ge),i=t instanceof Re?e instanceof Re?function(r,o){return Ge.create([r,o],"and")}(t,e):mM(t,e):e instanceof Re?mM(e,t):function(r,o){if(ne(r.filters.length>0&&o.filters.length>0),wl(r)&&wl(o))return ZM(r,o.getFilters());let s=Pw(r)?r:o,a=Pw(r)?o:r,l=s.filters.map(c=>IC(c,a));return Ge.create(l,"or")}(t,e),Np(i)}function mM(t,e){if(wl(e))return ZM(e,t.getFilters());{let i=e.filters.map(n=>IC(t,n));return Ge.create(i,"or")}}function Np(t){if(ne(t instanceof Re||t instanceof Ge),t instanceof Re)return t;let e=t.getFilters();if(e.length===1)return Np(e[0]);if(QM(t))return t;let i=e.map(r=>Np(r)),n=[];return i.forEach(r=>{r instanceof Re?n.push(r):r instanceof Ge&&(r.op===t.op?n.push(...r.filters):n.push(r))}),n.length===1?n[0]:Ge.create(n,t.op)}var ax=class{constructor(){this._n=new Bu}addToCollectionParentIndex(e,i){return this._n.add(i),w.resolve()}getCollectionParents(e,i){return w.resolve(this._n.getEntries(i))}addFieldIndex(e,i){return w.resolve()}deleteFieldIndex(e,i){return w.resolve()}deleteAllFieldIndexes(e){return w.resolve()}createTargetIndexes(e,i){return w.resolve()}getDocumentsMatchingTarget(e,i){return w.resolve(null)}getIndexType(e,i){return w.resolve(0)}getFieldIndexes(e,i){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,i){return w.resolve(dn.min())}getMinOffsetFromCollectionGroup(e,i){return w.resolve(dn.min())}updateCollectionGroup(e,i,n){return w.resolve()}updateIndexEntries(e,i){return w.resolve()}},Bu=class{constructor(){this.index={}}add(e){let i=e.lastSegment(),n=e.popLast(),r=this.index[i]||new it(Pe.comparator),o=!r.has(n);return this.index[i]=r.add(n),o}has(e){let i=e.lastSegment(),n=e.popLast(),r=this.index[i];return r&&r.has(n)}getEntries(e){return(this.index[e]||new it(Pe.comparator)).toArray()}};var ap=new Uint8Array(0),lx=class{constructor(e,i){this.databaseId=i,this.an=new Bu,this.un=new rr(n=>ks(n),(n,r)=>Qu(n,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,i){if(!this.an.has(i)){let n=i.lastSegment(),r=i.popLast();e.addOnCommittedListener(()=>{this.an.add(i)});let o={collectionId:n,parent:_i(r)};return fM(e).put(o)}return w.resolve()}getCollectionParents(e,i){let n=[],r=IDBKeyRange.bound([i,""],[VM(i),""],!1,!0);return fM(e).W(r).next(o=>{for(let s of o){if(s.collectionId!==i)break;n.push(Xn(s.parent))}return n})}addFieldIndex(e,i){let n=_u(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(i);delete r.indexId;let o=n.add(r);if(i.indexState){let s=al(e);return o.next(a=>{s.put(lM(a,this.uid,i.indexState.sequenceNumber,i.indexState.offset))})}return o.next()}deleteFieldIndex(e,i){let n=_u(e),r=al(e),o=sl(e);return n.delete(i.indexId).next(()=>r.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let i=_u(e),n=sl(e),r=al(e);return i.H().next(()=>n.H()).next(()=>r.H())}createTargetIndexes(e,i){return w.forEach(this.cn(i),n=>this.getIndexType(e,n).next(r=>{if(r===0||r===1){let o=new Fp(n).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,i){let n=sl(e),r=!0,o=new Map;return w.forEach(this.cn(i),s=>this.ln(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ve(),a=[];return w.forEach(o,(l,c)=>{T("IndexedDbIndexManager",`Using index ${function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(be=>`${be.fieldPath}:${be.kind}`).join(",")}`}(l)} to execute ${ks(i)}`);let d=function($,be){let Ie=Iw(be);if(Ie===void 0)return null;for(let Fe of Sp($,Ie.fieldPath))switch(Fe.op){case"array-contains-any":return Fe.value.arrayValue.values||[];case"array-contains":return[Fe.value]}return null}(c,l),u=function($,be){let Ie=new Map;for(let Fe of ys(be))for(let St of Sp($,Fe.fieldPath))switch(St.op){case"==":case"in":Ie.set(Fe.fieldPath.canonicalString(),St.value);break;case"not-in":case"!=":return Ie.set(Fe.fieldPath.canonicalString(),St.value),Array.from(Ie.values())}return null}(c,l),h=function($,be){let Ie=[],Fe=!0;for(let St of ys(be)){let Sn=St.kind===0?GR($,St.fieldPath,$.startAt):KR($,St.fieldPath,$.startAt);Ie.push(Sn.value),Fe&&(Fe=Sn.inclusive)}return new nr(Ie,Fe)}(c,l),m=function($,be){let Ie=[],Fe=!0;for(let St of ys(be)){let Sn=St.kind===0?KR($,St.fieldPath,$.endAt):GR($,St.fieldPath,$.endAt);Ie.push(Sn.value),Fe&&(Fe=Sn.inclusive)}return new nr(Ie,Fe)}(c,l),b=this.hn(l,c,h),y=this.hn(l,c,m),E=this.Pn(l,c,u),j=this.In(l.indexId,d,b,h.inclusive,y,m.inclusive,E);return w.forEach(j,re=>n.j(re,i.limit).next($=>{$.forEach(be=>{let Ie=O.fromSegments(be.documentKey);s.has(Ie)||(s=s.add(Ie),a.push(Ie))})}))}).next(()=>a)}return w.resolve(null)})}cn(e){let i=this.un.get(e);return i||(e.filters.length===0?i=[e]:i=Sq(Ge.create(e.filters,"and")).map(n=>Uw(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,i),i)}In(e,i,n,r,o,s,a){let l=(i!=null?i.length:1)*Math.max(n.length,o.length),c=l/(i!=null?i.length:1),d=[];for(let u=0;u<l;++u){let h=i?this.Tn(i[u/c]):ap,m=this.En(e,h,n[u%c],r),b=this.dn(e,h,o[u%c],s),y=a.map(E=>this.En(e,h,E,!0));d.push(...this.createRange(m,b,y))}return d}En(e,i,n,r){let o=new Es(e,O.empty(),i,n);return r?o:o.Jt()}dn(e,i,n,r){let o=new Es(e,O.empty(),i,n);return r?o.Jt():o}ln(e,i){let n=new Fp(i),r=i.collectionGroup!=null?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)n.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,i){let n=2,r=this.cn(i);return w.forEach(r,o=>this.ln(e,o).next(s=>{s?n!==0&&s.fields.length<function(l){let c=new it(It.comparator),d=!1;for(let u of l.filters)for(let h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:c=c.add(h.field));for(let u of l.orderBy)u.field.isKeyField()||(c=c.add(u.field));return c.size+(d?1:0)}(o)&&(n=1):n=0})).next(()=>function(s){return s.limit!==null}(i)&&r.length>1&&n===2?1:n)}An(e,i){let n=new Cs;for(let r of ys(e)){let o=i.data.field(r.fieldPath);if(o==null)return null;let s=n.Ht(r.kind);wr.bt.Pt(o,s)}return n.Wt()}Tn(e){let i=new Cs;return wr.bt.Pt(e,i.Ht(0)),i.Wt()}Rn(e,i){let n=new Cs;return wr.bt.Pt(Ds(this.databaseId,i),n.Ht(function(o){let s=ys(o);return s.length===0?0:s[s.length-1].kind}(e))),n.Wt()}Pn(e,i,n){if(n===null)return[];let r=[];r.push(new Cs);let o=0;for(let s of ys(e)){let a=n[o++];for(let l of r)if(this.Vn(i,s.fieldPath)&&Mu(a))r=this.mn(r,s,a);else{let c=l.Ht(s.kind);wr.bt.Pt(a,c)}}return this.fn(r)}hn(e,i,n){return this.Pn(e,i,n.position)}fn(e){let i=[];for(let n=0;n<e.length;++n)i[n]=e[n].Wt();return i}mn(e,i,n){let r=[...e],o=[];for(let s of n.arrayValue.values||[])for(let a of r){let l=new Cs;l.seed(a.Wt()),wr.bt.Pt(s,l.Ht(i.kind)),o.push(l)}return o}Vn(e,i){return!!e.filters.find(n=>n instanceof Re&&n.field.isEqual(i)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,i){let n=_u(e),r=al(e);return(i?n.W("collectionGroupIndex",IDBKeyRange.bound(i,i)):n.W()).next(o=>{let s=[];return w.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(d,u){let h=u?new Su(u.sequenceNumber,new dn(Ps(u.readTime),new O(Xn(u.documentKey)),u.largestBatchId)):Su.empty(),m=d.fields.map(([b,y])=>new pl(It.fromServerFormat(b),y));return new vl(d.indexId,d.collectionGroup,m,h)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(i=>i.length===0?null:(i.sort((n,r)=>{let o=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:_e(n.collectionGroup,r.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(e,i,n){let r=_u(e),o=al(e);return this.gn(e).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(a=>w.forEach(a,l=>o.put(lM(l.indexId,this.uid,s,n)))))}updateIndexEntries(e,i){let n=new Map;return w.forEach(i,(r,o)=>{let s=n.get(r.collectionGroup);return(s?w.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(n.set(r.collectionGroup,a),w.forEach(a,l=>this.pn(e,r,l).next(c=>{let d=this.yn(o,l);return c.isEqual(d)?w.resolve():this.wn(e,o,l,c,d)}))))})}Sn(e,i,n,r){return sl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,i.key),documentKey:i.key.path.toArray()})}bn(e,i,n,r){return sl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,i.key),i.key.path.toArray()])}pn(e,i,n){let r=sl(e),o=new it(uo);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,i)])},(s,a)=>{o=o.add(new Es(n.indexId,i,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,i){let n=new it(uo),r=this.An(i,e);if(r==null)return n;let o=Iw(i);if(o!=null){let s=e.data.field(o.fieldPath);if(Mu(s))for(let a of s.arrayValue.values||[])n=n.add(new Es(i.indexId,e.key,this.Tn(a),r))}else n=n.add(new Es(i.indexId,e.key,ap,r));return n}wn(e,i,n,r,o){T("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);let s=[];return function(l,c,d,u,h){let m=l.getIterator(),b=c.getIterator(),y=ol(m),E=ol(b);for(;y||E;){let j=!1,re=!1;if(y&&E){let $=d(y,E);$<0?re=!0:$>0&&(j=!0)}else y!=null?re=!0:j=!0;j?(u(E),E=ol(b)):re?(h(y),y=ol(m)):(y=ol(m),E=ol(b))}}(r,o,uo,a=>{s.push(this.Sn(e,i,n,a))},a=>{s.push(this.bn(e,i,n,a))}),w.waitFor(s)}gn(e){let i=1;return al(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,r,o)=>{o.done(),i=r.sequenceNumber+1}).next(()=>i)}createRange(e,i,n){n=n.sort((s,a)=>uo(s,a)).filter((s,a,l)=>!a||uo(s,l[a-1])!==0);let r=[];r.push(e);for(let s of n){let a=uo(s,e),l=uo(s,i);if(a===0)r[0]=e.Jt();else if(a>0&&l<0)r.push(s),r.push(s.Jt());else if(l>0)break}r.push(i);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,ap,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,ap,[]];o.push(IDBKeyRange.bound(a,l))}return o}Dn(e,i){return uo(e,i)>0}getMinOffsetFromCollectionGroup(e,i){return this.getFieldIndexes(e,i).next(pM)}getMinOffset(e,i){return w.mapArray(this.cn(i),n=>this.ln(e,n).next(r=>r||K())).next(pM)}};function fM(t){return Yt(t,"collectionParents")}function sl(t){return Yt(t,"indexEntries")}function _u(t){return Yt(t,"indexConfiguration")}function al(t){return Yt(t,"indexState")}function pM(t){ne(t.length!==0);let e=t[0].indexState.offset,i=e.largestBatchId;for(let n=1;n<t.length;n++){let r=t[n].indexState.offset;_C(r,e)<0&&(e=r),i<r.largestBatchId&&(i=r.largestBatchId)}return new dn(e.readTime,e.documentKey,i)}var gM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ln=class t{constructor(e,i,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function FP(t,e,i){let n=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(i.batchId),a=0,l=n.Y({range:s},(d,u,h)=>(a++,h.delete()));o.push(l.next(()=>{ne(a===1)}));let c=[];for(let d of i.mutations){let u=UM(e,d.key.path,i.batchId);o.push(r.delete(u)),c.push(d.key)}return w.waitFor(o).next(()=>c)}function Vp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K();e=t.noDocument}return JSON.stringify(e).length}ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var Lp=class t{constructor(e,i,n,r){this.userId=e,this.serializer=i,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,i,n,r){ne(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,i,n,r)}checkEmpty(e){let i=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).Y({index:"userMutationsIndex",range:n},(r,o,s)=>{i=!1,s.done()}).next(()=>i)}addMutationBatch(e,i,n,r){let o=ml(e),s=ho(e);return s.add({}).next(a=>{ne(typeof a=="number");let l=new Ou(a,i,n,r),c=function(m,b,y){let E=y.baseMutations.map(re=>ju(m.ct,re)),j=y.mutations.map(re=>ju(m.ct,re));return{userId:b,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:E,mutations:j}}(this.serializer,this.userId,l),d=[],u=new it((h,m)=>_e(h.canonicalString(),m.canonicalString()));for(let h of r){let m=UM(this.userId,h.key.path,a);u=u.add(h.key.path.popLast()),d.push(s.put(c)),d.push(o.put(m,OH))}return u.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),w.waitFor(d).next(()=>l)})}lookupMutationBatch(e,i){return ho(e).get(i).next(n=>n?(ne(n.userId===this.userId),xs(this.serializer,n)):null)}vn(e,i){return this.Cn[i]?w.resolve(this.Cn[i]):this.lookupMutationBatch(e,i).next(n=>{if(n){let r=n.keys();return this.Cn[i]=r,r}return null})}getNextMutationBatchAfterBatchId(e,i){let n=i+1,r=IDBKeyRange.lowerBound([this.userId,n]),o=null;return ho(e).Y({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=n),o=xs(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ho(e).Y({index:"userMutationsIndex",range:i,reverse:!0},(r,o,s)=>{n=o.batchId,s.done()}).next(()=>n)}getAllMutationBatches(e){let i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).W("userMutationsIndex",i).next(n=>n.map(r=>xs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,i){let n=up(this.userId,i.path),r=IDBKeyRange.lowerBound(n),o=[];return ml(e).Y({range:r},(s,a,l)=>{let[c,d,u]=s,h=Xn(d);if(c===this.userId&&i.path.isEqual(h))return ho(e).get(u).next(m=>{if(!m)throw K();ne(m.userId===this.userId),o.push(xs(this.serializer,m))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,i){let n=new it(_e),r=[];return i.forEach(o=>{let s=up(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=ml(e).Y({range:a},(c,d,u)=>{let[h,m,b]=c,y=Xn(m);h===this.userId&&o.path.isEqual(y)?n=n.add(b):u.done()});r.push(l)}),w.waitFor(r).next(()=>this.Fn(e,n))}getAllMutationBatchesAffectingQuery(e,i){let n=i.path,r=n.length+1,o=up(this.userId,n),s=IDBKeyRange.lowerBound(o),a=new it(_e);return ml(e).Y({range:s},(l,c,d)=>{let[u,h,m]=l,b=Xn(h);u===this.userId&&n.isPrefixOf(b)?b.length===r&&(a=a.add(m)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,i){let n=[],r=[];return i.forEach(o=>{r.push(ho(e).get(o).next(s=>{if(s===null)throw K();ne(s.userId===this.userId),n.push(xs(this.serializer,s))}))}),w.waitFor(r).next(()=>n)}removeMutationBatch(e,i){return FP(e.ae,this.userId,i).next(n=>(e.addOnCommittedListener(()=>{this.Mn(i.batchId)}),w.forEach(n,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return w.resolve();let n=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return ml(e).Y({range:n},(o,s,a)=>{if(o[0]===this.userId){let l=Xn(o[1]);r.push(l)}else a.done()}).next(()=>{ne(r.length===0)})})}containsKey(e,i){return NP(e,this.userId,i)}xn(e){return VP(e).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function NP(t,e,i){let n=up(e,i.path),r=n[1],o=IDBKeyRange.lowerBound(n),s=!1;return ml(t).Y({range:o,J:!0},(a,l,c)=>{let[d,u,h]=a;d===e&&u===r&&(s=!0),c.done()}).next(()=>s)}function ho(t){return Yt(t,"mutations")}function ml(t){return Yt(t,"documentMutations")}function VP(t){return Yt(t,"mutationQueues")}var Tl=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var cx=class{constructor(e,i){this.referenceDelegate=e,this.serializer=i}allocateTargetId(e){return this.Bn(e).next(i=>{let n=new Tl(i.highestTargetId);return i.highestTargetId=n.next(),this.kn(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(i=>se.fromTimestamp(new ft(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,n){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=i,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),i>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=i),this.kn(e,r)))}addTargetData(e,i){return this.qn(e,i).next(()=>this.Bn(e).next(n=>(n.targetCount+=1,this.Qn(i,n),this.kn(e,n))))}updateTargetData(e,i){return this.qn(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>ll(e).delete(i.targetId)).next(()=>this.Bn(e)).next(n=>(ne(n.targetCount>0),n.targetCount-=1,this.kn(e,n)))}removeTargets(e,i,n){let r=0,o=[];return ll(e).Y((s,a)=>{let l=wu(a);l.sequenceNumber<=i&&n.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(e,l)))}).next(()=>w.waitFor(o)).next(()=>r)}forEachTarget(e,i){return ll(e).Y((n,r)=>{let o=wu(r);i(o)})}Bn(e){return _M(e).get("targetGlobalKey").next(i=>(ne(i!==null),i))}kn(e,i){return _M(e).put("targetGlobalKey",i)}qn(e,i){return ll(e).put(MP(this.serializer,i))}Qn(e,i){let n=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,n=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next(i=>i.targetCount)}getTargetData(e,i){let n=ks(i),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),o=null;return ll(e).Y({range:r,index:"queryTargetsIndex"},(s,a,l)=>{let c=wu(a);Qu(i,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(e,i,n){let r=[],o=mo(e);return i.forEach(s=>{let a=_i(s.path);r.push(o.put({targetId:n,path:a})),r.push(this.referenceDelegate.addReference(e,n,s))}),w.waitFor(r)}removeMatchingKeys(e,i,n){let r=mo(e);return w.forEach(i,o=>{let s=_i(o.path);return w.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,o)])})}removeMatchingKeysForTargetId(e,i){let n=mo(e),r=IDBKeyRange.bound([i],[i+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,i){let n=IDBKeyRange.bound([i],[i+1],!1,!0),r=mo(e),o=ve();return r.Y({range:n,J:!0},(s,a,l)=>{let c=Xn(s[1]),d=new O(c);o=o.add(d)}).next(()=>o)}containsKey(e,i){let n=_i(i.path),r=IDBKeyRange.bound([n],[VM(n)],!1,!0),o=0;return mo(e).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],l,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,i){return ll(e).get(i).next(n=>n?wu(n):null)}};function ll(t){return Yt(t,"targets")}function _M(t){return Yt(t,"targetGlobal")}function mo(t){return Yt(t,"targetDocuments")}function bM([t,e],[i,n]){let r=_e(t,i);return r===0?_e(e,n):r}var dx=class{constructor(e){this.Kn=e,this.buffer=new it(bM),this.$n=0}Un(){return++this.$n}Wn(e){let i=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(i);else{let n=this.buffer.last();bM(i,n)<0&&(this.buffer=this.buffer.delete(n).add(i))}}get maxValue(){return this.buffer.last()[0]}},ux=class{constructor(e,i,n){this.garbageCollector=e,this.asyncQueue=i,this.localStore=n,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){T("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(i){Do(i)?T("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield So(i)}yield this.zn(3e5)}))}},hx=class{constructor(e,i){this.jn=e,this.params=i}calculateTargetCount(e,i){return this.jn.Hn(e).next(n=>Math.floor(i/100*n))}nthSequenceNumber(e,i){if(i===0)return w.resolve(Bi._e);let n=new dx(i);return this.jn.forEachTarget(e,r=>n.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>n.Wn(r))).next(()=>n.maxValue)}removeTargets(e,i,n){return this.jn.removeTargets(e,i,n)}removeOrphanedDocuments(e,i){return this.jn.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(T("LruGarbageCollector","Garbage collection skipped; disabled"),w.resolve(gM)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gM):this.Yn(e,i))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,i){let n,r,o,s,a,l,c,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),r=this.params.maximumSequenceNumbersToCollect):r=u,s=Date.now(),this.nthSequenceNumber(e,r))).next(u=>(n=u,a=Date.now(),this.removeTargets(e,n,i))).next(u=>(o=u,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(u=>(c=Date.now(),cl()<=Gi.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${u} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),w.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:u})))}};function Dq(t,e){return new hx(t,e)}var mx=class{constructor(e,i){this.db=e,this.garbageCollector=Dq(this,i)}Hn(e){let i=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(n=>i.next(r=>n+r))}Zn(e){let i=0;return this.Jn(e,n=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}Jn(e,i){return this.Xn(e,(n,r)=>i(r))}addReference(e,i,n){return lp(e,n)}removeReference(e,i,n){return lp(e,n)}removeTargets(e,i,n){return this.db.getTargetCache().removeTargets(e,i,n)}markPotentiallyOrphaned(e,i){return lp(e,i)}er(e,i){return function(r,o){let s=!1;return VP(r).Z(a=>NP(r,a,o).next(l=>(l&&(s=!0),w.resolve(!l)))).next(()=>s)}(e,i)}removeOrphanedDocuments(e,i){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(s,a)=>{if(a<=i){let l=this.er(e,s).next(c=>{if(!c)return o++,n.getEntry(e,s).next(()=>(n.removeEntry(s,se.min()),mo(e).delete(function(u){return[0,_i(u.path)]}(s))))});r.push(l)}}).next(()=>w.waitFor(r)).next(()=>n.apply(e)).next(()=>o)}removeTarget(e,i){let n=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,i){return lp(e,i)}Xn(e,i){let n=mo(e),r,o=Bi._e;return n.Y({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{s===0?(o!==Bi._e&&i(new O(Xn(r)),o),o=c,r=l):o=Bi._e}).next(()=>{o!==Bi._e&&i(new O(Xn(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function lp(t,e){return mo(t).put(function(n,r){return{targetId:0,path:_i(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var jp=class{constructor(){this.changes=new rr(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();let n=this.changes.get(i);return n!==void 0?w.resolve(n):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fx=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,i,n){return vs(e).put(n)}removeEntry(e,i,n){return vs(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pp(s),a[a.length-1]]}(i,n))}updateMetadata(e,i){return this.getMetadata(e).next(n=>(n.byteSize+=i,this.tr(e,n)))}getEntry(e,i){let n=Nt.newInvalidDocument(i);return vs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(bu(i))},(r,o)=>{n=this.nr(i,o)}).next(()=>n)}rr(e,i){let n={size:0,document:Nt.newInvalidDocument(i)};return vs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(bu(i))},(r,o)=>{n={document:this.nr(i,o),size:Vp(o)}}).next(()=>n)}getEntries(e,i){let n=Ti();return this.ir(e,i,(r,o)=>{let s=this.nr(r,o);n=n.insert(r,s)}).next(()=>n)}sr(e,i){let n=Ti(),r=new ct(O.comparator);return this.ir(e,i,(o,s)=>{let a=this.nr(o,s);n=n.insert(o,a),r=r.insert(o,Vp(s))}).next(()=>({documents:n,_r:r}))}ir(e,i,n){if(i.isEmpty())return w.resolve();let r=new it(wM);i.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(bu(r.first()),bu(r.last())),s=r.getIterator(),a=s.getNext();return vs(e).Y({index:"documentKeyIndex",range:o},(l,c,d)=>{let u=O.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&wM(a,u)<0;)n(a,null),a=s.getNext();a&&a.isEqual(u)&&(n(a,c),a=s.hasNext()?s.getNext():null),a?d.U(bu(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,i,n,r,o){let s=i.path,a=[s.popLast().toArray(),s.lastSegment(),Pp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vs(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let d=Ti();for(let u of c){let h=this.nr(O.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(Zu(i,h)||r.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,i,n,r){let o=Ti(),s=yM(i,n),a=yM(i,dn.max());return vs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,d)=>{let u=this.nr(O.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(u.key,u),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(e){return new px(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return vM(e).get("remoteDocumentGlobalKey").next(i=>(ne(!!i),i))}tr(e,i){return vM(e).put("remoteDocumentGlobalKey",i)}nr(e,i){if(i){let n=Iq(this.serializer,i);if(!(n.isNoDocument()&&n.version.isEqual(se.min())))return n}return Nt.newInvalidDocument(e)}};function LP(t){return new fx(t)}var px=class extends jp{constructor(e,i){super(),this.ar=e,this.trackRemovals=i,this.ur=new rr(n=>n.toString(),(n,r)=>n.isEqual(r))}applyChanges(e){let i=[],n=0,r=new it((o,s)=>_e(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(i.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let l=sM(this.ar.serializer,s);r=r.add(o.path.popLast());let c=Vp(l);n+=c-a.size,i.push(this.ar.addEntry(e,o,l))}else if(n-=a.size,this.trackRemovals){let l=sM(this.ar.serializer,s.convertToNoDocument(se.min()));i.push(this.ar.addEntry(e,o,l))}}),r.forEach(o=>{i.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),i.push(this.ar.updateMetadata(e,n)),w.waitFor(i)}getFromCache(e,i){return this.ar.rr(e,i).next(n=>(this.ur.set(i,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,i){return this.ar.sr(e,i).next(({documents:n,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:n.get(o).readTime})}),n))}};function vM(t){return Yt(t,"remoteDocumentGlobal")}function vs(t){return Yt(t,"remoteDocumentsV14")}function bu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yM(t,e){let i=e.documentKey.path.toArray();return[t,Pp(e.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function wM(t,e){let i=t.path.toArray(),n=e.path.toArray(),r=0;for(let o=0;o<i.length-2&&o<n.length-2;++o)if(r=_e(i[o],n[o]),r)return r;return r=_e(i.length,n.length),r||(r=_e(i[i.length-2],n[n.length-2]),r||_e(i[i.length-1],n[n.length-1]))}var gx=class{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}};var Bp=class{constructor(e,i,n,r){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,i){let n=null;return this.documentOverlayCache.getOverlay(e,i).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,i))).next(r=>(n!==null&&Eu(n.mutation,r,zi.empty(),ft.now()),r))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(n=>this.getLocalViewOfDocuments(e,n,ve()).next(()=>n))}getLocalViewOfDocuments(e,i,n=ve()){let r=Zn();return this.populateOverlays(e,r,i).next(()=>this.computeViews(e,i,r,n).next(o=>{let s=yu();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,i){let n=Zn();return this.populateOverlays(e,n,i).next(()=>this.computeViews(e,i,n,ve()))}populateOverlays(e,i,n){let r=[];return n.forEach(o=>{i.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{i.set(s,a)})})}computeViews(e,i,n,r){let o=Ti(),s=Cu(),a=function(){return Cu()}();return i.forEach((l,c)=>{let d=n.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof En)?o=o.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),Eu(d.mutation,c,d.mutation.getFieldMask(),ft.now())):s.set(c.key,zi.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,d)=>s.set(c,d)),i.forEach((c,d)=>{var u;return a.set(c,new gx(d,(u=s.get(c))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(e,i){let n=Cu(),r=new ct((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(s=>{for(let a of s)a.keys().forEach(l=>{let c=i.get(l);if(c===null)return;let d=n.get(l)||zi.empty();d=a.applyToLocalView(c,d),n.set(l,d);let u=(r.get(a.batchId)||ve()).add(l);r=r.insert(a.batchId,u)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,d=l.value,u=aP();d.forEach(h=>{if(!o.has(h)){let m=pP(i.get(h),n.get(h));m!==null&&u.set(h,m),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,u))}return w.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,i,n,r){return function(s){return O.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):wC(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,n,r):this.getDocumentsMatchingCollectionQuery(e,i,n,r)}getNextDocuments(e,i,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,n,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,n.largestBatchId,r-o.size):w.resolve(Zn()),a=-1,l=o;return s.next(c=>w.forEach(c,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),o.get(d)?w.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ve())).next(d=>({batchId:a,changes:sP(d)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new O(i)).next(n=>{let r=yu();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,i,n,r){let o=i.collectionGroup,s=yu();return this.indexManager.getCollectionParents(e,o).next(a=>w.forEach(a,l=>{let c=function(u,h){return new Cn(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(i,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,n,r).next(d=>{d.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,i,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,n,o,r))).next(s=>{o.forEach((l,c)=>{let d=c.getKey();s.get(d)===null&&(s=s.insert(d,Nt.newInvalidDocument(d)))});let a=yu();return s.forEach((l,c)=>{let d=o.get(l);d!==void 0&&Eu(d.mutation,c,zi.empty(),ft.now()),Zu(i,c)&&(a=a.insert(l,c))}),a})}};var _x=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,i){return w.resolve(this.cr.get(i))}saveBundleMetadata(e,i){return this.cr.set(i.id,function(r){return{id:r.id,version:r.version,createTime:Tt(r.createTime)}}(i)),w.resolve()}getNamedQuery(e,i){return w.resolve(this.lr.get(i))}saveNamedQuery(e,i){return this.lr.set(i.name,function(r){return{name:r.name,query:EC(r.bundledQuery),readTime:Tt(r.readTime)}}(i)),w.resolve()}};var bx=class{constructor(){this.overlays=new ct(O.comparator),this.hr=new Map}getOverlay(e,i){return w.resolve(this.overlays.get(i))}getOverlays(e,i){let n=Zn();return w.forEach(i,r=>this.getOverlay(e,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(e,i,n){return n.forEach((r,o)=>{this.ht(e,i,o)}),w.resolve()}removeOverlaysForBatchId(e,i,n){let r=this.hr.get(n);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(n)),w.resolve()}getOverlaysForCollection(e,i,n){let r=Zn(),o=i.length+1,s=new O(i.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!i.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>n&&r.set(l.getKey(),l)}return w.resolve(r)}getOverlaysForCollectionGroup(e,i,n,r){let o=new ct((c,d)=>c-d),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===i&&c.largestBatchId>n){let d=o.get(c.largestBatchId);d===null&&(d=Zn(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}let a=Zn(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=r)););return w.resolve(a)}ht(e,i,n){let r=this.overlays.get(n.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Fu(i,n));let o=this.hr.get(i);o===void 0&&(o=ve(),this.hr.set(i,o)),this.hr.set(i,o.add(n.key))}};var zu=class{constructor(){this.Pr=new it(Pt.Ir),this.Tr=new it(Pt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,i){let n=new Pt(e,i);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,i){e.forEach(n=>this.addReference(n,i))}removeReference(e,i){this.Ar(new Pt(e,i))}Rr(e,i){e.forEach(n=>this.removeReference(n,i))}Vr(e){let i=new O(new Pe([])),n=new Pt(i,e),r=new Pt(i,e+1),o=[];return this.Tr.forEachInRange([n,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let i=new O(new Pe([])),n=new Pt(i,e),r=new Pt(i,e+1),o=ve();return this.Tr.forEachInRange([n,r],s=>{o=o.add(s.key)}),o}containsKey(e){let i=new Pt(e,0),n=this.Pr.firstAfterOrEqual(i);return n!==null&&e.isEqual(n.key)}},Pt=class{constructor(e,i){this.key=e,this.pr=i}static Ir(e,i){return O.comparator(e.key,i.key)||_e(e.pr,i.pr)}static Er(e,i){return _e(e.pr,i.pr)||O.comparator(e.key,i.key)}};var vx=class{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.yr=1,this.wr=new it(Pt.Ir)}checkEmpty(e){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,n,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ou(o,i,n,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new Pt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(s)}lookupMutationBatch(e,i){return w.resolve(this.Sr(i))}getNextMutationBatchAfterBatchId(e,i){let n=i+1,r=this.br(n),o=r<0?0:r;return w.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){let n=new Pt(i,0),r=new Pt(i,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([n,r],s=>{let a=this.Sr(s.pr);o.push(a)}),w.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,i){let n=new it(_e);return i.forEach(r=>{let o=new Pt(r,0),s=new Pt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{n=n.add(a.pr)})}),w.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,i){let n=i.path,r=n.length+1,o=n;O.isDocumentKey(o)||(o=o.child(""));let s=new Pt(new O(o),0),a=new it(_e);return this.wr.forEachWhile(l=>{let c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.pr)),!0)},s),w.resolve(this.Dr(a))}Dr(e){let i=[];return e.forEach(n=>{let r=this.Sr(n);r!==null&&i.push(r)}),i}removeMutationBatch(e,i){ne(this.Cr(i.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return w.forEach(i.mutations,r=>{let o=new Pt(r.key,i.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=n})}Mn(e){}containsKey(e,i){let n=new Pt(i,0),r=this.wr.firstAfterOrEqual(n);return w.resolve(i.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,w.resolve()}Cr(e,i){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let i=this.br(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}};var yx=class{constructor(e){this.vr=e,this.docs=function(){return new ct(O.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){let n=i.key,r=this.docs.get(n),o=r?r.size:0,s=this.vr(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){let n=this.docs.get(i);return w.resolve(n?n.document.mutableCopy():Nt.newInvalidDocument(i))}getEntries(e,i){let n=Ti();return i.forEach(r=>{let o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():Nt.newInvalidDocument(r))}),w.resolve(n)}getDocumentsMatchingQuery(e,i,n,r){let o=Ti(),s=i.path,a=new O(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:d}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||_C(jM(d),n)<=0||(r.has(d.key)||Zu(i,d))&&(o=o.insert(d.key,d.mutableCopy()))}return w.resolve(o)}getAllFromCollectionGroup(e,i,n,r){K()}Fr(e,i){return w.forEach(this.docs,n=>i(n))}newChangeBuffer(e){return new wx(this)}getSize(e){return w.resolve(this.size)}},wx=class extends jp{constructor(e){super(),this.ar=e}applyChanges(e){let i=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?i.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)}),w.waitFor(i)}getFromCache(e,i){return this.ar.getEntry(e,i)}getAllFromCache(e,i){return this.ar.getEntries(e,i)}};var xx=class{constructor(e){this.persistence=e,this.Mr=new rr(i=>ks(i),Qu),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new zu,this.targetCount=0,this.Lr=Tl.Nn()}forEachTarget(e,i){return this.Mr.forEach((n,r)=>i(r)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.Or&&(this.Or=i),w.resolve()}qn(e){this.Mr.set(e.target,e);let i=e.targetId;i>this.highestTargetId&&(this.Lr=new Tl(i),this.highestTargetId=i),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,i){return this.qn(i),this.targetCount+=1,w.resolve()}updateTargetData(e,i){return this.qn(i),w.resolve()}removeTargetData(e,i){return this.Mr.delete(i.target),this.Nr.Vr(i.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,i,n){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=i&&n.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),w.waitFor(o).next(()=>r)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,i){let n=this.Mr.get(i)||null;return w.resolve(n)}addMatchingKeys(e,i,n){return this.Nr.dr(i,n),w.resolve()}removeMatchingKeys(e,i,n){this.Nr.Rr(i,n);let r=this.persistence.referenceDelegate,o=[];return r&&i.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),w.waitFor(o)}removeMatchingKeysForTargetId(e,i){return this.Nr.Vr(i),w.resolve()}getMatchingKeysForTargetId(e,i){let n=this.Nr.gr(i);return w.resolve(n)}containsKey(e,i){return w.resolve(this.Nr.containsKey(i))}};var zp=class{constructor(e,i){this.Br={},this.overlays={},this.kr=new Bi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xx(this),this.indexManager=new ax,this.remoteDocumentCache=function(r){return new yx(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Mp(i),this.$r=new _x(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new bx,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let n=this.Br[e.toKey()];return n||(n=new vx(i,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,i,n){T("MemoryPersistence","Starting transaction:",e);let r=new Cx(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,i){return w.or(Object.values(this.Br).map(n=>()=>n.containsKey(e,i)))}},Cx=class extends yp{constructor(e){super(),this.currentSequenceNumber=e}},Up=class t{constructor(e){this.persistence=e,this.zr=new zu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw K()}addReference(e,i,n){return this.zr.addReference(n,i),this.Jr.delete(n.toString()),w.resolve()}removeReference(e,i,n){return this.zr.removeReference(n,i),this.Jr.add(n.toString()),w.resolve()}markPotentiallyOrphaned(e,i){return this.Jr.add(i.toString()),w.resolve()}removeTarget(e,i){this.zr.Vr(i.targetId).forEach(r=>this.Jr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,i.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>n.removeTargetData(e,i))}Ur(){this.jr=new Set}Wr(e){let i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Jr,n=>{let r=O.fromPath(n);return this.Yr(e,r).next(o=>{o||i.removeEntry(r,se.min())})}).next(()=>(this.jr=null,i.apply(e)))}updateLimboDocument(e,i){return this.Yr(e,i).next(n=>{n?this.Jr.delete(i.toString()):this.Jr.add(i.toString())})}Kr(e){return 0}Yr(e,i){return w.or([()=>w.resolve(this.zr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Gr(e,i)])}};var Ex=class{constructor(e){this.serializer=e}N(e,i,n,r){let o=new wp("createOrUpgrade",i);n<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LR,{unique:!0}),l.createObjectStore("documentMutations")}(e),xM(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=w.resolve();return n<3&&r>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),xM(e)),s=s.next(()=>function(l){let c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:se.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(o))),n<4&&r>=4&&(n!==0&&(s=s.next(()=>function(l,c){return c.store("mutations").W().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LR,{unique:!0});let u=c.store("mutations"),h=d.map(m=>u.put(m));return w.waitFor(h)})}(e,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&r>=5&&(s=s.next(()=>this.Xr(o))),n<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),n<7&&r>=7&&(s=s.next(()=>this.ti(o))),n<8&&r>=8&&(s=s.next(()=>this.ni(e,o))),n<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&r>=10&&(s=s.next(()=>this.ri(o))),n<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{(function(l){let c=l.createObjectStore("documentOverlays",{keyPath:WH});c.createIndex("collectionPathOverlayIndex",GH,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",KH,{unique:!1})})(e)})),n<13&&r>=13&&(s=s.next(()=>function(l){let c=l.createObjectStore("remoteDocumentsV14",{keyPath:FH});c.createIndex("documentKeyIndex",NH),c.createIndex("collectionGroupIndex",VH)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.si(e,o))),n<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:UH}).createIndex("sequenceNumberIndex",HH,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:qH}).createIndex("documentKeyIndex",$H,{unique:!1})}(e))),s}ei(e){let i=0;return e.store("remoteDocuments").Y((n,r)=>{i+=Vp(r)}).next(()=>{let n={byteSize:i};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Xr(e){let i=e.store("mutationQueues"),n=e.store("mutations");return i.W().next(r=>w.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",s).next(a=>w.forEach(a,l=>{ne(l.userId===o.userId);let c=xs(this.serializer,l);return FP(e,o.userId,c).next(()=>{})}))}))}ti(e){let i=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return n.Y((s,a)=>{let l=new Pe(s),c=function(u){return[0,_i(u)]}(l);o.push(i.get(c).next(d=>d?w.resolve():(u=>i.put({targetId:0,path:_i(u),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>w.waitFor(o))})}ni(e,i){e.createObjectStore("collectionParents",{keyPath:zH});let n=i.store("collectionParents"),r=new Bu,o=s=>{if(r.add(s)){let a=s.lastSegment(),l=s.popLast();return n.put({collectionId:a,parent:_i(l)})}};return i.store("remoteDocuments").Y({J:!0},(s,a)=>{let l=new Pe(s);return o(l.popLast())}).next(()=>i.store("documentMutations").Y({J:!0},([s,a,l],c)=>{let d=Xn(a);return o(d.popLast())}))}ri(e){let i=e.store("targets");return i.Y((n,r)=>{let o=wu(r),s=MP(this.serializer,o);return i.put(s)})}ii(e,i){let n=i.store("remoteDocuments"),r=[];return n.Y((o,s)=>{let a=i.store("remoteDocumentsV14"),l=function(u){return u.document?new O(Pe.fromString(u.document.name).popFirst(5)):u.noDocument?O.fromSegments(u.noDocument.path):u.unknownDocument?O.fromSegments(u.unknownDocument.path):K()}(s).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(c))}).next(()=>w.waitFor(r))}si(e,i){let n=i.store("mutations"),r=LP(this.serializer),o=new zp(Up.Hr,this.serializer.ct);return n.W().next(s=>{let a=new Map;return s.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:ve();xs(this.serializer,l).keys().forEach(u=>d=d.add(u)),a.set(l.userId,d)}),w.forEach(a,(l,c)=>{let d=new Ot(c),u=Op.lt(this.serializer,d),h=o.getIndexManager(d),m=Lp.lt(d,this.serializer,h,o.referenceDelegate);return new Bp(r,m,u,h).recalculateAndSaveOverlaysForDocumentKeys(new Au(i,Bi._e),l).next()})})}};function xM(t){t.createObjectStore("targetDocuments",{keyPath:jH}).createIndex("documentTargetsIndex",BH,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LH,{unique:!0}),t.createObjectStore("targetGlobal")}var pw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ix=class t{constructor(e,i,n,r,o,s,a,l,c,d,u=15){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=n,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=d,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new I(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mx(this,r),this.Ti=i+"main",this.serializer=new Mp(l),this.Ei=new Cr(this.Ti,this.ui,new Ex(this.serializer)),this.Qr=new cx(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LP(this.serializer),this.$r=new ex,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&Et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new I(x.FAILED_PRECONDITION,pw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Bi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=i=>C(this,null,function*(){if(this.started)return e(i)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(i=>C(this,null,function*(){i.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>C(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(i=>{i||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(i=>this.isPrimary&&!i?this.yi(e).next(()=>!1):!!i&&this.wi(e).next(()=>!0))).catch(e=>{if(Do(e))return T("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return T("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return vu(e).get("owner").next(i=>w.resolve(this.Si(i)))}bi(e){return cp(e).delete(this.clientId)}Di(){return C(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{let n=Yt(i,"clientMetadata");return n.W().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return w.forEach(s,a=>n.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let i of e)this.di.removeItem(this.Fi(i.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?w.resolve(!0):vu(e).get("owner").next(i=>{if(i!==null&&this.Ci(i.leaseTimestampMs,5e3)&&!this.Mi(i.ownerId)){if(this.Si(i)&&this.networkEnabled)return!0;if(!this.Si(i)){if(!i.allowTabSynchronization)throw new I(x.FAILED_PRECONDITION,pw);return!1}}return!(!this.networkEnabled||!this.inForeground)||cp(e).W().next(n=>this.vi(n,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(i=>(this.isPrimary!==i&&T("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){return C(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let i=new Au(e,Bi._e);return this.yi(i).next(()=>this.bi(i))}),this.Ei.close(),this.Li()})}vi(e,i){return e.filter(n=>this.Ci(n.updateTimeMs,i)&&!this.Mi(n.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>cp(e).W().next(i=>this.vi(i,18e5).map(n=>n.clientId)))}get started(){return this.qr}getMutationQueue(e,i){return Lp.lt(e,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lx(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Op.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,i,n){T("IndexedDbPersistence","Starting transaction:",e);let r=i==="readonly"?"readonly":"readwrite",o=function(l){return l===15?QH:l===14?$M:l===13?qM:l===12?YH:l===11?HM:void K()}(this.ui),s;return this.Ei.runTransaction(e,r,o,a=>(s=new Au(a,this.kr?this.kr.next():Bi._e),i==="readwrite-primary"?this.gi(s).next(l=>!!l||this.pi(s)).next(l=>{if(!l)throw Et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new I(x.FAILED_PRECONDITION,BM);return n(s)}).next(l=>this.wi(s).next(()=>l)):this.ki(s).next(()=>n(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return vu(e).get("owner").next(i=>{if(i!==null&&this.Ci(i.leaseTimestampMs,5e3)&&!this.Mi(i.ownerId)&&!this.Si(i)&&!(this.ai||this.allowTabSynchronization&&i.allowTabSynchronization))throw new I(x.FAILED_PRECONDITION,pw)})}wi(e){let i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(e).put("owner",i)}static D(){return Cr.D()}yi(e){let i=vu(e);return i.get("owner").next(n=>this.Si(n)?(T("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):w.resolve())}Ci(e,i){let n=Date.now();return!(e<n-i)&&(!(e>n)||(Et(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let i=/(?:Version|Mobile)\/1[456]/;Kg()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var i;try{let n=((i=this.di)===null||i===void 0?void 0:i.getItem(this.Fi(e)))!==null;return T("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Et("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Et("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function vu(t){return Yt(t,"owner")}function cp(t){return Yt(t,"clientMetadata")}function TC(t,e){let i=t.projectId;return t.isDefaultDatabase||(i+="."+t.database),"firestore/"+e+"/"+i+"/"}var Tx=class t{constructor(e,i,n,r){this.targetId=e,this.fromCache=i,this.qi=n,this.Qi=r}static Ki(e,i){let n=ve(),r=ve();for(let o of i.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,i.fromCache,n,r)}};var Sx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Hp=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Kg()?8:Cr.v(nc())>0?6:4}()}initialize(e,i){this.zi=e,this.indexManager=i,this.$i=!0}getDocumentsMatchingQuery(e,i,n,r){let o={result:null};return this.ji(e,i).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,i,r,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Sx;return this.Ji(e,i,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,i,s,a.size)})}).next(()=>o.result)}Yi(e,i,n,r){return n.documentReadCount<this.Wi?(cl()<=Gi.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",dl(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),w.resolve()):(cl()<=Gi.DEBUG&&T("QueryEngine","Query:",dl(i),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(cl()<=Gi.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",dl(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(i))):w.resolve())}ji(e,i){if(YR(i))return w.resolve(null);let n=bi(i);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(i.limit!==null&&r===1&&(i=Dp(i,null,"F"),n=bi(i)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{let s=ve(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{let c=this.Zi(i,a);return this.Xi(i,c,s,l.readTime)?this.ji(e,Dp(i,null,"F")):this.es(e,c,i,l)}))})))}Hi(e,i,n,r){return YR(i)||r.isEqual(se.min())?w.resolve(null):this.zi.getDocuments(e,n).next(o=>{let s=this.Zi(i,o);return this.Xi(i,s,n,r)?w.resolve(null):(cl()<=Gi.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dl(i)),this.es(e,s,i,LM(r,-1)).next(a=>a))})}Zi(e,i){let n=new it(rP(e));return i.forEach((r,o)=>{Zu(e,o)&&(n=n.add(o))}),n}Xi(e,i,n,r){if(e.limit===null)return!1;if(n.size!==i.size)return!0;let o=e.limitType==="F"?i.last():i.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,i,n){return cl()<=Gi.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",dl(i)),this.zi.getDocumentsMatchingQuery(e,i,dn.min(),n)}es(e,i,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next(o=>(i.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Dx=class{constructor(e,i,n,r){this.persistence=e,this.ts=i,this.serializer=r,this.ns=new ct(_e),this.rs=new rr(o=>ks(o),Qu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.ns))}};function jP(t,e,i,n){return new Dx(t,e,i,n)}function BP(t,e){return C(this,null,function*(){let i=V(t);return yield i.persistence.runTransaction("Handle user change","readonly",n=>{let r;return i.mutationQueue.getAllMutationBatches(n).next(o=>(r=o,i._s(e),i.mutationQueue.getAllMutationBatches(n))).next(o=>{let s=[],a=[],l=ve();for(let c of r){s.push(c.batchId);for(let d of c.mutations)l=l.add(d.key)}for(let c of o){a.push(c.batchId);for(let d of c.mutations)l=l.add(d.key)}return i.localDocuments.getDocuments(n,l).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function Aq(t,e){let i=V(t);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=e.batch.keys(),o=i.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){let u=c.batch,h=u.keys(),m=w.resolve();return h.forEach(b=>{m=m.next(()=>d.getEntry(l,b)).next(y=>{let E=c.docVersions.get(b);ne(E!==null),y.version.compareTo(E)<0&&(u.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,u))}(i,n,e,o).next(()=>o.apply(n)).next(()=>i.mutationQueue.performConsistencyCheck(n)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=ve();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>i.localDocuments.getDocuments(n,r))})}function zP(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Qr.getLastRemoteSnapshotVersion(i))}function kq(t,e){let i=V(t),n=e.snapshotVersion,r=i.ns;return i.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=i.os.newChangeBuffer({trackRemovals:!0});r=i.ns;let a=[];e.targetChanges.forEach((d,u)=>{let h=r.get(u);if(!h)return;a.push(i.Qr.removeMatchingKeys(o,d.removedDocuments,u).next(()=>i.Qr.addMatchingKeys(o,d.addedDocuments,u)));let m=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(u)!==null?m=m.withResumeToken(Kt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),r=r.insert(u,m),function(y,E,j){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(h,m,d)&&a.push(i.Qr.updateTargetData(o,m))});let l=Ti(),c=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(i.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(UP(o,s,e.documentUpdates).next(d=>{l=d.cs,c=d.ls})),!n.isEqual(se.min())){let d=i.Qr.getLastRemoteSnapshotVersion(o).next(u=>i.Qr.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(d)}return w.waitFor(a).next(()=>s.apply(o)).next(()=>i.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(i.ns=r,o))}function UP(t,e,i){let n=ve(),r=ve();return i.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=Ti();return i.forEach((a,l)=>{let c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:s,ls:r}})}function Rq(t,e){let i=V(t);return i.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Sl(t,e){let i=V(t);return i.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return i.Qr.getTargetData(n,e).next(o=>o?(r=o,w.resolve(r)):i.Qr.allocateTargetId(n).next(s=>(r=new Il(e,s,"TargetPurposeListen",n.currentSequenceNumber),i.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=i.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(i.ns=i.ns.insert(n.targetId,n),i.rs.set(e,n.targetId)),n})}function Dl(t,e,i){return C(this,null,function*(){let n=V(t),r=n.ns.get(e),o=i?"readwrite":"readwrite-primary";try{i||(yield n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Do(s))throw s;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.ns=n.ns.remove(e),n.rs.delete(r.target)})}function qp(t,e,i){let n=V(t),r=se.min(),o=ve();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,d){let u=V(l),h=u.rs.get(d);return h!==void 0?w.resolve(u.ns.get(h)):u.Qr.getTargetData(c,d)}(n,s,bi(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>n.ts.getDocumentsMatchingQuery(s,e,i?r:se.min(),i?o:ve())).next(a=>($P(n,nP(e),a),{documents:a,hs:o})))}function HP(t,e){let i=V(t),n=V(i.Qr),r=i.ns.get(e);return r?Promise.resolve(r.target):i.persistence.runTransaction("Get target data","readonly",o=>n._t(o,e).next(s=>s?s.target:null))}function qP(t,e){let i=V(t),n=i.ss.get(e)||se.min();return i.persistence.runTransaction("Get new document changes","readonly",r=>i.os.getAllFromCollectionGroup(r,e,LM(n,-1),Number.MAX_SAFE_INTEGER)).then(r=>($P(i,e,r),r))}function $P(t,e,i){let n=t.ss.get(e)||se.min();i.forEach((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.ss.set(e,n)}function Mq(t,e,i,n){return C(this,null,function*(){let r=V(t),o=ve(),s=Ti();for(let c of i){let d=e.Ps(c.metadata.name);c.document&&(o=o.add(d));let u=e.Is(c);u.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(d,u)}let a=r.os.newChangeBuffer({trackRemovals:!0}),l=yield Sl(r,function(d){return bi(Nl(Pe.fromString(`__bundle__/docs/${d}`)))}(n));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>UP(c,a,s).next(d=>(a.apply(c),d)).next(d=>r.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Qr.addMatchingKeys(c,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,d.cs,d.ls)).next(()=>d.cs)))})}function Pq(n,r){return C(this,arguments,function*(t,e,i=ve()){let o=yield Sl(t,bi(EC(e.bundledQuery))),s=V(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=Tt(e.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.$r.saveNamedQuery(a,e);let c=o.withResumeToken(Kt.EMPTY_BYTE_STRING,l);return s.ns=s.ns.insert(c.targetId,c),s.Qr.updateTargetData(a,c).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,i,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function CM(t,e){return`firestore_clients_${t}_${e}`}function EM(t,e,i){let n=`firestore_mutations_${t}_${i}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function gw(t,e){return`firestore_targets_${t}_${e}`}var $p=class t{constructor(e,i,n,r){this.user=e,this.batchId=i,this.state=n,this.error=r}static Es(e,i,n){let r=JSON.parse(n),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new I(r.error.code,r.error.message))),s?new t(e,i,r.state,o):(Et("SharedClientState",`Failed to parse mutation state for ID '${i}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Iu=class t{constructor(e,i,n){this.targetId=e,this.state=i,this.error=n}static Es(e,i){let n=JSON.parse(i),r,o=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return o&&n.error&&(o=typeof n.error.message=="string"&&typeof n.error.code=="string",o&&(r=new I(n.error.code,n.error.message))),o?new t(e,n.state,r):(Et("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Wp=class t{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static Es(e,i){let n=JSON.parse(i),r=typeof n=="object"&&n.activeTargetIds instanceof Array,o=xC();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=zM(n.activeTargetIds[s]),o=o.add(n.activeTargetIds[s]);return r?new t(e,o):(Et("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}},Ax=class t{constructor(e,i){this.clientId=e,this.onlineState=i}static Es(e){let i=JSON.parse(e);return typeof i=="object"&&["Unknown","Online","Offline"].indexOf(i.onlineState)!==-1&&typeof i.clientId=="string"?new t(i.clientId,i.onlineState):(Et("SharedClientState",`Failed to parse online state: ${e}`),null)}},Uu=class{constructor(){this.activeTargetIds=xC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Tu=class{constructor(e,i,n,r,o){this.window=e,this.oi=i,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ct(_e),this.started=!1,this.ys=[];let s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=CM(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Uu),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return C(this,null,function*(){let e=yield this.syncEngine.Bi();for(let n of e){if(n===this.Vs)continue;let r=this.getItem(CM(this.persistenceKey,n));if(r){let o=Wp.Es(n,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let i=this.storage.getItem(this.vs);if(i){let n=this.xs(i);n&&this.Os(n)}for(let n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let i=!1;return this.ps.forEach((n,r)=>{r.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,i,n){this.Ls(e,i,n),this.Bs(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){let n=this.storage.getItem(gw(this.persistenceKey,e));if(n){let r=Iu.Es(e,n);r&&(i=r.state)}}return this.ks.As(e),this.Ms(),i}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gw(this.persistenceKey,e))}updateQueryState(e,i,n){this.qs(e,i,n)}handleUserChange(e,i,n){i.forEach(r=>{this.Bs(r)}),this.currentUser=e,n.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let i=this.storage.getItem(e);return T("SharedClientState","READ",e,i),i}setItem(e,i){T("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){T("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let i=e;if(i.storageArea===this.storage){if(T("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void Et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>C(this,null,function*(){if(this.started){if(i.key!==null){if(this.bs.test(i.key)){if(i.newValue==null){let n=this.$s(i.key);return this.Us(n,null)}{let n=this.Ws(i.key,i.newValue);if(n)return this.Us(n.clientId,n)}}else if(this.Ds.test(i.key)){if(i.newValue!==null){let n=this.Gs(i.key,i.newValue);if(n)return this.zs(n)}}else if(this.Cs.test(i.key)){if(i.newValue!==null){let n=this.js(i.key,i.newValue);if(n)return this.Hs(n)}}else if(i.key===this.vs){if(i.newValue!==null){let n=this.xs(i.newValue);if(n)return this.Os(n)}}else if(i.key===this.Ss){let n=function(o){let s=Bi._e;if(o!=null)try{let a=JSON.parse(o);ne(typeof a=="number"),s=a}catch(a){Et("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(i.newValue);n!==Bi._e&&this.sequenceNumberHandler(n)}else if(i.key===this.Fs){let n=this.Js(i.newValue);yield Promise.all(n.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,i,n){let r=new $p(this.currentUser,e,i,n),o=EM(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let i=EM(this.persistenceKey,this.currentUser,e);this.removeItem(i)}Qs(e){let i={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(i))}qs(e,i,n){let r=gw(this.persistenceKey,e),o=new Iu(e,i,n);this.setItem(r,o.ds())}Ks(e){let i=JSON.stringify(Array.from(e));this.setItem(this.Fs,i)}$s(e){let i=this.bs.exec(e);return i?i[1]:null}Ws(e,i){let n=this.$s(e);return Wp.Es(n,i)}Gs(e,i){let n=this.Ds.exec(e),r=Number(n[1]),o=n[2]!==void 0?n[2]:null;return $p.Es(new Ot(o),r,i)}js(e,i){let n=this.Cs.exec(e),r=Number(n[1]);return Iu.Es(r,i)}xs(e){return Ax.Es(e)}Js(e){return JSON.parse(e)}zs(e){return C(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);T("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,i){let n=i?this.ps.insert(e,i):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(n),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.eo(s,a).then(()=>{this.ps=n})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let i=xC();return e.forEach((n,r)=>{i=i.unionWith(r.activeTargetIds)}),i}},Gp=class{constructor(){this.no=new Uu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,i,n){this.ro[e]=i}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Uu,Promise.resolve()}handleUserChange(e,i,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kx=class{io(e){}shutdown(){}};var Kp=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var dp=null;function _w(){return dp===null?dp=function(){return 268435456+Math.round(2147483648*Math.random())}():dp++,"0x"+dp.toString(16)}var Oq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Rx=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var ci="WebChannelConnection",Mx=class extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;let n=i.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+i.host,this.po=`projects/${r}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get wo(){return!1}So(i,n,r,o,s){let a=_w(),l=this.bo(i,n.toUriEncodedString());T("RestConnection",`Sending RPC '${i}' ${a}:`,l,r);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(i,l,c,r).then(d=>(T("RestConnection",`Received RPC '${i}' ${a}: `,d),d),d=>{throw cn("RestConnection",`RPC '${i}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}vo(i,n,r,o,s,a){return this.So(i,n,r,o,s)}Do(i,n,r){i["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>i[s]=o),r&&r.headers.forEach((o,s)=>i[s]=o)}bo(i,n){let r=Oq[i];return`${this.fo}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,i,n,r){let o=_w();return new Promise((s,a)=>{let l=new PR;l.setWithCredentials(!0),l.listenOnce(RR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case sp.NO_ERROR:let d=l.getResponseJson();T(ci,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case sp.TIMEOUT:T(ci,`RPC '${e}' ${o} timed out`),a(new I(x.DEADLINE_EXCEEDED,"Request time out"));break;case sp.HTTP_ERROR:let u=l.getStatus();if(T(ci,`RPC '${e}' ${o} failed with status:`,u,"response text:",l.getResponseText()),u>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);let m=h?.error;if(m&&m.status&&m.message){let b=function(E){let j=E.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN}(m.status);a(new I(b,m.message))}else a(new I(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new I(x.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{T(ci,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(r);T(ci,`RPC '${e}' ${o} sending request:`,r),l.send(i,"POST",c,n,15)})}Fo(e,i,n){let r=_w(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=AR(),a=kR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,i,n),l.encodeInitMessageHeaders=!0;let d=o.join("");T(ci,`Creating RPC '${e}' stream ${r}: ${d}`,l);let u=s.createWebChannel(d,l),h=!1,m=!1,b=new Rx({lo:E=>{m?T(ci,`Not sending because RPC '${e}' stream ${r} is closed:`,E):(h||(T(ci,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),T(ci,`RPC '${e}' stream ${r} sending:`,E),u.send(E))},ho:()=>u.close()}),y=(E,j,re)=>{E.listen(j,$=>{try{re($)}catch(be){setTimeout(()=>{throw be},0)}})};return y(u,pu.EventType.OPEN,()=>{m||T(ci,`RPC '${e}' stream ${r} transport opened.`)}),y(u,pu.EventType.CLOSE,()=>{m||(m=!0,T(ci,`RPC '${e}' stream ${r} transport closed`),b.Vo())}),y(u,pu.EventType.ERROR,E=>{m||(m=!0,cn(ci,`RPC '${e}' stream ${r} transport errored:`,E),b.Vo(new I(x.UNAVAILABLE,"The operation could not be completed")))}),y(u,pu.EventType.MESSAGE,E=>{var j;if(!m){let re=E.data[0];ne(!!re);let $=re,be=$.error||((j=$[0])===null||j===void 0?void 0:j.error);if(be){T(ci,`RPC '${e}' stream ${r} received error:`,be);let Ie=be.status,Fe=function(bF){let uE=Mt[bF];if(uE!==void 0)return bP(uE)}(Ie),St=be.message;Fe===void 0&&(Fe=x.INTERNAL,St="Unknown error status: "+Ie+" with message "+be.message),m=!0,b.Vo(new I(Fe,St)),u.close()}else T(ci,`RPC '${e}' stream ${r} received:`,re),b.mo(re)}}),y(a,MR.STAT_EVENT,E=>{E.stat===mw.PROXY?T(ci,`RPC '${e}' stream ${r} detected buffering proxy`):E.stat===mw.NOPROXY&&T(ci,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.Ro()},0),b}};function WP(){return typeof window<"u"?window:null}function pp(){return typeof document<"u"?document:null}function Ju(t){return new Yw(t,!0)}var Hu=class{constructor(e,i,n=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=i,this.Mo=n,this.xo=r,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let i=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,i-n);r>0&&T("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Yp=class{constructor(e,i,n,r,o,s,a,l){this.oi=e,this.$o=n,this.Uo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Hu(e,i)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return C(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return C(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,i){return C(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():i&&i.code===x.RESOURCE_EXHAUSTED?(Et(i.toString()),Et("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):i&&i.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(i)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),i=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Wo===i&&this.o_(n,r)},n=>{e(()=>{let r=new I(x.UNKNOWN,"Fetching auth token failed: "+n.message);return this.__(r)})})}o_(e,i){let n=this.s_(this.Wo);this.stream=this.a_(e,i),this.stream.Po(()=>{n(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{n(()=>this.__(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>C(this,null,function*(){this.state=0,this.start()}))}__(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return i=>{this.oi.enqueueAndForget(()=>this.Wo===e?i():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Px=class extends Yp{constructor(e,i,n,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,r,s),this.serializer=o}a_(e,i){return this.connection.Fo("Listen",e,i)}onMessage(e){this.jo.reset();let i=bq(this.serializer,e),n=function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?Tt(s.readTime):se.min()}(e);return this.listener.u_(i,n)}c_(e){let i={};i.database=Zw(this.serializer),i.addTarget=function(o,s){let a,l=s.target;if(a=Tp(l)?{documents:TP(o,l)}:{query:SP(o,l).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=yP(o,s.resumeToken);let c=Qw(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=El(o,s.snapshotVersion.toTimestamp());let c=Qw(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let n=yq(this.serializer,e);n&&(i.labels=n),this.t_(i)}l_(e){let i={};i.database=Zw(this.serializer),i.removeTarget=e,this.t_(i)}},Ox=class extends Yp{constructor(e,i,n,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,r,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,i){return this.connection.Fo("Write",e,i)}onMessage(e){if(ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let i=vq(e.writeResults,e.commitTime),n=Tt(e.commitTime);return this.listener.T_(n,i)}return ne(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Zw(this.serializer),this.t_(e)}I_(e){let i={streamToken:this.lastStreamToken,writes:e.map(n=>ju(this.serializer,n))};this.t_(i)}};var Fx=class extends class{}{constructor(e,i,n,r){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new I(x.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,i,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Xw(i,n),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new I(x.UNKNOWN,o.toString())})}vo(e,i,n,r,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,Xw(i,n),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new I(x.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Nx=class{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Et(i),this.g_=!1):T("OnlineStateTracker",i)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Vx=class{constructor(e,i,n,r,o){this.localStore=e,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{n.enqueueAndForget(()=>C(this,null,function*(){Ao(this)&&(T("RemoteStore","Restarting streams for network reachability change."),yield function(l){return C(this,null,function*(){let c=V(l);c.v_.add(4),yield Vl(c),c.x_.set("Unknown"),c.v_.delete(4),yield eh(c)})}(this))}))}),this.x_=new Nx(n,r)}};function eh(t){return C(this,null,function*(){if(Ao(t))for(let e of t.F_)yield e(!0)})}function Vl(t){return C(this,null,function*(){for(let e of t.F_)yield e(!1)})}function fg(t,e){let i=V(t);i.C_.has(e.targetId)||(i.C_.set(e.targetId,e),AC(i)?DC(i):jl(i).Jo()&&SC(i,e))}function Al(t,e){let i=V(t),n=jl(i);i.C_.delete(e),n.Jo()&&GP(i,e),i.C_.size===0&&(n.Jo()?n.Xo():Ao(i)&&i.x_.set("Unknown"))}function SC(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let i=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}jl(t).c_(e)}function GP(t,e){t.O_.Oe(e),jl(t).l_(e)}function DC(t){t.O_=new Kw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),jl(t).start(),t.x_.p_()}function AC(t){return Ao(t)&&!jl(t).Ho()&&t.C_.size>0}function Ao(t){return V(t).v_.size===0}function KP(t){t.O_=void 0}function Fq(t){return C(this,null,function*(){t.C_.forEach((e,i)=>{SC(t,e)})})}function Nq(t,e){return C(this,null,function*(){KP(t),AC(t)?(t.x_.S_(e),DC(t)):t.x_.set("Unknown")})}function Vq(t,e,i){return C(this,null,function*(){if(t.x_.set("Online"),e instanceof kp&&e.state===2&&e.cause)try{yield function(r,o){return C(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.C_.delete(a),r.O_.removeTarget(a))})}(t,e)}catch(n){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield Qp(t,n)}else if(e instanceof _l?t.O_.$e(e):e instanceof Ap?t.O_.Je(e):t.O_.Ge(e),!i.isEqual(se.min()))try{let n=yield zP(t.localStore);i.compareTo(n)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let d=o.C_.get(c);d&&o.C_.set(c,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{let d=o.C_.get(l);if(!d)return;o.C_.set(l,d.withResumeToken(Kt.EMPTY_BYTE_STRING,d.snapshotVersion)),GP(o,l);let u=new Il(d.target,l,c,d.sequenceNumber);SC(o,u)}),o.remoteSyncer.applyRemoteEvent(a)}(t,i))}catch(n){T("RemoteStore","Failed to raise snapshot:",n),yield Qp(t,n)}})}function Qp(t,e,i){return C(this,null,function*(){if(!Do(e))throw e;t.v_.add(1),yield Vl(t),t.x_.set("Offline"),i||(i=()=>zP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){T("RemoteStore","Retrying IndexedDB access"),yield i(),t.v_.delete(1),yield eh(t)}))})}function YP(t,e){return e().catch(i=>Qp(t,i,e))}function Ll(t){return C(this,null,function*(){let e=V(t),i=To(e),n=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Lq(e);)try{let r=yield Rq(e.localStore,n);if(r===null){e.D_.length===0&&i.Xo();break}n=r.batchId,jq(e,r)}catch(r){yield Qp(e,r)}QP(e)&&XP(e)})}function Lq(t){return Ao(t)&&t.D_.length<10}function jq(t,e){t.D_.push(e);let i=To(t);i.Jo()&&i.P_&&i.I_(e.mutations)}function QP(t){return Ao(t)&&!To(t).Ho()&&t.D_.length>0}function XP(t){To(t).start()}function Bq(t){return C(this,null,function*(){To(t).d_()})}function zq(t){return C(this,null,function*(){let e=To(t);for(let i of t.D_)e.I_(i.mutations)})}function Uq(t,e,i){return C(this,null,function*(){let n=t.D_.shift(),r=$w.from(n,e,i);yield YP(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ll(t)})}function Hq(t,e){return C(this,null,function*(){e&&To(t).P_&&(yield function(n,r){return C(this,null,function*(){if(function(s){return _P(s)&&s!==x.ABORTED}(r.code)){let o=n.D_.shift();To(n).Zo(),yield YP(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ll(n)}})}(t,e)),QP(t)&&XP(t)})}function IM(t,e){return C(this,null,function*(){let i=V(t);i.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");let n=Ao(i);i.v_.add(3),yield Vl(i),n&&i.x_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(e),i.v_.delete(3),yield eh(i)})}function Lx(t,e){return C(this,null,function*(){let i=V(t);e?(i.v_.delete(2),yield eh(i)):e||(i.v_.add(2),yield Vl(i),i.x_.set("Unknown"))})}function jl(t){return t.N_||(t.N_=function(i,n,r){let o=V(i);return o.R_(),new Px(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:Fq.bind(null,t),To:Nq.bind(null,t),u_:Vq.bind(null,t)}),t.F_.push(e=>C(this,null,function*(){e?(t.N_.Zo(),AC(t)?DC(t):t.x_.set("Unknown")):(yield t.N_.stop(),KP(t))}))),t.N_}function To(t){return t.L_||(t.L_=function(i,n,r){let o=V(i);return o.R_(),new Ox(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:Bq.bind(null,t),To:Hq.bind(null,t),E_:zq.bind(null,t),T_:Uq.bind(null,t)}),t.F_.push(e=>C(this,null,function*(){e?(t.L_.Zo(),yield Ll(t)):(yield t.L_.stop(),t.D_.length>0&&(T("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var jx=class t{constructor(e,i,n,r,o){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Ft,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,n,r,o){let s=Date.now()+n,a=new t(e,i,s,r,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bl(t,e){if(Et("AsyncQueue",`${e}: ${t}`),Do(t))return new I(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Xp=class t{constructor(e){this.comparator=e?(i,n)=>e(i,n)||O.comparator(i.key,n.key):(i,n)=>O.comparator(i.key,n.key),this.keyedMap=yu(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,n)=>(e(i),!1))}add(e){let i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){let i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let i=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;i.hasNext();){let r=i.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){let n=new t;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=i,n}};var Zp=class{constructor(){this.B_=new ct(O.comparator)}track(e){let i=e.doc.key,n=this.B_.get(i);n?e.type!==0&&n.type===3?this.B_=this.B_.insert(i,e):e.type===3&&n.type!==1?this.B_=this.B_.insert(i,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.B_=this.B_.insert(i,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.B_=this.B_.insert(i,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.B_=this.B_.remove(i):e.type===1&&n.type===2?this.B_=this.B_.insert(i,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.B_=this.B_.insert(i,{type:2,doc:e.doc}):K():this.B_=this.B_.insert(i,e)}k_(){let e=[];return this.B_.inorderTraversal((i,n)=>{e.push(n)}),e}},kl=class t{constructor(e,i,n,r,o,s,a,l,c){this.query=e,this.docs=i,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,i,n,r,o){let s=[];return i.forEach(a=>{s.push({type:0,doc:a})}),new t(e,i,Xp.emptySet(i),s,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let i=this.docChanges,n=e.docChanges;if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++)if(i[r].type!==n[r].type||!i[r].doc.isEqual(n[r].doc))return!1;return!0}};var Bx=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},zx=class{constructor(){this.queries=new rr(e=>iP(e),Xu),this.onlineState="Unknown",this.W_=new Set}};function kC(t,e){return C(this,null,function*(){let i=V(t),n=3,r=e.query,o=i.queries.get(r);o?!o.K_()&&e.U_()&&(n=2):(o=new Bx,n=e.U_()?0:1);try{switch(n){case 0:o.q_=yield i.onListen(r,!0);break;case 1:o.q_=yield i.onListen(r,!1);break;case 2:yield i.onFirstRemoteStoreListen(r)}}catch(s){let a=Bl(s,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(a)}i.queries.set(r,o),o.Q_.push(e),e.G_(i.onlineState),o.q_&&e.z_(o.q_)&&MC(i)})}function RC(t,e){return C(this,null,function*(){let i=V(t),n=e.query,r=3,o=i.queries.get(n);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?r=e.U_()?0:1:!o.K_()&&e.U_()&&(r=2))}switch(r){case 0:return i.queries.delete(n),i.onUnlisten(n,!0);case 1:return i.queries.delete(n),i.onUnlisten(n,!1);case 2:return i.onLastRemoteStoreUnlisten(n);default:return}})}function qq(t,e){let i=V(t),n=!1;for(let r of e){let o=r.query,s=i.queries.get(o);if(s){for(let a of s.Q_)a.z_(r)&&(n=!0);s.q_=r}}n&&MC(i)}function $q(t,e,i){let n=V(t),r=n.queries.get(e);if(r)for(let o of r.Q_)o.onError(i);n.queries.delete(e)}function MC(t){t.W_.forEach(e=>{e.next()})}var Ux,TM;(TM=Ux||(Ux={})).j_="default",TM.Cache="cache";var qu=class{constructor(e,i,n){this.query=e,this.H_=i,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){let n=[];for(let r of e.docChanges)r.type!==3&&n.push(r);e=new kl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),i=!0):this.X_(e,this.onlineState)&&(this.ea(e),i=!0),this.Y_=e,i}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let i=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),i=!0),i}X_(e,i){if(!e.fromCache||!this.U_())return!0;let n=i!=="Offline";return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let i=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ea(e){e=kl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Ux.Cache}};var Hx=class{constructor(e,i){this.na=e,this.byteLength=i}ra(){return"metadata"in this.na}};var Jp=class{constructor(e){this.serializer=e}Ps(e){return er(this.serializer,e)}Is(e){return e.metadata.exists?IP(this.serializer,e.document,!1):Nt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Tt(e)}},qx=class{constructor(e,i,n){this.ia=e,this.localStore=i,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ZP(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++i;let n=Pe.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}oa(e){let i=new Map,n=new Jp(this.serializer);for(let r of e)if(r.metadata.queries){let o=n.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(i.get(s)||ve()).add(o);i.set(s,a)}}return i}complete(){return C(this,null,function*(){let e=yield Mq(this.localStore,new Jp(this.serializer),this.documents,this.ia.id),i=this.oa(this.documents);for(let n of this.queries)yield Pq(this.localStore,n,i.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}})}};function ZP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var eg=class{constructor(e){this.key=e}},tg=class{constructor(e){this.key=e}},ig=class{constructor(e,i){this.query=e,this.ua=i,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ve(),this.mutatedKeys=ve(),this.ha=rP(e),this.Pa=new Xp(this.ha)}get Ia(){return this.ua}Ta(e,i){let n=i?i.Ea:new Zp,r=i?i.Pa:this.Pa,o=i?i.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,u)=>{let h=r.get(d),m=Zu(this.query,u)?u:null,b=!!h&&this.mutatedKeys.has(h.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),E=!1;h&&m?h.data.isEqual(m.data)?b!==y&&(n.track({type:3,doc:m}),E=!0):this.da(h,m)||(n.track({type:2,doc:m}),E=!0,(l&&this.ha(m,l)>0||c&&this.ha(m,c)<0)&&(a=!0)):!h&&m?(n.track({type:0,doc:m}),E=!0):h&&!m&&(n.track({type:1,doc:h}),E=!0,(l||c)&&(a=!0)),E&&(m?(s=s.add(m),o=y?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),n.track({type:1,doc:d})}return{Pa:s,Ea:n,Xi:a,mutatedKeys:o}}da(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,n,r){let o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let s=e.Ea.k_();s.sort((d,u)=>function(m,b){let y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return y(m)-y(b)}(d.type,u.type)||this.ha(d.doc,u.doc)),this.Aa(n),r=r!=null&&r;let a=i&&!r?this.Ra():[],l=this.la.size===0&&this.current&&!r?1:0,c=l!==this.ca;return this.ca=l,s.length!==0||c?{snapshot:new kl(this.query,e.Pa,o,s,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Zp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(i=>this.ua=this.ua.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.ua=this.ua.delete(i)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=ve(),this.Pa.forEach(n=>{this.ma(n.key)&&(this.la=this.la.add(n.key))});let i=[];return e.forEach(n=>{this.la.has(n)||i.push(new tg(n))}),this.la.forEach(n=>{e.has(n)||i.push(new eg(n))}),i}fa(e){this.ua=e.hs,this.la=ve();let i=this.Ta(e.documents);return this.applyChanges(i,!0)}ga(){return kl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},$x=class{constructor(e,i,n){this.query=e,this.targetId=i,this.view=n}},Wx=class{constructor(e){this.key=e,this.pa=!1}},Gx=class{constructor(e,i,n,r,o,s){this.localStore=e,this.remoteStore=i,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new rr(a=>iP(a),Xu),this.Sa=new Map,this.ba=new Set,this.Da=new ct(O.comparator),this.Ca=new Map,this.va=new zu,this.Fa={},this.Ma=new Map,this.xa=Tl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function Wq(t,e,i=!0){return C(this,null,function*(){let n=pg(t),r,o=n.wa.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ga()):r=yield JP(n,e,i,!0),r})}function Gq(t,e){return C(this,null,function*(){let i=pg(t);yield JP(i,e,!0,!1)})}function JP(t,e,i,n){return C(this,null,function*(){let r=yield Sl(t.localStore,bi(e)),o=r.targetId,s=i?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return n&&(a=yield PC(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&i&&fg(t.remoteStore,r),a})}function PC(t,e,i,n,r){return C(this,null,function*(){t.Na=(u,h,m)=>function(y,E,j,re){return C(this,null,function*(){let $=E.view.Ta(j);$.Xi&&($=yield qp(y.localStore,E.query,!1).then(({documents:St})=>E.view.Ta(St,$)));let be=re&&re.targetChanges.get(E.targetId),Ie=re&&re.targetMismatches.get(E.targetId)!=null,Fe=E.view.applyChanges($,y.isPrimaryClient,be,Ie);return Kx(y,E.targetId,Fe.Va),Fe.snapshot})}(t,u,h,m);let o=yield qp(t.localStore,e,!0),s=new ig(e,o.hs),a=s.Ta(o.documents),l=Vu.createSynthesizedTargetChangeForCurrentChange(i,n&&t.onlineState!=="Offline",r),c=s.applyChanges(a,t.isPrimaryClient,l);Kx(t,i,c.Va);let d=new $x(e,i,s);return t.wa.set(e,d),t.Sa.has(i)?t.Sa.get(i).push(e):t.Sa.set(i,[e]),c.snapshot})}function Kq(t,e,i){return C(this,null,function*(){let n=V(t),r=n.wa.get(e),o=n.Sa.get(r.targetId);if(o.length>1)return n.Sa.set(r.targetId,o.filter(s=>!Xu(s,e))),void n.wa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),i&&Al(n.remoteStore,r.targetId),Rl(n,r.targetId)}).catch(So))):(Rl(n,r.targetId),yield Dl(n.localStore,r.targetId,!0))})}function Yq(t,e){return C(this,null,function*(){let i=V(t),n=i.wa.get(e),r=i.Sa.get(n.targetId);i.isPrimaryClient&&r.length===1&&(i.sharedClientState.removeLocalQueryTarget(n.targetId),Al(i.remoteStore,n.targetId))})}function Qq(t,e,i){return C(this,null,function*(){let n=VC(t);try{let r=yield function(s,a){let l=V(s),c=ft.now(),d=a.reduce((m,b)=>m.add(b.key),ve()),u,h;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Ti(),y=ve();return l.os.getEntries(m,d).next(E=>{b=E,b.forEach((j,re)=>{re.isValidDocument()||(y=y.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(E=>{u=E;let j=[];for(let re of a){let $=uq(re,u.get(re.key).overlayedDocument);$!=null&&j.push(new En(re.key,$,YM($.value.mapValue),vt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,j,a)}).next(E=>{h=E;let j=E.applyToLocalDocumentSet(u,y);return l.documentOverlayCache.saveOverlays(m,E.batchId,j)})}).then(()=>({batchId:h.batchId,changes:sP(u)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let c=s.Fa[s.currentUser.toKey()];c||(c=new ct(_e)),c=c.insert(a,l),s.Fa[s.currentUser.toKey()]=c}(n,r.batchId,i),yield Dr(n,r.changes),yield Ll(n.remoteStore)}catch(r){let o=Bl(r,"Failed to persist write");i.reject(o)}})}function eO(t,e){return C(this,null,function*(){let i=V(t);try{let n=yield kq(i.localStore,e);e.targetChanges.forEach((r,o)=>{let s=i.Ca.get(o);s&&(ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.pa=!0:r.modifiedDocuments.size>0?ne(s.pa):r.removedDocuments.size>0&&(ne(s.pa),s.pa=!1))}),yield Dr(i,n,e)}catch(n){yield So(n)}})}function SM(t,e,i){let n=V(t);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){let r=[];n.wa.forEach((o,s)=>{let a=s.view.G_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=V(s);l.onlineState=a;let c=!1;l.queries.forEach((d,u)=>{for(let h of u.Q_)h.G_(a)&&(c=!0)}),c&&MC(l)}(n.eventManager,e),r.length&&n.ya.u_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}function Xq(t,e,i){return C(this,null,function*(){let n=V(t);n.sharedClientState.updateQueryState(e,"rejected",i);let r=n.Ca.get(e),o=r&&r.key;if(o){let s=new ct(O.comparator);s=s.insert(o,Nt.newNoDocument(o,se.min()));let a=ve().add(o),l=new Nu(se.min(),new Map,new ct(_e),s,a);yield eO(n,l),n.Da=n.Da.remove(o),n.Ca.delete(e),NC(n)}else yield Dl(n.localStore,e,!1).then(()=>Rl(n,e,i)).catch(So)})}function Zq(t,e){return C(this,null,function*(){let i=V(t),n=e.batch.batchId;try{let r=yield Aq(i.localStore,e);FC(i,n,null),OC(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),yield Dr(i,r)}catch(r){yield So(r)}})}function Jq(t,e,i){return C(this,null,function*(){let n=V(t);try{let r=yield function(s,a){let l=V(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(u=>(ne(u!==null),d=u.keys(),l.mutationQueue.removeMutationBatch(c,u))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(n.localStore,e);FC(n,e,i),OC(n,e),n.sharedClientState.updateMutationState(e,"rejected",i),yield Dr(n,r)}catch(r){yield So(r)}})}function e$(t,e){return C(this,null,function*(){let i=V(t);Ao(i.remoteStore)||T("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let n=yield function(s){let a=V(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(i.localStore);if(n===-1)return void e.resolve();let r=i.Ma.get(n)||[];r.push(e),i.Ma.set(n,r)}catch(n){let r=Bl(n,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function OC(t,e){(t.Ma.get(e)||[]).forEach(i=>{i.resolve()}),t.Ma.delete(e)}function FC(t,e,i){let n=V(t),r=n.Fa[n.currentUser.toKey()];if(r){let o=r.get(e);o&&(i?o.reject(i):o.resolve(),r=r.remove(e)),n.Fa[n.currentUser.toKey()]=r}}function Rl(t,e,i=null){t.sharedClientState.removeLocalQueryTarget(e);for(let n of t.Sa.get(e))t.wa.delete(n),i&&t.ya.La(n,i);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(n=>{t.va.containsKey(n)||tO(t,n)})}function tO(t,e){t.ba.delete(e.path.canonicalString());let i=t.Da.get(e);i!==null&&(Al(t.remoteStore,i),t.Da=t.Da.remove(e),t.Ca.delete(i),NC(t))}function Kx(t,e,i){for(let n of i)n instanceof eg?(t.va.addReference(n.key,e),t$(t,n)):n instanceof tg?(T("SyncEngine","Document no longer in limbo: "+n.key),t.va.removeReference(n.key,e),t.va.containsKey(n.key)||tO(t,n.key)):K()}function t$(t,e){let i=e.key,n=i.path.canonicalString();t.Da.get(i)||t.ba.has(n)||(T("SyncEngine","New document in limbo: "+i),t.ba.add(n),NC(t))}function NC(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let i=new O(Pe.fromString(e)),n=t.xa.next();t.Ca.set(n,new Wx(i)),t.Da=t.Da.insert(i,n),fg(t.remoteStore,new Il(bi(Nl(i.path)),n,"TargetPurposeLimboResolution",Bi._e))}}function Dr(t,e,i){return C(this,null,function*(){let n=V(t),r=[],o=[],s=[];n.wa.isEmpty()||(n.wa.forEach((a,l)=>{s.push(n.Na(l,e,i).then(c=>{if((c||i)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);let d=Tx.Ki(l.targetId,c);o.push(d)}}))}),yield Promise.all(s),n.ya.u_(r),yield function(l,c){return C(this,null,function*(){let d=V(l);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>w.forEach(c,h=>w.forEach(h.qi,m=>d.persistence.referenceDelegate.addReference(u,h.targetId,m)).next(()=>w.forEach(h.Qi,m=>d.persistence.referenceDelegate.removeReference(u,h.targetId,m)))))}catch(u){if(!Do(u))throw u;T("LocalStore","Failed to update sequence numbers: "+u)}for(let u of c){let h=u.targetId;if(!u.fromCache){let m=d.ns.get(h),b=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(b);d.ns=d.ns.insert(h,y)}}})}(n.localStore,o))})}function i$(t,e){return C(this,null,function*(){let i=V(t);if(!i.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());let n=yield BP(i.localStore,e);i.currentUser=e,function(o,s){o.Ma.forEach(a=>{a.forEach(l=>{l.reject(new I(x.CANCELLED,s))})}),o.Ma.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),yield Dr(i,n.us)}})}function n$(t,e){let i=V(t),n=i.Ca.get(e);if(n&&n.pa)return ve().add(n.key);{let r=ve(),o=i.Sa.get(e);if(!o)return r;for(let s of o){let a=i.wa.get(s);r=r.unionWith(a.view.Ia)}return r}}function r$(t,e){return C(this,null,function*(){let i=V(t),n=yield qp(i.localStore,e.query,!0),r=e.view.fa(n);return i.isPrimaryClient&&Kx(i,e.targetId,r.Va),r})}function o$(t,e){return C(this,null,function*(){let i=V(t);return qP(i.localStore,e).then(n=>Dr(i,n))})}function s$(t,e,i,n){return C(this,null,function*(){let r=V(t),o=yield function(a,l){let c=V(a),d=V(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",u=>d.vn(u,l).next(h=>h?c.localDocuments.getDocuments(u,h):w.resolve(null)))}(r.localStore,e);o!==null?(i==="pending"?yield Ll(r.remoteStore):i==="acknowledged"||i==="rejected"?(FC(r,e,n||null),OC(r,e),function(a,l){V(V(a).mutationQueue).Mn(l)}(r.localStore,e)):K(),yield Dr(r,o)):T("SyncEngine","Cannot apply mutation batch with id: "+e)})}function a$(t,e){return C(this,null,function*(){let i=V(t);if(pg(i),VC(i),e===!0&&i.Oa!==!0){let n=i.sharedClientState.getAllActiveQueryTargets(),r=yield DM(i,n.toArray());i.Oa=!0,yield Lx(i.remoteStore,!0);for(let o of r)fg(i.remoteStore,o)}else if(e===!1&&i.Oa!==!1){let n=[],r=Promise.resolve();i.Sa.forEach((o,s)=>{i.sharedClientState.isLocalQueryTarget(s)?n.push(s):r=r.then(()=>(Rl(i,s),Dl(i.localStore,s,!0))),Al(i.remoteStore,s)}),yield r,yield DM(i,n),function(s){let a=V(s);a.Ca.forEach((l,c)=>{Al(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new ct(O.comparator)}(i),i.Oa=!1,yield Lx(i.remoteStore,!1)}})}function DM(t,e,i){return C(this,null,function*(){let n=V(t),r=[],o=[];for(let s of e){let a,l=n.Sa.get(s);if(l&&l.length!==0){a=yield Sl(n.localStore,bi(l[0]));for(let c of l){let d=n.wa.get(c),u=yield r$(n,d);u.snapshot&&o.push(u.snapshot)}}else{let c=yield HP(n.localStore,s);a=yield Sl(n.localStore,c),yield PC(n,iO(c),s,!1,a.resumeToken)}r.push(a)}return n.ya.u_(o),r})}function iO(t){return tP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function l$(t){return function(i){return V(V(i).persistence).Bi()}(V(t).localStore)}function c$(t,e,i,n){return C(this,null,function*(){let r=V(t);if(r.Oa)return void T("SyncEngine","Ignoring unexpected query state notification.");let o=r.Sa.get(e);if(o&&o.length>0)switch(i){case"current":case"not-current":{let s=yield qP(r.localStore,nP(o[0])),a=Nu.createSynthesizedRemoteEventForCurrentChange(e,i==="current",Kt.EMPTY_BYTE_STRING);yield Dr(r,s,a);break}case"rejected":yield Dl(r.localStore,e,!0),Rl(r,e,n);break;default:K()}})}function d$(t,e,i){return C(this,null,function*(){let n=pg(t);if(n.Oa){for(let r of e){if(n.Sa.has(r)&&n.sharedClientState.isActiveQueryTarget(r)){T("SyncEngine","Adding an already active target "+r);continue}let o=yield HP(n.localStore,r),s=yield Sl(n.localStore,o);yield PC(n,iO(o),s.targetId,!1,s.resumeToken),fg(n.remoteStore,s)}for(let r of i)n.Sa.has(r)&&(yield Dl(n.localStore,r,!1).then(()=>{Al(n.remoteStore,r),Rl(n,r)}).catch(So))}})}function pg(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xq.bind(null,e),e.ya.u_=qq.bind(null,e.eventManager),e.ya.La=$q.bind(null,e.eventManager),e}function VC(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jq.bind(null,e),e}function u$(t,e,i){let n=V(t);(function(o,s,a){return C(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(m,b){let y=V(m),E=Tt(b.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",j=>y.$r.getBundleMetadata(j,b.id)).then(j=>!!j&&j.createTime.compareTo(E)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(ZP(l));let c=new qx(l,o.localStore,s.serializer),d=yield s.Ba();for(;d;){let h=yield c.sa(d);h&&a._updateProgress(h),d=yield s.Ba()}let u=yield c.complete();return yield Dr(o,u.aa,void 0),yield function(m,b){let y=V(m);return y.persistence.runTransaction("Save bundle","readwrite",E=>y.$r.saveBundleMetadata(E,b))}(o.localStore,l),a._completeWith(u.progress),Promise.resolve(u._a)}catch(l){return cn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(n,e,i).then(r=>{n.sharedClientState.notifyBundleLoaded(r)})}var $u=class{constructor(){this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,i){return null}createIndexBackfillerScheduler(e,i){return null}createLocalStore(e){return jP(this.persistence,new Hp,e.initialUser,this.serializer)}createPersistence(e){return new zp(Up.Hr,this.serializer)}createSharedClientState(e){return new Gp}terminate(){return C(this,null,function*(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ng=class t extends $u{constructor(e,i,n){super(),this.ka=e,this.cacheSizeBytes=i,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){yield Dg(t.prototype,this,"initialize").call(this,e),yield this.ka.initialize(this,e),yield VC(this.ka.syncEngine),yield Ll(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return jP(this.persistence,new Hp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,i){let n=this.persistence.referenceDelegate.garbageCollector;return new ux(n,e.asyncQueue,i)}createIndexBackfillerScheduler(e,i){let n=new Aw(i,this.persistence);return new Dw(e.asyncQueue,n)}createPersistence(e){let i=TC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Ix(this.synchronizeTabs,i,e.clientId,n,e.asyncQueue,WP(),pp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Gp}},Yx=class t extends ng{constructor(e,i){super(e,i,!1),this.ka=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){return C(this,null,function*(){yield Dg(t.prototype,this,"initialize").call(this,e);let i=this.ka.syncEngine;this.sharedClientState instanceof Tu&&(this.sharedClientState.syncEngine={Zs:s$.bind(null,i),Xs:c$.bind(null,i),eo:d$.bind(null,i),Bi:l$.bind(null,i),Ys:o$.bind(null,i)},yield this.sharedClientState.start()),yield this.persistence.fi(n=>C(this,null,function*(){yield a$(this.ka.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let i=WP();if(!Tu.D(i))throw new I(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let n=TC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tu(i,e.asyncQueue,n,e.clientId,e.initialUser)}},Wu=class{initialize(e,i){return C(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>SM(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=i$.bind(null,this.syncEngine),yield Lx(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new zx}()}createDatastore(e){let i=Ju(e.databaseInfo.databaseId),n=function(o){return new Mx(o)}(e.databaseInfo);return function(o,s,a,l){return new Fx(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,n,i)}createRemoteStore(e){return function(n,r,o,s,a){return new Vx(n,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,i=>SM(this.syncEngine,i,0),function(){return Kp.D()?new Kp:new kx}())}createSyncEngine(e,i){return function(r,o,s,a,l,c,d){let u=new Gx(r,o,s,a,l,c);return d&&(u.Oa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return C(this,null,function*(){var e;yield function(n){return C(this,null,function*(){let r=V(n);T("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield Vl(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function AM(t,e=10240){let i=0;return{read(){return C(this,null,function*(){if(i<t.byteLength){let r={value:t.slice(i,i+e),done:!1};return i+=e,r}return{done:!0}})},cancel(){return C(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ml=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Et("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}};var Qx=class{constructor(e,i){this.Ka=e,this.serializer=i,this.metadata=new Ft,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(n=>{n&&n.ra()?this.metadata.resolve(n.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.na)}`))},n=>this.metadata.reject(n))}close(){return this.Ka.cancel()}getMetadata(){return C(this,null,function*(){return this.metadata.promise})}Ba(){return C(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return C(this,null,function*(){let e=yield this.Wa();if(e===null)return null;let i=this.$a.decode(e),n=Number(i);isNaN(n)&&this.Ga(`length string (${i}) is not valid number`);let r=yield this.za(n);return new Hx(JSON.parse(r),e.length+n)})}ja(){return this.buffer.findIndex(e=>e===123)}Wa(){return C(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");let i=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),i})}za(e){return C(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let i=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),i})}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){return C(this,null,function*(){let e=yield this.Ka.read();if(!e.done){let i=new Uint8Array(this.buffer.length+e.value.length);i.set(this.buffer),i.set(e.value,this.buffer.length),this.buffer=i}return e.done})}};var Xx=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return C(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new I(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let i=yield function(r,o){return C(this,null,function*(){let s=V(r),a={documents:o.map(u=>Lu(s.serializer,u))},l=yield s.vo("BatchGetDocuments",s.serializer.databaseId,Pe.emptyPath(),a,o.length),c=new Map;l.forEach(u=>{let h=_q(s.serializer,u);c.set(h.key.toString(),h)});let d=[];return o.forEach(u=>{let h=c.get(u.toString());ne(!!h),d.push(h)}),d})}(this.datastore,e);return i.forEach(n=>this.recordVersion(n)),i})}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Io(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return C(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,n)=>{let r=O.fromPath(n);this.mutations.push(new Pu(r,this.precondition(r)))}),yield function(n,r){return C(this,null,function*(){let o=V(n),s={writes:r.map(a=>ju(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,Pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw K();i=se.min()}let n=this.readVersions.get(e.key.toString());if(n){if(!i.isEqual(n))throw new I(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){let i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?i.isEqual(se.min())?vt.exists(!1):vt.updateTime(i):vt.none()}preconditionForUpdate(e){let i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(se.min()))throw new I(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(i)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Zx=class{constructor(e,i,n,r,o){this.asyncQueue=e,this.datastore=i,this.options=n,this.updateFunction=r,this.deferred=o,this.Ja=n.maxAttempts,this.jo=new Hu(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>C(this,null,function*(){let e=new Xx(this.datastore),i=this.Xa(e);i&&i.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(r=>{this.eu(r)}))}).catch(n=>{this.eu(n)})}))}Xa(e){try{let i=this.updateFunction(e);return!Yu(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){let i=e.code;return i==="aborted"||i==="failed-precondition"||i==="already-exists"||!_P(i)}return!1}};var Jx=class{constructor(e,i,n,r){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=n,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,o=>C(this,null,function*(){T("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,o=>(T("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new I(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ft;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){let n=Bl(i,"Failed to shutdown persistence");e.reject(n)}})),e.promise}};function gp(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");let i=t.configuration;yield e.initialize(i);let n=i.initialUser;t.setCredentialChangeListener(r=>C(this,null,function*(){n.isEqual(r)||(yield BP(e.localStore,r),n=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function eC(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let i=yield LC(t);T("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(i,t.configuration),t.setCredentialChangeListener(n=>IM(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,r)=>IM(e.remoteStore,r)),t._onlineComponents=e})}function nO(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function LC(t){return C(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){T("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gp(t,t._uninitializedComponentsProvider._offline)}catch(e){let i=e;if(!nO(i))throw i;cn("Error using user provided cache. Falling back to memory cache: "+i),yield gp(t,new $u)}}else T("FirestoreClient","Using default OfflineComponentProvider"),yield gp(t,new $u);return t._offlineComponents})}function gg(t){return C(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(T("FirestoreClient","Using user provided OnlineComponentProvider"),yield eC(t,t._uninitializedComponentsProvider._online)):(T("FirestoreClient","Using default OnlineComponentProvider"),yield eC(t,new Wu))),t._onlineComponents})}function rO(t){return LC(t).then(e=>e.persistence)}function jC(t){return LC(t).then(e=>e.localStore)}function oO(t){return gg(t).then(e=>e.remoteStore)}function BC(t){return gg(t).then(e=>e.syncEngine)}function h$(t){return gg(t).then(e=>e.datastore)}function Pl(t){return C(this,null,function*(){let e=yield gg(t),i=e.eventManager;return i.onListen=Wq.bind(null,e.syncEngine),i.onUnlisten=Kq.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Gq.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=Yq.bind(null,e.syncEngine),i})}function m$(t){return t.asyncQueue.enqueue(()=>C(this,null,function*(){let e=yield rO(t),i=yield oO(t);return e.setNetworkEnabled(!0),function(r){let o=V(r);return o.v_.delete(0),eh(o)}(i)}))}function f$(t){return t.asyncQueue.enqueue(()=>C(this,null,function*(){let e=yield rO(t),i=yield oO(t);return e.setNetworkEnabled(!1),function(r){return C(this,null,function*(){let o=V(r);o.v_.add(0),yield Vl(o),o.x_.set("Offline")})}(i)}))}function p$(t,e){let i=new Ft;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(r,o,s){return C(this,null,function*(){try{let a=yield function(c,d){let u=V(c);return u.persistence.runTransaction("read document","readonly",h=>u.localDocuments.getDocument(h,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new I(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Bl(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield jC(t),e,i)})),i.promise}function sO(t,e,i={}){let n=new Ft;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(o,s,a,l,c){let d=new Ml({next:h=>{s.enqueueAndForget(()=>RC(o,u));let m=h.docs.has(a);!m&&h.fromCache?c.reject(new I(x.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&l&&l.source==="server"?c.reject(new I(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new qu(Nl(a.path),d,{includeMetadataChanges:!0,ta:!0});return kC(o,u)}(yield Pl(t),t.asyncQueue,e,i,n)})),n.promise}function g$(t,e){let i=new Ft;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(r,o,s){return C(this,null,function*(){try{let a=yield qp(r,o,!0),l=new ig(o,a.hs),c=l.Ta(a.documents),d=l.applyChanges(c,!1);s.resolve(d.snapshot)}catch(a){let l=Bl(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield jC(t),e,i)})),i.promise}function aO(t,e,i={}){let n=new Ft;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(o,s,a,l,c){let d=new Ml({next:h=>{s.enqueueAndForget(()=>RC(o,u)),h.fromCache&&l.source==="server"?c.reject(new I(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new qu(a,d,{includeMetadataChanges:!0,ta:!0});return kC(o,u)}(yield Pl(t),t.asyncQueue,e,i,n)})),n.promise}function _$(t,e){let i=new Ml(e);return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(r,o){V(r).W_.add(o),o.next()}(yield Pl(t),i)})),()=>{i.Qa(),t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(r,o){V(r).W_.delete(o)}(yield Pl(t),i)}))}}function b$(t,e,i,n){let r=function(s,a){let l;return l=typeof s=="string"?vP().encode(s):s,function(d,u){return new Qx(d,u)}(function(d,u){if(d instanceof Uint8Array)return AM(d,u);if(d instanceof ArrayBuffer)return AM(new Uint8Array(d),u);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(i,Ju(e));t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){u$(yield BC(t),r,n)}))}function v$(t,e){return t.asyncQueue.enqueue(()=>C(this,null,function*(){return function(n,r){let o=V(n);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield jC(t),e)}))}function lO(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var kM=new Map;function zC(t,e,i){if(!i)throw new I(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UC(t,e,i,n){if(e===!0&&n===!0)throw new I(x.INVALID_ARGUMENT,`${t} and ${i} cannot be used together.`)}function RM(t){if(!O.isDocumentKey(t))throw new I(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function MM(t){if(O.isDocumentKey(t))throw new I(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function Oe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new I(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let i=_g(t);throw new I(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return t}function cO(t,e){if(e<=0)throw new I(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var rg=class{constructor(e){var i,n;if(e.host===void 0){if(e.ssl!==void 0)throw new I(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(i=e.ssl)===null||i===void 0||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new I(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lO((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new I(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new I(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new I(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Os=class{constructor(e,i,n,r){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new I(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new I(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rg(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new bw;switch(n.type){case"firstParty":return new xw(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new I(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){let n=kM.get(i);n&&(T("ComponentProvider","Removing Datastore"),kM.delete(i),n.terminate())}(this),Promise.resolve()}};function dO(t,e,i,n={}){var r;let o=(t=Oe(t,Os))._getSettings(),s=`${e}:${i}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=Ot.MOCK_USER;else{a=vh(n.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new I(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new vw(new _p(a,l))}}var ii=class t{constructor(e,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},st=class t{constructor(e,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},tr=class t extends ii{constructor(e,i,n){super(e,i,Nl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new O(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function HC(t,e,...i){if(t=De(t),zC("collection","path",e),t instanceof Os){let n=Pe.fromString(e,...i);return MM(n),new tr(t,null,n)}{if(!(t instanceof st||t instanceof tr))throw new I(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=t._path.child(Pe.fromString(e,...i));return MM(n),new tr(t.firestore,null,n)}}function uO(t,e){if(t=Oe(t,Os),zC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new I(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ii(t,null,function(n){return new Cn(Pe.emptyPath(),n)}(e))}function th(t,e,...i){if(t=De(t),arguments.length===1&&(e=bp.newId()),zC("doc","path",e),t instanceof Os){let n=Pe.fromString(e,...i);return RM(n),new st(t,null,new O(n))}{if(!(t instanceof st||t instanceof tr))throw new I(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=t._path.child(Pe.fromString(e,...i));return RM(n),new st(t.firestore,t instanceof tr?t.converter:null,new O(n))}}function qC(t,e){return t=De(t),e=De(e),(t instanceof st||t instanceof tr)&&(e instanceof st||e instanceof tr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $C(t,e){return t=De(t),e=De(e),t instanceof ii&&e instanceof ii&&t.firestore===e.firestore&&Xu(t._query,e._query)&&t.converter===e.converter}var tC=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Hu(this,"async_queue_retry"),this.cu=()=>{let i=pp();i&&T("AsyncQueue","Visibility state changed to "+i.visibilityState),this.jo.Ko()};let e=pp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let i=pp();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let i=new Ft;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return C(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Do(e))throw e;T("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let i=this.nu.then(()=>(this._u=!0,e().catch(n=>{this.ou=n,this._u=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Et("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this._u=!1,n))));return this.nu=i,i}enqueueAfterDelay(e,i,n){this.lu(),this.uu.indexOf(e)>-1&&(i=0);let r=jx.createAndSchedule(this,e,i,n,o=>this.Iu(o));return this.su.push(r),r}lu(){this.ou&&K()}verifyOperationInProgress(){}Tu(){return C(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let i of this.su)if(i.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((i,n)=>i.targetTimeMs-n.targetTimeMs);for(let i of this.su)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let i=this.su.indexOf(e);this.su.splice(i,1)}};function iC(t){return function(i,n){if(typeof i!="object"||i===null)return!1;let r=i;for(let o of n)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var nC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ft,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,n){this._progressObserver={next:e,error:i,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var hO=-1,ut=class extends Os{constructor(e,i,n,r){super(e,i,n,r),this.type="firestore",this._queue=function(){return new tC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mO(this),this._firestoreClient.terminate()}};function zt(t){return t._firestoreClient||mO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mO(t){var e,i,n;let r=t._freezeSettings(),o=function(a,l,c,d){return new kw(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lO(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Jx(t._authCredentials,t._appCheckCredentials,t._queue,o),!((i=r.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function fO(t,e){CO(t=Oe(t,ut));let i=zt(t);if(i._uninitializedComponentsProvider)throw new I(x.FAILED_PRECONDITION,"SDK cache is already specified.");cn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Wu;return gO(i,r,new ng(r,n.cacheSizeBytes,e?.forceOwnership))}function pO(t){CO(t=Oe(t,ut));let e=zt(t);if(e._uninitializedComponentsProvider)throw new I(x.FAILED_PRECONDITION,"SDK cache is already specified.");cn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),n=new Wu;return gO(e,n,new Yx(n,i.cacheSizeBytes))}function gO(t,e,i){let n=new Ft;return t.asyncQueue.enqueue(()=>C(this,null,function*(){try{yield gp(t,i),yield eC(t,e),n.resolve()}catch(r){let o=r;if(!nO(o))throw o;cn("Error enabling indexeddb cache. Falling back to memory cache: "+o),n.reject(o)}})).then(()=>n.promise)}function _O(t){if(t._initialized&&!t._terminated)throw new I(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ft;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{yield function(n){return C(this,null,function*(){if(!Cr.D())return Promise.resolve();let r=n+"main";yield Cr.delete(r)})}(TC(t._databaseId,t._persistenceKey)),e.resolve()}catch(i){e.reject(i)}})),e.promise}function bO(t){return function(i){let n=new Ft;return i.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return e$(yield BC(i),n)})),n.promise}(zt(t=Oe(t,ut)))}function vO(t){return m$(zt(t=Oe(t,ut)))}function yO(t){return f$(zt(t=Oe(t,ut)))}function wO(t,e){let i=zt(t=Oe(t,ut)),n=new nC;return b$(i,t._databaseId,e,n),n}function xO(t,e){return v$(zt(t=Oe(t,ut)),e).then(i=>i?new ii(t,null,i.query):null)}function CO(t){if(t._initialized||t._terminated)throw new I(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var or=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Kt.fromBase64String(e))}catch(i){throw new I(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new t(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var In=class{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new I(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Tr=class{constructor(e){this._methodName=e}};var Fs=class{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new I(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new I(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var y$=/^__.*__$/,rC=class{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return this.fieldMask!==null?new En(e,this.data,this.fieldMask,i,this.fieldTransforms):new Eo(e,this.data,i,this.fieldTransforms)}},og=class{constructor(e,i,n){this.data=e,this.fieldMask=i,this.fieldTransforms=n}toMutation(e,i){return new En(e,this.data,this.fieldMask,i,this.fieldTransforms)}};function EO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var sg=class t{constructor(e,i,n,r,o,s){this.settings=e,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var i;let n=(i=this.path)===null||i===void 0?void 0:i.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var i;let n=(i=this.path)===null||i===void 0?void 0:i.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return ag(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(EO(this.Vu)&&y$.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},oC=class{constructor(e,i,n){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=n||Ju(e)}Cu(e,i,n,r=!1){return new sg({Vu:e,methodName:i,Du:n,path:It.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function js(t){let e=t._freezeSettings(),i=Ju(t._databaseId);return new oC(t._databaseId,!!e.ignoreUndefinedProperties,i)}function bg(t,e,i,n,r,o={}){let s=t.Cu(o.merge||o.mergeFields?2:0,e,i,r);KC("Data must be an object, but it was:",s,n);let a=SO(n,s),l,c;if(o.merge)l=new zi(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let u of o.mergeFields){let h=dC(e,u,i);if(!s.contains(h))throw new I(x.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);AO(d,h)||d.push(h)}l=new zi(d),c=s.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,c=s.fieldTransforms;return new rC(new di(a),l,c)}var Gu=class t extends Tr{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function IO(t,e,i){return new sg({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:i},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var sC=class t extends Tr{_toFieldTransform(e){return new Rs(e.path,new xo)}isEqual(e){return e instanceof t}},aC=class t extends Tr{constructor(e,i){super(e),this.vu=i}_toFieldTransform(e){let i=IO(this,e,!0),n=this.vu.map(o=>Bs(o,i)),r=new Er(n);return new Rs(e.path,r)}isEqual(e){return e instanceof t&&Yg(this.vu,e.vu)}},lC=class t extends Tr{constructor(e,i){super(e),this.vu=i}_toFieldTransform(e){let i=IO(this,e,!0),n=this.vu.map(o=>Bs(o,i)),r=new Ir(n);return new Rs(e.path,r)}isEqual(e){return e instanceof t&&Yg(this.vu,e.vu)}},cC=class t extends Tr{constructor(e,i){super(e),this.Fu=i}_toFieldTransform(e){let i=new Co(e.serializer,dP(e.serializer,this.Fu));return new Rs(e.path,i)}isEqual(e){return e instanceof t&&this.Fu===e.Fu}};function WC(t,e,i,n){let r=t.Cu(1,e,i);KC("Data must be an object, but it was:",r,n);let o=[],s=di.empty();Ls(n,(l,c)=>{let d=YC(e,l,i);c=De(c);let u=r.yu(d);if(c instanceof Gu)o.push(d);else{let h=Bs(c,u);h!=null&&(o.push(d),s.set(d,h))}});let a=new zi(o);return new og(s,a,r.fieldTransforms)}function GC(t,e,i,n,r,o){let s=t.Cu(1,e,i),a=[dC(e,n,i)],l=[r];if(o.length%2!=0)throw new I(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(dC(e,o[h])),l.push(o[h+1]);let c=[],d=di.empty();for(let h=a.length-1;h>=0;--h)if(!AO(c,a[h])){let m=a[h],b=l[h];b=De(b);let y=s.yu(m);if(b instanceof Gu)c.push(m);else{let E=Bs(b,y);E!=null&&(c.push(m),d.set(m,E))}}let u=new zi(c);return new og(d,u,s.fieldTransforms)}function TO(t,e,i,n=!1){return Bs(i,t.Cu(n?4:3,e))}function Bs(t,e){if(DO(t=De(t)))return KC("Unsupported field value:",e,t),SO(t,e);if(t instanceof Tr)return function(n,r){if(!EO(r.Vu))throw r.Su(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Su(`${n._methodName}() is not currently supported inside arrays`);let o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(n,r){let o=[],s=0;for(let a of n){let l=Bs(a,r.wu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,r){if((n=De(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dP(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let o=ft.fromDate(n);return{timestampValue:El(r.serializer,o)}}if(n instanceof ft){let o=new ft(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:El(r.serializer,o)}}if(n instanceof Fs)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof or)return{bytesValue:yP(r.serializer,n._byteString)};if(n instanceof st){let o=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw r.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:CC(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Su(`Unsupported field value: ${_g(n)}`)}(t,e)}function SO(t,e){let i={};return WM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(n,r)=>{let o=Bs(r,e.fu(n));o!=null&&(i[n]=o)}),{mapValue:{fields:i}}}function DO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Fs||t instanceof or||t instanceof st||t instanceof Tr)}function KC(t,e,i){if(!DO(i)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(i)){let n=_g(i);throw n==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+n)}}function dC(t,e,i){if((e=De(e))instanceof In)return e._internalPath;if(typeof e=="string")return YC(t,e);throw ag("Field path arguments must be of type string or ",t,!1,void 0,i)}var w$=new RegExp("[~\\*/\\[\\]]");function YC(t,e,i){if(e.search(w$)>=0)throw ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,i);try{return new In(...e.split("."))._internalPath}catch{throw ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,i)}}function ag(t,e,i,n,r){let o=n&&!n.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;i&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${n}`),s&&(l+=` in document ${r}`),l+=")"),new I(x.INVALID_ARGUMENT,a+t+l)}function AO(t,e){return t.some(i=>i.isEqual(e))}var Ns=class{constructor(e,i,n,r,o){this._firestore=e,this._userDataWriter=i,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new uC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let i=this._document.data.field(vg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}},uC=class extends Ns{data(){return super.data()}};function vg(t,e){return typeof e=="string"?YC(t,e):e instanceof In?e._internalPath:e._delegate._internalPath}function kO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new I(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ku=class{},Vs=class extends Ku{};function Ar(t,e,...i){let n=[];e instanceof Ku&&n.push(e),n=n.concat(i),function(o){let s=o.filter(l=>l instanceof hC).length,a=o.filter(l=>l instanceof lg).length;if(s>1||s>0&&a>0)throw new I(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)t=r._apply(t);return t}var lg=class t extends Vs{constructor(e,i,n){super(),this._field=e,this._op=i,this._value=n,this.type="where"}static _create(e,i,n){return new t(e,i,n)}_apply(e){let i=this._parse(e);return BO(e._query,i),new ii(e.firestore,e.converter,Hw(e._query,i))}_parse(e){let i=js(e.firestore);return function(o,s,a,l,c,d,u){let h;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new I(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){OM(u,d);let m=[];for(let b of u)m.push(PM(l,o,b));h={arrayValue:{values:m}}}else h=PM(l,o,u)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||OM(u,d),h=TO(a,s,u,d==="in"||d==="not-in");return Re.create(c,d,h)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}};function RO(t,e,i){let n=e,r=vg("where",t);return lg._create(r,n,i)}var hC=class t extends Ku{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new t(e,i)}_parse(e){let i=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return i.length===1?i[0]:Ge.create(i,this._getOperator())}_apply(e){let i=this._parse(e);return i.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)BO(s,l),s=Hw(s,l)}(e._query,i),new ii(e.firestore,e.converter,Hw(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var mC=class t extends Vs{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new t(e,i)}_apply(e){let i=function(r,o,s){if(r.startAt!==null)throw new I(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new I(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new As(o,s)}(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Cn(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}};function MO(t,e="asc"){let i=e,n=vg("orderBy",t);return mC._create(n,i)}var cg=class t extends Vs{constructor(e,i,n){super(),this.type=e,this._limit=i,this._limitType=n}static _create(e,i,n){return new t(e,i,n)}_apply(e){return new ii(e.firestore,e.converter,Dp(e._query,this._limit,this._limitType))}};function PO(t){return cO("limit",t),cg._create("limit",t,"F")}function OO(t){return cO("limitToLast",t),cg._create("limitToLast",t,"L")}var dg=class t extends Vs{constructor(e,i,n){super(),this.type=e,this._docOrFields=i,this._inclusive=n}static _create(e,i,n){return new t(e,i,n)}_apply(e){let i=jO(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,function(r,o){return new Cn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,i))}};function FO(...t){return dg._create("startAt",t,!0)}function NO(...t){return dg._create("startAfter",t,!1)}var ug=class t extends Vs{constructor(e,i,n){super(),this.type=e,this._docOrFields=i,this._inclusive=n}static _create(e,i,n){return new t(e,i,n)}_apply(e){let i=jO(e,this.type,this._docOrFields,this._inclusive);return new ii(e.firestore,e.converter,function(r,o){return new Cn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,i))}};function VO(...t){return ug._create("endBefore",t,!1)}function LO(...t){return ug._create("endAt",t,!0)}function jO(t,e,i,n){if(i[0]=De(i[0]),i[0]instanceof Ns)return function(o,s,a,l,c){if(!l)throw new I(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let u of gl(o))if(u.field.isKeyField())d.push(Ds(s,l.key));else{let h=l.data.field(u.field);if(mg(h))throw new I(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let m=u.field.canonicalString();throw new I(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new nr(d,c)}(t._query,t.firestore._databaseId,e,i[0]._document,n);{let r=js(t.firestore);return function(s,a,l,c,d,u){let h=s.explicitOrderBy;if(d.length>h.length)throw new I(x.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let b=0;b<d.length;b++){let y=d[b];if(h[b].field.isKeyField()){if(typeof y!="string")throw new I(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!wC(s)&&y.indexOf("/")!==-1)throw new I(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);let E=s.path.child(Pe.fromString(y));if(!O.isDocumentKey(E))throw new I(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);let j=new O(E);m.push(Ds(a,j))}else{let E=TO(l,c,y);m.push(E)}}return new nr(m,u)}(t._query,t.firestore._databaseId,r,e,i,n)}}function PM(t,e,i){if(typeof(i=De(i))=="string"){if(i==="")throw new I(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wC(e)&&i.indexOf("/")!==-1)throw new I(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);let n=e.path.child(Pe.fromString(i));if(!O.isDocumentKey(n))throw new I(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ds(t,new O(n))}if(i instanceof st)return Ds(t,i._key);throw new I(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(i)}.`)}function OM(t,e){if(!Array.isArray(t)||t.length===0)throw new I(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BO(t,e){let i=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new I(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new I(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}var Ol=class{convertValue(e,i="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw K()}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){let n={};return Ls(e,(r,o)=>{n[r]=this.convertValue(o,i)}),n}convertGeoPoint(e){return new Fs(bt(e.latitude),bt(e.longitude))}convertArray(e,i){return(e.values||[]).map(n=>this.convertValue(n,i))}convertServerTimestamp(e,i){switch(i){case"previous":let n=vC(e);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){let i=bo(e);return new ft(i.seconds,i.nanos)}convertDocumentKey(e,i){let n=Pe.fromString(e);ne(RP(n));let r=new yo(n.get(1),n.get(3)),o=new O(n.popFirst(5));return r.isEqual(i)||Et(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),o}};function yg(t,e,i){let n;return n=t?i&&(i.merge||i.mergeFields)?t.toFirestore(e,i):t.toFirestore(e):e,n}var fC=class extends Ol{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){let i=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,i)}};var xr=class{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},un=class extends Ns{constructor(e,i,n,r,o,s){super(e,i,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let i=new go(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){let n=this._document.data.field(vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}},go=class extends un{data(e={}){return super.data(e)}},Tn=class{constructor(e,i,n,r){this._firestore=e,this._userDataWriter=i,this._snapshot=r,this.metadata=new xr(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(n=>{e.call(i,new go(this._firestore,this._userDataWriter,n.key,n,new xr(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new I(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new go(r._firestore,r._userDataWriter,a.doc.key,a.doc,new xr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new go(r._firestore,r._userDataWriter,a.doc.key,a.doc,new xr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,d=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:x$(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}};function x$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function QC(t,e){return t instanceof un&&e instanceof un?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Tn&&e instanceof Tn&&t._firestore===e._firestore&&$C(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function zO(t){t=Oe(t,st);let e=Oe(t.firestore,ut);return sO(zt(e),t._key).then(i=>eE(e,t,i))}var Sr=class extends Ol{constructor(e){super(),this.firestore=e}convertBytes(e){return new or(e)}convertReference(e){let i=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,i)}};function UO(t){t=Oe(t,st);let e=Oe(t.firestore,ut),i=zt(e),n=new Sr(e);return p$(i,t._key).then(r=>new un(e,n,t._key,r,new xr(r!==null&&r.hasLocalMutations,!0),t.converter))}function HO(t){t=Oe(t,st);let e=Oe(t.firestore,ut);return sO(zt(e),t._key,{source:"server"}).then(i=>eE(e,t,i))}function qO(t){t=Oe(t,ii);let e=Oe(t.firestore,ut),i=zt(e),n=new Sr(e);return kO(t._query),aO(i,t._query).then(r=>new Tn(e,n,t,r))}function $O(t){t=Oe(t,ii);let e=Oe(t.firestore,ut),i=zt(e),n=new Sr(e);return g$(i,t._query).then(r=>new Tn(e,n,t,r))}function WO(t){t=Oe(t,ii);let e=Oe(t.firestore,ut),i=zt(e),n=new Sr(e);return aO(i,t._query,{source:"server"}).then(r=>new Tn(e,n,t,r))}function XC(t,e,i){t=Oe(t,st);let n=Oe(t.firestore,ut),r=yg(t.converter,e,i);return zl(n,[bg(js(n),"setDoc",t._key,r,t.converter!==null,i).toMutation(t._key,vt.none())])}function ZC(t,e,i,...n){t=Oe(t,st);let r=Oe(t.firestore,ut),o=js(r),s;return s=typeof(e=De(e))=="string"||e instanceof In?GC(o,"updateDoc",t._key,e,i,n):WC(o,"updateDoc",t._key,e),zl(r,[s.toMutation(t._key,vt.exists(!0))])}function GO(t){return zl(Oe(t.firestore,ut),[new Io(t._key,vt.none())])}function KO(t,e){let i=Oe(t.firestore,ut),n=th(t),r=yg(t.converter,e);return zl(i,[bg(js(t.firestore),"addDoc",n._key,r,t.converter!==null,{}).toMutation(n._key,vt.exists(!1))]).then(()=>n)}function JC(t,...e){var i,n,r;t=De(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||iC(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(iC(e[s])){let u=e[s];e[s]=(i=u.next)===null||i===void 0?void 0:i.bind(u),e[s+1]=(n=u.error)===null||n===void 0?void 0:n.bind(u),e[s+2]=(r=u.complete)===null||r===void 0?void 0:r.bind(u)}let l,c,d;if(t instanceof st)c=Oe(t.firestore,ut),d=Nl(t._key.path),l={next:u=>{e[s]&&e[s](eE(c,t,u))},error:e[s+1],complete:e[s+2]};else{let u=Oe(t,ii);c=Oe(u.firestore,ut),d=u._query;let h=new Sr(c);l={next:m=>{e[s]&&e[s](new Tn(c,h,u,m))},error:e[s+1],complete:e[s+2]},kO(t._query)}return function(h,m,b,y){let E=new Ml(y),j=new qu(m,E,b);return h.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return kC(yield Pl(h),j)})),()=>{E.Qa(),h.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return RC(yield Pl(h),j)}))}}(zt(c),d,a,l)}function YO(t,e){return _$(zt(t=Oe(t,ut)),iC(e)?e:{next:e})}function zl(t,e){return function(n,r){let o=new Ft;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return Qq(yield BC(n),r,o)})),o.promise}(zt(t),e)}function eE(t,e,i){let n=i.docs.get(e._key),r=new Sr(t);return new un(t,r,e._key,n,new xr(i.hasPendingWrites,i.fromCache),e.converter)}var C$={maxAttempts:5};var hg=class{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=js(e)}set(e,i,n){this._verifyNotCommitted();let r=fo(e,this._firestore),o=yg(r.converter,i,n),s=bg(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,n);return this._mutations.push(s.toMutation(r._key,vt.none())),this}update(e,i,n,...r){this._verifyNotCommitted();let o=fo(e,this._firestore),s;return s=typeof(i=De(i))=="string"||i instanceof In?GC(this._dataReader,"WriteBatch.update",o._key,i,n,r):WC(this._dataReader,"WriteBatch.update",o._key,i),this._mutations.push(s.toMutation(o._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();let i=fo(e,this._firestore);return this._mutations=this._mutations.concat(new Io(i._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new I(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function fo(t,e){if((t=De(t)).firestore!==e)throw new I(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pC=class extends class{constructor(i,n){this._firestore=i,this._transaction=n,this._dataReader=js(i)}get(i){let n=fo(i,this._firestore),r=new fC(this._firestore);return this._transaction.lookup([n._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new Ns(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Ns(this._firestore,r,n._key,null,n.converter);throw K()})}set(i,n,r){let o=fo(i,this._firestore),s=yg(o.converter,n,r),a=bg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(i,n,r,...o){let s=fo(i,this._firestore),a;return a=typeof(n=De(n))=="string"||n instanceof In?GC(this._dataReader,"Transaction.update",s._key,n,r,o):WC(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(i){let n=fo(i,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){let i=fo(e,this._firestore),n=new Sr(this._firestore);return super.get(e).then(r=>new un(this._firestore,n,i._key,r._document,new xr(!1,!1),i.converter))}};function QO(t,e,i){t=Oe(t,ut);let n=Object.assign(Object.assign({},C$),i);return function(o){if(o.maxAttempts<1)throw new I(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(o,s,a){let l=new Ft;return o.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){let c=yield h$(o);new Zx(o.asyncQueue,c,a,s,l).Ya()})),l.promise}(zt(t),r=>e(new pC(t,r)),n)}function XO(){return new Gu("deleteField")}function ZO(){return new sC("serverTimestamp")}function JO(...t){return new aC("arrayUnion",t)}function eF(...t){return new lC("arrayRemove",t)}function tF(t){return new cC("increment",t)}(function(e,i=!0){(function(r){Fl=r})(Eh),Bo(new Ri("firestore",(n,{instanceIdentifier:r,options:o})=>{let s=n.getProvider("app").getImmediate(),a=new ut(new yw(n.getProvider("auth-internal")),new Ew(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new I(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(c.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:i},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),hi(FR,"4.5.1",e),hi(FR,"4.5.1","esm2017")})();var E$="@firebase/firestore-compat",I$="0.3.28";function sE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new I("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function iF(){if(typeof Uint8Array>"u")throw new I("unimplemented","Uint8Arrays are not available in this environment.")}function nF(){if(!GM())throw new I("unimplemented","Blobs are unavailable in Firestore in this environment.")}var wg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return nF(),new t(or.fromBase64String(e))}static fromUint8Array(e){return iF(),new t(or.fromUint8Array(e))}toBase64(){return nF(),this._delegate.toBase64()}toUint8Array(){return iF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function tE(t){return T$(t,["next","error","complete"])}function T$(t,e){if(typeof t!="object"||t===null)return!1;let i=t;for(let n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}var iE=class{enableIndexedDbPersistence(e,i){return fO(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return pO(e._delegate)}clearIndexedDbPersistence(e){return _O(e._delegate)}},xg=class{constructor(e,i,n){this._delegate=i,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&cn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},i),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,i,n={}){dO(this._delegate,e,i,n)}enableNetwork(){return vO(this._delegate)}disableNetwork(){return yO(this._delegate)}enablePersistence(e){let i=!1,n=!1;return e&&(i=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,UC("synchronizeTabs",i,"experimentalForceOwningTab",n)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bO(this._delegate)}onSnapshotsInSync(e){return YO(this._delegate,e)}get app(){if(!this._appCompat)throw new I("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ql(this,HC(this._delegate,e))}catch(i){throw vi(i,"collection()","Firestore.collection()")}}doc(e){try{return new sr(this,th(this._delegate,e))}catch(i){throw vi(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qs(this,uO(this._delegate,e))}catch(i){throw vi(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return QO(this._delegate,i=>e(new Cg(this,i)))}batch(){return zt(this._delegate),new Eg(new hg(this._delegate,e=>zl(this._delegate,e)))}loadBundle(e){return wO(this._delegate,e)}namedQuery(e){return xO(this._delegate,e).then(i=>i?new qs(this,i):null)}},Ul=class extends Ol{constructor(e){super(),this.firestore=e}convertBytes(e){return new wg(new or(e))}convertReference(e){let i=this.convertDocumentKey(e,this.firestore._databaseId);return sr.forKey(i,this.firestore,null)}};function S$(t){FM(t)}var Cg=class{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new Ul(e)}get(e){let i=zs(e);return this._delegate.get(i).then(n=>new Us(this._firestore,new un(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,i.converter)))}set(e,i,n){let r=zs(e);return n?(sE("Transaction.set",n),this._delegate.set(r,i,n)):this._delegate.set(r,i),this}update(e,i,n,...r){let o=zs(e);return arguments.length===2?this._delegate.update(o,i):this._delegate.update(o,i,n,...r),this}delete(e){let i=zs(e);return this._delegate.delete(i),this}},Eg=class{constructor(e){this._delegate=e}set(e,i,n){let r=zs(e);return n?(sE("WriteBatch.set",n),this._delegate.set(r,i,n)):this._delegate.set(r,i),this}update(e,i,n,...r){let o=zs(e);return arguments.length===2?this._delegate.update(o,i):this._delegate.update(o,i,n,...r),this}delete(e){let i=zs(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}},Hl=class t{constructor(e,i,n){this._firestore=e,this._userDataWriter=i,this._delegate=n}fromFirestore(e,i){let n=new go(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hs(this._firestore,n),i??{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){let n=t.INSTANCES,r=n.get(e);r||(r=new WeakMap,n.set(e,r));let o=r.get(i);return o||(o=new t(e,new Ul(e),i),r.set(i,o)),o}};Hl.INSTANCES=new WeakMap;var sr=class t{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Ul(e)}static forPath(e,i,n){if(e.length%2!==0)throw new I("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(i,new st(i._delegate,n,new O(e)))}static forKey(e,i,n){return new t(i,new st(i._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ql(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ql(this.firestore,HC(this._delegate,e))}catch(i){throw vi(i,"collection()","DocumentReference.collection()")}}isEqual(e){return e=De(e),e instanceof st?qC(this._delegate,e):!1}set(e,i){i=sE("DocumentReference.set",i);try{return i?XC(this._delegate,e,i):XC(this._delegate,e)}catch(n){throw vi(n,"setDoc()","DocumentReference.set()")}}update(e,i,...n){try{return arguments.length===1?ZC(this._delegate,e):ZC(this._delegate,e,i,...n)}catch(r){throw vi(r,"updateDoc()","DocumentReference.update()")}}delete(){return GO(this._delegate)}onSnapshot(...e){let i=rF(e),n=oF(e,r=>new Us(this.firestore,new un(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return JC(this._delegate,i,n)}get(e){let i;return e?.source==="cache"?i=UO(this._delegate):e?.source==="server"?i=HO(this._delegate):i=zO(this._delegate),i.then(n=>new Us(this.firestore,new un(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function vi(t,e,i){return t.message=t.message.replace(e,i),t}function rF(t){for(let e of t)if(typeof e=="object"&&!tE(e))return e;return{}}function oF(t,e){var i,n;let r;return tE(t[0])?r=t[0]:tE(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(i=r.error)===null||i===void 0?void 0:i.bind(r),complete:(n=r.complete)===null||n===void 0?void 0:n.bind(r)}}var Us=class{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new sr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return QC(this._delegate,e._delegate)}},Hs=class extends Us{data(e){let i=this._delegate.data(e);return this._delegate._converter||NM(i!==void 0,"Document in a QueryDocumentSnapshot should exist"),i}},qs=class t{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Ul(e)}where(e,i,n){try{return new t(this.firestore,Ar(this._delegate,RO(e,i,n)))}catch(r){throw vi(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new t(this.firestore,Ar(this._delegate,MO(e,i)))}catch(n){throw vi(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Ar(this._delegate,PO(e)))}catch(i){throw vi(i,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Ar(this._delegate,OO(e)))}catch(i){throw vi(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Ar(this._delegate,FO(...e)))}catch(i){throw vi(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Ar(this._delegate,NO(...e)))}catch(i){throw vi(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Ar(this._delegate,VO(...e)))}catch(i){throw vi(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Ar(this._delegate,LO(...e)))}catch(i){throw vi(i,"endAt()","Query.endAt()")}}isEqual(e){return $C(this._delegate,e._delegate)}get(e){let i;return e?.source==="cache"?i=$O(this._delegate):e?.source==="server"?i=WO(this._delegate):i=qO(this._delegate),i.then(n=>new ih(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){let i=rF(e),n=oF(e,r=>new ih(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return JC(this._delegate,i,n)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},nE=class{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new Hs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ih=class{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new nE(this._firestore,i))}forEach(e,i){this._delegate.forEach(n=>{e.call(i,new Hs(this._firestore,n))})}isEqual(e){return QC(this._delegate,e._delegate)}},ql=class t extends qs{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new sr(this.firestore,e):null}doc(e){try{return e===void 0?new sr(this.firestore,th(this._delegate)):new sr(this.firestore,th(this._delegate,e))}catch(i){throw vi(i,"doc()","CollectionReference.doc()")}}add(e){return KO(this._delegate,e).then(i=>new sr(this.firestore,i))}isEqual(e){return qC(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Hl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function zs(t){return Oe(t,st)}var rE=class t{constructor(...e){this._delegate=new In(...e)}static documentId(){return new t(It.keyField().canonicalString())}isEqual(e){return e=De(e),e instanceof In?this._delegate._internalPath.isEqual(e._internalPath):!1}};var oE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=ZO();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=XO();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let i=JO(...e);return i._methodName="FieldValue.arrayUnion",new t(i)}static arrayRemove(...e){let i=eF(...e);return i._methodName="FieldValue.arrayRemove",new t(i)}static increment(e){let i=tF(e);return i._methodName="FieldValue.increment",new t(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var D$={Firestore:xg,GeoPoint:Fs,Timestamp:ft,Blob:wg,Transaction:Cg,WriteBatch:Eg,DocumentReference:sr,DocumentSnapshot:Us,Query:qs,QueryDocumentSnapshot:Hs,QuerySnapshot:ih,CollectionReference:ql,FieldPath:rE,FieldValue:oE,setLogLevel:S$,CACHE_SIZE_UNLIMITED:hO};function A$(t,e){t.INTERNAL.registerComponent(new Ri("firestore-compat",i=>{let n=i.getProvider("app-compat").getImmediate(),r=i.getProvider("firestore").getImmediate();return e(n,r)},"PUBLIC").setServiceProps(Object.assign({},D$)))}function k$(t){A$(t,(e,i)=>new xg(e,i,new iE)),t.registerVersion(E$,I$)}k$(Bt);function R$(t,e=$s){return new yt(i=>{let n;return e!=null?e.schedule(()=>{n=t.onSnapshot({includeMetadataChanges:!0},i)}):n=t.onSnapshot({includeMetadataChanges:!0},i),()=>{n?.()}})}function sF(t,e){return R$(t,e)}function M$(t,e){return sF(t,e).pipe(ht(void 0),Gl(),B(i=>{let[n,r]=i;return r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function cE(t,e){return sF(t,e).pipe(B(i=>({payload:i,type:"query"})))}var Ig=class{ref;afs;constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){let n=this.ref.collection(e),{ref:r,query:o}=uF(n,i);return new Sg(r,o,this.afs)}snapshotChanges(){return M$(this.ref,this.afs.schedulers.outsideAngular).pipe(Ct)}valueChanges(e={}){return this.snapshotChanges().pipe(B(({payload:i})=>e.idField?Ue(D({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return pt(this.ref.get(e)).pipe(Ct)}};function Tg(t,e){return cE(t,e).pipe(ht(void 0),Gl(),B(i=>{let[n,r]=i,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=o.find(u=>u.doc.ref.isEqual(a.ref)),d=n?.payload.docs.find(u=>u.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function aF(t,e,i){return Tg(t,i).pipe(lr((n,r)=>P$(n,r.map(o=>o.payload),e),[]),hn(),B(n=>n.map(r=>({type:r.type,payload:r}))))}function P$(t,e,i){return e.forEach(n=>{i.indexOf(n.type)>-1&&(t=O$(t,n))}),t}function aE(t,e,i,...n){let r=t.slice();return r.splice(e,i,...n),r}function O$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return aE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let i=t.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}else return aE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return aE(t,e.oldIndex,1);break}return t}function lF(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Sg=class{ref;query;afs;constructor(e,i,n){this.ref=e,this.query=i,this.afs=n}stateChanges(e){let i=Tg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe(B(n=>n.filter(r=>e.indexOf(r.type)>-1)))),i.pipe(ht(void 0),Gl(),He(([n,r])=>r.length>0||!n),B(([,n])=>n),Ct)}auditTrail(e){return this.stateChanges(e).pipe(lr((i,n)=>[...i,...n],[]))}snapshotChanges(e){let i=lF(e);return aF(this.query,i,this.afs.schedulers.outsideAngular).pipe(Ct)}valueChanges(e={}){return cE(this.query,this.afs.schedulers.outsideAngular).pipe(B(i=>i.payload.docs.map(n=>e.idField?Ue(D({},n.data()),{[e.idField]:n.id}):n.data())),Ct)}get(e){return pt(this.query.get(e)).pipe(Ct)}add(e){return this.ref.add(e)}doc(e){return new Ig(this.ref.doc(e),this.afs)}},lE=class{query;afs;constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return!e||e.length===0?Tg(this.query,this.afs.schedulers.outsideAngular).pipe(Ct):Tg(this.query,this.afs.schedulers.outsideAngular).pipe(B(i=>i.filter(n=>e.indexOf(n.type)>-1)),He(i=>i.length>0),Ct)}auditTrail(e){return this.stateChanges(e).pipe(lr((i,n)=>[...i,...n],[]))}snapshotChanges(e){let i=lF(e);return aF(this.query,i,this.afs.schedulers.outsideAngular).pipe(Ct)}valueChanges(e={}){return cE(this.query,this.afs.schedulers.outsideAngular).pipe(B(n=>n.payload.docs.map(r=>e.idField?D({[e.idField]:r.id},r.data()):r.data())),Ct)}get(e){return pt(this.query.get(e)).pipe(Ct)}},cF=new R("angularfire2.enableFirestorePersistence"),dF=new R("angularfire2.firestore.persistenceSettings"),F$=new R("angularfire2.firestore.settings"),N$=new R("angularfire2.firestore.use-emulator");function uF(t,e=i=>i){return{query:e(t),ref:t}}var V$=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(i,n,r,o,s,a,l,c,d,u,h,m,b,y,E,j,re){this.schedulers=l;let $=ns(i,a,n),be=d;u&&md($,a,h,b,y,E,m,j),[this.firestore,this.persistenceEnabled$]=Fa(`${$.name}.firestore`,"AngularFirestore",$.name,()=>{let Ie=a.runOutsideAngular(()=>$.firestore());if(o&&Ie.settings(o),be&&Ie.useEmulator(...be),r&&!jo(s)){let Fe=()=>{try{return pt(Ie.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(St){return typeof console<"u"&&console.warn(St),F(!1)}};return[Ie,a.runOutsideAngular(Fe)]}else return[Ie,F(!1)]},[o,be,r])}collection(i,n){let r;typeof i=="string"?r=this.firestore.collection(i):r=i;let{ref:o,query:s}=uF(r,n),a=this.schedulers.ngZone.run(()=>o);return new Sg(a,s,this)}collectionGroup(i,n){let r=n||(s=>s),o=this.firestore.collectionGroup(i);return new lE(r(o),this)}doc(i){let n;typeof i=="string"?n=this.firestore.doc(i):n=i;let r=this.schedulers.ngZone.run(()=>n);return new Ig(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(n){return new(n||t)(_(Xr),_(Zr,8),_(cF,8),_(F$,8),_(wt),_(W),_(is),_(dF,8),_(N$,8),_(rs,8),_(ad,8),_(ld,8),_(cd,8),_(dd,8),_(ud,8),_(hd,8),_(gr,8))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),hF=(()=>{class t{constructor(){Bt.registerVersion("angularfire",nn.full,"fst-compat")}static enablePersistence(i){return{ngModule:t,providers:[{provide:cF,useValue:!0},{provide:dF,useValue:i}]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=H({type:t});static \u0275inj=U({providers:[V$]})}return t})();var rh="Service workers are disabled or not supported by this browser";function L$(t){return Ks(()=>ar(new Error(t)))}var $l=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=L$(rh);else{let n=An(e,"controllerchange").pipe(B(()=>e.controller)),r=Ks(()=>F(e.controller)),o=Gs(r,n);this.worker=o.pipe(He(d=>!!d)),this.registration=this.worker.pipe(qe(()=>e.getRegistration()));let c=An(e,"message").pipe(B(d=>d.data)).pipe(He(d=>d&&d.type)).pipe(yE());c.connect(),this.events=c}}postMessage(e,i){return this.worker.pipe(at(1),Ke(n=>{n.postMessage(D({action:e},i))})).toPromise().then(()=>{})}postMessageWithOperation(e,i,n){let r=this.waitForOperationCompleted(n),o=this.postMessage(e,i);return Promise.all([o,r]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let i;return typeof e=="string"?i=n=>n.type===e:i=n=>e.includes(n.type),this.events.pipe(He(i))}nextEventOfType(e){return this.eventsOfType(e).pipe(at(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(He(i=>i.nonce===e),at(1),B(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},j$=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new J,!n.isEnabled){this.messages=Ys,this.notificationClicks=Ys,this.subscription=Ys;return}this.messages=this.sw.eventsOfType("PUSH").pipe(B(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(B(o=>o.data)),this.pushManager=this.sw.registration.pipe(B(o=>o.pushManager));let r=this.pushManager.pipe(qe(o=>o.getSubscription()));this.subscription=Vt(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(rh));let r={userVisibleOnly:!0},o=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return r.applicationServerKey=s,this.pushManager.pipe(qe(a=>a.subscribe(r)),at(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(rh));let n=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(at(1),qe(n)).toPromise()}decodeBase64(n){return atob(n)}};e.\u0275fac=function(r){return new(r||e)(_($l))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})(),B$=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=Ys,this.unrecoverable=Ys;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(rh));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(rh));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}};e.\u0275fac=function(r){return new(r||e)(_($l))},e.\u0275prov=A({token:e,factory:e.\u0275fac});let t=e;return t})();var mF=new R("");function z$(t,e,i,n){return()=>{if(!(ic(n)&&"serviceWorker"in navigator&&i.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let r;if(typeof i.registrationStrategy=="function")r=i.registrationStrategy();else{let[s,...a]=(i.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":r=F(null);break;case"registerWithDelay":r=fF(+a[0]||0);break;case"registerWhenStable":r=a[0]?Vt(pF(t),fF(+a[0])):pF(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${i.registrationStrategy}`)}}t.get(W).runOutsideAngular(()=>r.pipe(at(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:i.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function fF(t){return F(null).pipe(bE(t))}function pF(t){return t.get(ur).isStable.pipe(He(i=>i))}function U$(t,e){return new $l(ic(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var nh=class{};function dE(t,e={}){return cr([j$,B$,{provide:mF,useValue:t},{provide:nh,useValue:e},{provide:$l,useFactory:U$,deps:[nh,wt]},{provide:Bg,useFactory:z$,deps:[ri,mF,nh,wt],multi:!0}])}var gF={providers:[dT(HD),DI(),Av(),Av(),EE([Om.initializeApp(qD.firebaseConfig),Fm,m1,hF]),dE("ngsw-worker.js",{enabled:!oa(),registrationStrategy:"registerWhenStable:30000"}),dE("ngsw-worker.js",{enabled:!oa(),registrationStrategy:"registerWhenStable:30000"})]};var _F=(()=>{let e=class e{constructor(){this.title="esquema"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X({type:e,selectors:[["app-root"]],standalone:!0,features:[Z],decls:1,vars:0,template:function(r,o){r&1&&q(0,"router-outlet")},dependencies:[W_]});let t=e;return t})();TI(_F,gF).catch(t=>console.error(t));
